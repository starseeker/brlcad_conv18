
# This code was developed with the support of the United States Government,
# and is not subject to copyright.

MAKE_RULES =  ../../make_rules
include $(MAKE_RULES)

PDES = ../../..

###############################################################

#  This Makefile builds the SCL probe user interface library
#  (probe-ui).  All files below this point are made using relative
#  paths based on the PDES and LIBRARY macro.  The make_rules file
#  specifies which compiler and preprocessors will be used.

LIBRARY = ../../lib/libCprobe-ui.a

###############################################################

CORE		= $(PDES)/src/clstepcore
DAI		= $(PDES)/src/cldai
SCL_EDITOR	= $(PDES)/src/cleditor
UTILS		= $(PDES)/src/clutils
IVFASD		= $(PDES)/src/clivfasd
PROBE_UI	= $(PDES)/src/clprobe-ui

PDESINCLUDES = -I$(SCL_EDITOR) \
		-I$(CORE) \
		-I$(DAI) \
		-I$(UTILS)

IVINCLUDES = -I$(IVFASD) \
		-I$(IV_INCLUDE_DIR)

INCLUDES =	-I../.. \
		-I$(PROBE_UI) \
		$(PDESINCLUDES) \
		$(MR_INCLUDES) \
		$(IVINCLUDES) 

METAFILES = \
	sclfilechooser.o \
	headerdisp.o \
	probe.o \
	stepenteditor.o \
	stepentdescriptor.o \
	seestreditors.o \
	instcmdbufdisp.o \
	seinstdisp.o \
	setypedisp.o \
	dpmenuitem.o

%.o:  $(PROBE_UI)/%.cc
	@echo " "
	@echo "compiling $<";
	$(CXX) $(CFLAGS) $(INCLUDES) -c $< 

all: $(LIBRARY) probemain.o

#			make the probe library
$(LIBRARY): $(METAFILES)
	@echo " "
	@echo "making $(LIBRARY)"
	echo "ar rc $(LIBRARY) $?"; \
	ar rc $(LIBRARY) $?; \
	echo "$(RANLIB) $(LIBRARY)"; \
	$(RANLIB) $(LIBRARY); \
#################################

clean:
	rm $(METAFILES) $(LIBRARY)

build:	checkout clean all

checkout:
	cd $(PROBE_UI); co checkout; checkout;
depend:
	$(MAKE_DEPEND) $(MR_COND_DEFS) $(CPLUSINCLUDES) $(INCLUDES) $(PROBE_UI)/*.cc

#
# dependencies generated by makedepend
#

# DO NOT DELETE THIS LINE -- make depend depends on it.
