
lib_LTLIBRARIES = libbu.la
noinst_LTLIBRARIES = libbu_nil.la

noinst_PROGRAMS = \
	test_basename \
	test_booleanize \
	test_ctype \
	test_dirname \
	test_escape \
	test_progname \
	test_quote \
	test_timer \
	test_vls_vprintf \
	test_sscanf \
	test_bitv

libbu_nil_la_SOURCES = \
	argv.c \
	avs.c \
	backtrace.c \
	badmagic.c \
	basename.c \
	bitv.c \
	bomb.c \
	booleanize.c \
	brlcad_path.c \
	cmd.c \
	cmdhist.c \
	color.c \
	convert.c \
	crashreport.c \
	ctype.c \
	dirent.c \
	dirname.c \
	dlfcn.c \
	endian.c \
	escape.c \
	fchmod.c \
	fgets.c \
	file.c \
	fnmatch.c \
	fopen_uniq.c \
	getcwd.c \
	getopt.c \
	globals.c \
	hash.c \
	hist.c \
	hook.c \
	htond.c \
	htonf.c \
	interrupt.c \
	ispar.c \
	kill.c \
	lex.c \
	linebuf.c \
	list.c \
	log.c \
	magic.c \
	malloc.c \
	mappedfile.c \
	mread.c \
	observer.c \
	parallel.c \
	parse.c \
	pool.c \
	printb.c \
	process.c \
	progname.c \
	ptbl.c \
	quote.c \
	rb_create.c \
	rb_delete.c \
	rb_diag.c \
	rb_extreme.c \
	rb_free.c \
	rb_insert.c \
	rb_order_stats.c \
	rb_rotate.c \
	rb_search.c \
	rb_walk.c \
	realpath.c \
	semaphore.c \
	simd.c \
	sscanf.c \
	str.c \
	tcl.c \
	temp.c \
	timer.c \
	units.c \
	vers.c \
	vfont.c \
	vlb.c \
	vls.c \
	vls_vprintf.c \
	whereis.c \
	which.c \
	xdr.c

libbu_la_SOURCES =
libbu_la_LDFLAGS = -version-info 19:1 -no-undefined
libbu_la_LIBADD = \
	libbu_nil.la \
	${BU_LIBS}

test_booleanize_SOURCES = test_booleanize.c
test_booleanize_LDADD = \
	libbu.la \
	${BU_LIBS}

test_bitv_SOURCES = test_bitv.c
test_bitv_LDADD = \
	libbu.la \
	${BU_LIBS}

test_ctype_SOURCES = test_ctype.c
test_ctype_LDADD = \
	libbu.la \
	${BU_LIBS}

test_timer_SOURCES = test_timer.c
test_timer_LDADD = \
	libbu.la \
	${BU_LIBS}

test_basename_SOURCES = test_basename.c
test_basename_LDADD = \
	libbu.la \
	${BU_LIBS}

test_escape_SOURCES = test_escape.c
test_escape_LDADD = \
	libbu.la \
	${BU_LIBS}

test_dirname_SOURCES = test_dirname.c
test_dirname_LDADD = \
	libbu.la \
	${BU_LIBS}

test_progname_SOURCES = test_progname.c
test_progname_LDADD = \
	libbu.la \
	${BU_LIBS}

test_quote_SOURCES = test_quote.c
test_quote_LDADD = \
	libbu.la \
	${BU_LIBS}

test_vls_vprintf_SOURCES = test_vls_vprintf.c
test_vls_vprintf_LDADD = \
	libbu.la \
	${BU_LIBS}

test_sscanf_SOURCES = test_sscanf.c
test_sscanf_LDADD = \
	libbu.la \
	${BU_LIBS}

noinst_HEADERS = \
	rb_internals.h \
	vls_internals.h

man_MANS = \
	htond.3 \
	redblack.3

EXTRA_DIST = \
	$(man_MANS) \
	uce-dirent.h \
	CMakeLists.txt

AM_CPPFLAGS = \
	-DPREFIX=\"$(prefix)\" \
	${PNG_CPPFLAGS} \
	${TCL_CPPFLAGS} \
	${LIBZ_CPPFLAGS}

AM_CFLAGS = ${STRICT_FLAGS}

if BUILD_TCL
TCLDEP = $(LDEP) src/other/tcl
else
TCLDEP =
endif

if BUILD_PNG
PNGDEP = $(LDEP) src/other/libpng
else
PNGDEP =
endif

DEPENDS = include $(TCLDEP) $(PNGDEP)

include $(top_srcdir)/misc/Makefile.defs

FAST_OBJECTS = \
	$(libbu_nil_la_OBJECTS) \
	$(libbu_la_OBJECTS) \
	$(lib_LTLIBRARIES) \
	$(noinst_LTLIBRARIES) \
	$(noinst_PROGRAMS)
