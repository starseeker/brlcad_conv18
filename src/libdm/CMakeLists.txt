IF(WIN32 AND BRLCAD-ENABLE_OPENGL)
	SET(DM_DEFINES "${DM_DEFINES} -DDM_WGL -DIF_WGL")
ENDIF(WIN32 AND BRLCAD-ENABLE_OPENGL)

IF(BRLCAD-ENABLE_X11)
	SET(DM_DEFINES  "${DM_DEFINES} -DDM_X -DIF_X") 
ENDIF(BRLCAD-ENABLE_X11)

IF(BRLCAD-ENABLE_X11 AND BRLCAD-ENABLE_OPENGL)
	SET(DM_DEFINES "${DM_DEFINES} -DDM_OGL -DIF_OGL")
ENDIF(BRLCAD-ENABLE_X11 AND BRLCAD-ENABLE_OPENGL)

IF(BRLCAD-ENABLE_RTGL)
	SET(DM_DEFINES "${DM_DEFINES} -DDM_RTGL -DIF_RTGL")
ENDIF(BRLCAD-ENABLE_RTGL)

IF(TK_LIBRARY)
	SET(DM_DEFINES "${DM_DEFINES} -DDM_TK -DIF_TK")
	SET(DM_TKLIB ${TK_LIBRARY})
ENDIF(TK_LIBRARY)


SET(LIBDM_SRCS
	adc.c 
	axes.c 
	clip.c 
	color.c 
	dm-Null.c 
	dm-X.c 
	dm-tk.c 
	dm-generic.c 
	dm-ogl.c 
	dm-rtgl.c 
	dm-plot.c 
	dm-ps.c 
	dm-wgl.c 
	dm_obj.c 
	focus.c 
	grid.c 
	knob.c 
	labels.c 
	options.c 
	query.c 
	rect.c 
	scale.c 
	tcl.c 
	vers.c
)

include_directories(
	${TERMLIB_INCLUDE_DIR}
	${PNG_INCLUDE_DIR}
	${X11_INCLUDE_DIR}
	${OPENGL_INCLUDE_DIR_GL}
	${OPENGL_INCLUDE_DIR_GLX}
	${TCL_INCLUDE_PATH}
	${TK_INCLUDE_PATH}
)

add_definitions(
	${DM_DEFINES}
)

FOREACH(xlib ${X11_LIBRARIES})
	SET(DM_XLIBS "${DM_XLIBS} ${xlib}")
ENDFOREACH(xlib ${X11_LIBRARIES})

BRLCAD_ADDLIB(libdm "${LIBDM_SRCS}" "librt libfb libged ${DM_XLIBS} ${X11_Xi_LIB} ${DM_TKLIB}")
SET_TARGET_PROPERTIES(libdm PROPERTIES VERSION 19.0.1 SOVERSION 19)
