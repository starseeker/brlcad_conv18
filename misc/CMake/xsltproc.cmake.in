SET(ENV{XML_DEBUG_CATALOG} 1)
# It is necessary to ensure that the target directory exists *before* calling xsltproc
# when building in parallel, due to a bug/limitation in xsltproc
execute_process(COMMAND "@CMAKE_COMMAND@" -E make_directory @mk_out_dir@/)
execute_process(COMMAND "@XSLTPROC_EXECUTABLE@" -nonet -xinclude -o @outfile@ @CURRENT_XSL_STYLESHEET@ @CMAKE_CURRENT_SOURCE_DIR@/@filename@ RESULT_VARIABLE CMDRESULT)
IF(CMDRESULT)
  MESSAGE(FATAL_ERROR "xsltproc build failure: ${CMDRESULT}")
ENDIF(CMDRESULT)

