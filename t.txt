------------------------------------------------------------------------
r55148 | brlcad | 2013-04-12 14:44:37 -0500 (Fri, 12 Apr 2013) | 1 line

BRLCAD_DATA_SUBPATH is redundant and no longer used
------------------------------------------------------------------------
r55131 | brlcad | 2013-04-11 21:43:09 -0500 (Thu, 11 Apr 2013) | 1 line

we technically do not need 2.8.7, only the sub-cmake needs it.  cmake
figures out the subdependency version requirement correctly.
------------------------------------------------------------------------
r55082 | starseeker | 2013-04-08 13:48:19 -0500 (Mon, 08 Apr 2013) | 1
line

Need MD5 option to STRING command, which wasn't introduced until CMake 2.8.7
------------------------------------------------------------------------
r55081 | starseeker | 2013-04-08 11:09:19 -0500 (Mon, 08 Apr 2013) | 1 line

Reset BRLCAD_LIBS list to make sure items don't linger after being turned off in a configure pass.
------------------------------------------------------------------------
r55079 | starseeker | 2013-04-08 10:28:13 -0500 (Mon, 08 Apr 2013) | 1 line

CMAKE_INSTALL_PREFIX is a path, not just a string
------------------------------------------------------------------------
r55024 | brlcad | 2013-04-03 01:24:23 -0500 (Wed, 03 Apr 2013) | 1 line

BRLCAD_TYPE_SIZE() and the built-in CMAKE_CHECK_TYPE() macros are no good for this purpose since they try to sizeof().  instead, just try compiling a small custom snippet.
------------------------------------------------------------------------
r55023 | brlcad | 2013-04-03 01:04:18 -0500 (Wed, 03 Apr 2013) | 1 line

initial attempt at testing for TLS type specifiers
------------------------------------------------------------------------
r54966 | brlcad | 2013-03-29 10:19:57 -0500 (Fri, 29 Mar 2013) | 1 line

check for the mach kernel thread_policy header
------------------------------------------------------------------------
r54960 | brlcad | 2013-03-29 00:22:50 -0500 (Fri, 29 Mar 2013) | 1 line

need to check for a few headers to support thread affinity on bsd.  check for pthread_np.h and sys/cpuset.h headers along with the cpu_set_t type (which is linux, bsd is cpuset_t but allegedly may switch to match).
------------------------------------------------------------------------
r54827 | starseeker | 2013-03-22 09:44:01 -0500 (Fri, 22 Mar 2013) | 1 line

Remove the long-deprecated jove editor in src/other.
------------------------------------------------------------------------
r54719 | r_weiss | 2013-03-18 14:57:52 -0500 (Mon, 18 Mar 2013) | 1 line

Updates to cmake configuration and changes to data types to allow the wrapper functions for functions "fseek", "lseek", "ftell", "fstat" and "stat" to build on Windows 64bit using MSVS 2010. 
------------------------------------------------------------------------
r54440 | brlcad | 2013-02-19 23:18:53 -0600 (Tue, 19 Feb 2013) | 1 line

make statements match
------------------------------------------------------------------------
r54436 | brlcad | 2013-02-19 22:16:31 -0600 (Tue, 19 Feb 2013) | 1 line

latest glibc-1.6 changed _FORTIFY_SOURCE to spew a warning if not compiling optimized.  change our build to match, adding the flag only when building optimized (not debug like we want).
------------------------------------------------------------------------
r54217 | brlcad | 2013-01-29 01:21:02 -0600 (Tue, 29 Jan 2013) | 1 line

update copyright for 2013 welcoming our files to the year of slithering slathering serpent subjects
------------------------------------------------------------------------
r54140 | starseeker | 2013-01-06 06:58:31 -0600 (Sun, 06 Jan 2013) | 1 line

No longer need crypt library, without enigma
------------------------------------------------------------------------
r54130 | starseeker | 2013-01-03 16:15:58 -0600 (Thu, 03 Jan 2013) | 1 line

Windows uses neither X11 nor Aqua, but still needs OpenGL and enables Tk.
------------------------------------------------------------------------
r54104 | brlcad | 2012-12-20 15:24:08 -0600 (Thu, 20 Dec 2012) | 1 line

rename and move doc/deprecation.txt to a new top-level CHANGES file.  that name was selected after reviewing a number of other projects with similar deprecation announcement requirements and it seems to be a reasonable evolution.  more clearly announcing changes to developer users is just as important (if not more so) as the non-developer 'user-visible' NEWS items.  It has also been a repeat topic of discussion, a repeat issue (devs not remembering it's in doc/), and one of the most frequently revisited docs.  That's compelling support for introducing a new top-level file.  Introducing it into include/ was considered, but it also covers commands.
------------------------------------------------------------------------
r54095 | caen23 | 2012-12-19 18:50:01 -0600 (Wed, 19 Dec 2012) | 1 line

Fix previous commit which removed some lines, causing a build failure with X11 enabled
------------------------------------------------------------------------
r54094 | caen23 | 2012-12-19 17:47:45 -0600 (Wed, 19 Dec 2012) | 1 line

X11 is available if the required files in both include/ and lib/ can be found (GCI: http://www.google-melange.com/gci/task/view/google/gci2012/7999218)
------------------------------------------------------------------------
r54032 | brlcad | 2012-12-09 14:56:45 -0600 (Sun, 09 Dec 2012) | 1 line

x11 is available on windows, so don't make it impossible to use it.  we can just let the checks fall through after looking for it and testing whether aqua is enabled.  this allows a slew of simlifications eliminating several of the win32 and apple platform checks, which are bad smells anyways.
------------------------------------------------------------------------
r54023 | starseeker | 2012-12-07 10:33:11 -0600 (Fri, 07 Dec 2012) | 1 line

Move FindX11 up in the logic, don't enable by default if it isn't found.
------------------------------------------------------------------------
r54022 | starseeker | 2012-12-07 09:58:56 -0600 (Fri, 07 Dec 2012) | 1 line

Try a non-build-target based approach to the XML validation.
------------------------------------------------------------------------
r53996 | starseeker | 2012-12-04 18:38:59 -0600 (Tue, 04 Dec 2012) | 1 line

Typo
------------------------------------------------------------------------
r53995 | starseeker | 2012-12-04 18:31:40 -0600 (Tue, 04 Dec 2012) | 1 line

More informative comment for DocBook validation issue on MSVC - note it's 2010, not 2012
------------------------------------------------------------------------
r53994 | starseeker | 2012-12-04 18:28:19 -0600 (Tue, 04 Dec 2012) | 1 line

Visual Studio 2012 seems to be pushed beyond its limits when validation targets are added - pushes the build target count over 1800.  Disable validation if we are on MSVC.
------------------------------------------------------------------------
r53993 | starseeker | 2012-12-04 18:11:12 -0600 (Tue, 04 Dec 2012) | 1 line

Turn off strict again until the info thing is fixed in the man pages.
------------------------------------------------------------------------
r53956 | starseeker | 2012-12-02 14:55:31 -0600 (Sun, 02 Dec 2012) | 1 line

DocBook conversion just about complete, thanks to awesome GCI work.  Turn strict XML validation back on by default.
------------------------------------------------------------------------
r53939 | starseeker | 2012-12-01 23:11:06 -0600 (Sat, 01 Dec 2012) | 1 line

Back off on strict XML until we're done with GCI conversion of man pages, to allow for task breakout of conversion and strict fixes.
------------------------------------------------------------------------
r53884 | starseeker | 2012-11-28 19:23:51 -0600 (Wed, 28 Nov 2012) | 1 line

Now that DocBook documentation does pass xmllint validation thanks to Cezar's work, turn on validation whenever BRL-CAD's strict build setting is enabled (i.e. most of the time.)  xmllint validation is the DocBook analogue to our C/C++ strict flags, so it makes sense to enable both when we're being 'strict' - forces us to keep the sources in a clean state.
------------------------------------------------------------------------
r53824 | starseeker | 2012-11-26 16:29:18 -0600 (Mon, 26 Nov 2012) | 1 line

Couple header tests that autotools was recording in brlcad_config.h but CMake wasn't.
------------------------------------------------------------------------
r53813 | brlcad | 2012-11-26 01:47:43 -0600 (Mon, 26 Nov 2012) | 1 line

quote the strings.  if they're empty, cmake dumps an error.
------------------------------------------------------------------------
r53743 | starseeker | 2012-11-18 15:50:06 -0600 (Sun, 18 Nov 2012) | 1 line

Add note to investigate whether if(TARGET ) test will replace pulling and checking for target properites manually... could simplify the logic for this quite a bit.
------------------------------------------------------------------------
r52476 | brlcad | 2012-09-17 21:26:23 -0500 (Mon, 17 Sep 2012) | 1 line

helps to set a cmake variable if we're going to stash it as a #cmakedefine
------------------------------------------------------------------------
r52474 | brlcad | 2012-09-17 21:12:21 -0500 (Mon, 17 Sep 2012) | 1 line

turns out that BRLCAD_INCLUDE_FILE is only searching in system include dirs (and the appended /usr/local/include required dir) but not any of the X11 include paths.  regardless, we don't need to retry the search since we found it or not during FindX11 checking.  Just add our config file entry accordingly.
------------------------------------------------------------------------
r52465 | brlcad | 2012-09-17 09:53:44 -0500 (Mon, 17 Sep 2012) | 1 line

move it over to the other compilation flags, wrap to vendor
------------------------------------------------------------------------
r52464 | brlcad | 2012-09-17 09:50:30 -0500 (Mon, 17 Sep 2012) | 1 line

one of two steps needed to support 10.5+ compilation by default
------------------------------------------------------------------------
r52402 | starseeker | 2012-09-08 08:58:46 -0500 (Sat, 08 Sep 2012) | 1 line

The libged per-command build logic was premature - until we have a real need for per-command handling, it's just a useless distraction.
------------------------------------------------------------------------
r52028 | carlmoore | 2012-08-15 11:47:18 -0500 (Wed, 15 Aug 2012) | 1 line

remove trailing blanks/tabs and fix spelling
------------------------------------------------------------------------
r52007 | starseeker | 2012-08-14 11:57:37 -0500 (Tue, 14 Aug 2012) | 1 line

sp
------------------------------------------------------------------------
r52006 | starseeker | 2012-08-14 10:55:52 -0500 (Tue, 14 Aug 2012) | 1 line

Update documentation on handling of INSTALL.new, configure.new, and perplex/re2c/lemon cached files.
------------------------------------------------------------------------
r52005 | starseeker | 2012-08-14 10:35:30 -0500 (Tue, 14 Aug 2012) | 1 line

INSTALL and configure.cmake.sh are (partially) autogenerated - clean up the ws in the source contents, rather than the generated output.
------------------------------------------------------------------------
r51963 | starseeker | 2012-08-13 12:37:34 -0500 (Mon, 13 Aug 2012) | 1 line

Do for the automatically maintained files what we're doing in the SCL case - unless explicitly told the source directory is totally locked, go ahead and do the sync operations.
------------------------------------------------------------------------
r51793 | carlmoore | 2012-08-07 15:18:25 -0500 (Tue, 07 Aug 2012) | 1 line

remove trailing blanks and fix spellings
------------------------------------------------------------------------
r51744 | bob1961 | 2012-08-01 14:02:29 -0500 (Wed, 01 Aug 2012) | 1 line

change the way CPACK_DATA_DIR is set
------------------------------------------------------------------------
r51740 | starseeker | 2012-08-01 08:55:29 -0500 (Wed, 01 Aug 2012) | 1 line

don't hardcode the data path on Windows, that won't work...
------------------------------------------------------------------------
r51729 | starseeker | 2012-07-31 12:55:11 -0500 (Tue, 31 Jul 2012) | 1 line

distcheck cleanups
------------------------------------------------------------------------
r51710 | starseeker | 2012-07-30 07:02:13 -0500 (Mon, 30 Jul 2012) | 1 line

Add unset build type to distcheck-full, since that's going to be the new default.
------------------------------------------------------------------------
r51659 | starseeker | 2012-07-24 14:57:50 -0500 (Tue, 24 Jul 2012) | 1 line

Try to get things working without an explicit build type being set - i.e. don't force the user to use a build type so manually specifying everything for release builds works without CMake barking about conflicts due to the build type being automatically set to debug.
------------------------------------------------------------------------
r51654 | starseeker | 2012-07-24 08:23:10 -0500 (Tue, 24 Jul 2012) | 1 line

Restore build type vs. installation directory check, but just print a warning instead of overriding.
------------------------------------------------------------------------
r51652 | brlcad | 2012-07-23 23:31:06 -0500 (Mon, 23 Jul 2012) | 1 line

given the preceeding logic, the only way for there to be a mismatch is if the user specifically requested a different path.  moreover, the build type will default to Debug without any user action making the claim doubly wrong.  silently 'fixing' user-specified input is also just bad practice...
------------------------------------------------------------------------
r51650 | brlcad | 2012-07-23 23:11:45 -0500 (Mon, 23 Jul 2012) | 1 line

BRL-CAD, not BRLCAD
------------------------------------------------------------------------
r51601 | starseeker | 2012-07-19 15:22:38 -0500 (Thu, 19 Jul 2012) | 1 line

Start adding some tests for tri_tri routines.
------------------------------------------------------------------------
r51556 | starseeker | 2012-07-16 22:35:02 -0500 (Mon, 16 Jul 2012) | 1 line

reject full paths for BIN_DIR, LIB_DIR and friends.
------------------------------------------------------------------------
r51554 | starseeker | 2012-07-16 20:36:09 -0500 (Mon, 16 Jul 2012) | 1 line

Stray variable left over from early days.
------------------------------------------------------------------------
r51552 | starseeker | 2012-07-16 20:28:18 -0500 (Mon, 16 Jul 2012) | 1 line

Strip out attempt at LFS specific prefix settings
------------------------------------------------------------------------
r51551 | starseeker | 2012-07-16 20:19:58 -0500 (Mon, 16 Jul 2012) | 1 line

Take the DATA_DIR assumption out of DOC_DIR targets - DOC_DIR output still defaults to using DATA_DIR, but is no longer forced to.
------------------------------------------------------------------------
r51549 | starseeker | 2012-07-16 17:44:22 -0500 (Mon, 16 Jul 2012) | 1 line

Do some experimentation with altering LIB_DIR.  Need some introspective ability to know the relative library path, so add a command that can give us that.  DOC_DIR needs some work - should be more like MAN_DIR and not necessarily assume DATA_DIR is the final destination.  Looks like the main problem with moving things out of lib is (surprise) the Tcl/Tk initialization process and packages.
------------------------------------------------------------------------
r51546 | starseeker | 2012-07-16 14:35:27 -0500 (Mon, 16 Jul 2012) | 1 line

Fix so we don't need to use DATA_DIR everywhere - put MAN_DIR back to the DATA_DIR by default, until we figure out what we want to do as a standard behavior.
------------------------------------------------------------------------
r51468 | starseeker | 2012-07-12 11:04:21 -0500 (Thu, 12 Jul 2012) | 1 line

Get MAN_DIR working with both DocBook and regular man pages, and put both in man instead of down in the data directory.
------------------------------------------------------------------------
r51460 | starseeker | 2012-07-11 13:29:06 -0500 (Wed, 11 Jul 2012) | 1 line

Tweak package naming a bit.
------------------------------------------------------------------------
r51331 | cprecup | 2012-06-25 16:01:09 -0500 (Mon, 25 Jun 2012) | 1 line

Added a compile-time preprocessor #define HAVE_ADAPTAGRAMGS
------------------------------------------------------------------------
r51299 | starseeker | 2012-06-23 12:18:32 -0500 (Sat, 23 Jun 2012) | 1 line

Remove what look like stray leftover lines - distclean is handled with cmake script files now.
------------------------------------------------------------------------
r51287 | starseeker | 2012-06-22 11:58:58 -0500 (Fri, 22 Jun 2012) | 1 line

tweak
------------------------------------------------------------------------
r51233 | d_rossberg | 2012-06-19 08:15:53 -0500 (Tue, 19 Jun 2012) | 1 line

made the asinh() handling a twin of hypot()
------------------------------------------------------------------------
r51231 | starseeker | 2012-06-19 07:32:21 -0500 (Tue, 19 Jun 2012) | 1 line

asinh is like hypot test - can't handle it as a check_function_exists call.  needs testing on Windows
------------------------------------------------------------------------
r51229 | d_rossberg | 2012-06-19 06:45:57 -0500 (Tue, 19 Jun 2012) | 2 lines

build error in MSVS: asinh() is C99, implement it with log() and sqrt() if not present
(and there where lots of trailing white spaces removed)
------------------------------------------------------------------------
r51134 | brlcad | 2012-06-14 13:02:26 -0500 (Thu, 14 Jun 2012) | 1 line

check for the sys/resource.h header for setpriority()/getpriority()
------------------------------------------------------------------------
r51017 | starseeker | 2012-06-08 09:11:47 -0500 (Fri, 08 Jun 2012) | 1 line

It's COPYONLY, not COPY_ONLY
------------------------------------------------------------------------
r51003 | starseeker | 2012-06-07 16:52:21 -0500 (Thu, 07 Jun 2012) | 1 line

Remove debugging message
------------------------------------------------------------------------
r50994 | starseeker | 2012-06-07 14:38:41 -0500 (Thu, 07 Jun 2012) | 1 line

Make CMAKE_BUILD_TYPE case insensitive for Release and Debug
------------------------------------------------------------------------
r50988 | starseeker | 2012-06-07 11:22:51 -0500 (Thu, 07 Jun 2012) | 1 line

Try suppressing regeneration with Visual Studio.  Thanks to the 2010 IDE prompting manually to reload every target after a CMake run, it's just not viable to re-run CMake from within Visual Studio.
------------------------------------------------------------------------
r50840 | starseeker | 2012-06-03 21:21:21 -0500 (Sun, 03 Jun 2012) | 1 line

By default, turn on STRICT for C++ as well as C files.  Add a specific option, NOSTRICTCXX, to allow targets to specifically disable strict compilation for C++ files only (beneficial for targets that use both C++ and C - allows the C to remain strict enabled.)
------------------------------------------------------------------------
r50740 | starseeker | 2012-05-29 11:10:12 -0500 (Tue, 29 May 2012) | 1 line

Alter umask test to use POSIX -S output, per suggestion from Sean.
------------------------------------------------------------------------
r50739 | starseeker | 2012-05-29 10:29:54 -0500 (Tue, 29 May 2012) | 1 line

Whoops, stray line
------------------------------------------------------------------------
r50738 | starseeker | 2012-05-29 10:19:03 -0500 (Tue, 29 May 2012) | 1 line

Check a variety of known 'OK' umask settings - avoids invalid matches to the regex like 0222 (thanks Sean.)
------------------------------------------------------------------------
r50737 | starseeker | 2012-05-29 09:56:25 -0500 (Tue, 29 May 2012) | 1 line

As it turns out, umask settings do have some impact on CMake/CPack builds.  While CMake's install process does not directly make use of umask, the temporary files staged in the build directory do.  The install process in turn makes use of the permissions set on those files.  It does not appear to be possible to set umask from the CMake build itself, so instead warnings are generated if the umask setting looks problematic.
------------------------------------------------------------------------
r50653 | starseeker | 2012-05-24 10:26:12 -0500 (Thu, 24 May 2012) | 1 line

This should improve the behavior and robustness of the type checking macro in BRL-CAD.  While we're at it, make the variable names automatic and deduced from the type itself.
------------------------------------------------------------------------
r50426 | starseeker | 2012-05-03 12:41:23 -0500 (Thu, 03 May 2012) | 1 line

Try to make the stdc++ usage a matter of detection instead of hardcoding.  Untested on systems which would show the issue.
------------------------------------------------------------------------
r50404 | starseeker | 2012-05-01 22:37:10 -0500 (Tue, 01 May 2012) | 1 line

Add a note about the FIND_LIBRARY_USE_LIB32_PATHS bug, so we know where to look if/when the issue comes up.
------------------------------------------------------------------------
r50402 | starseeker | 2012-05-01 22:32:55 -0500 (Tue, 01 May 2012) | 1 line

This looks like it might be a viable way of regularly checking the Autotools distcheck target (at least to the extent of making sure it doesn't error out).  Right now it looks like trunk Autotools distcheck is not happy, so this breaks distcheck-full until that gets sorted out.
------------------------------------------------------------------------
r50398 | brlcad | 2012-05-01 21:05:57 -0500 (Tue, 01 May 2012) | 1 line

revert r50386,50391-50393 as removal of prior build system is very premature.  it was just deprecated in 7.20.0 and is supposed to exist deprecated across three minor releases.  implies 7.24.0 would be the soonest (or 7.26.0 if interpreted strictly), and we're not even to 7.22.0 yet.
------------------------------------------------------------------------
r50391 | starseeker | 2012-05-01 16:59:36 -0500 (Tue, 01 May 2012) | 1 line

Rename configure.cmake.sh to configure
------------------------------------------------------------------------
r50386 | erikgreenwald | 2012-05-01 13:26:57 -0500 (Tue, 01 May 2012) | 1 line

11 months and a minor, time to purge the autotools build system
------------------------------------------------------------------------
r50384 | brlcad | 2012-05-01 12:36:36 -0500 (Tue, 01 May 2012) | 1 line

irix is gone now too, so remove unused libgen library check
------------------------------------------------------------------------
r50383 | brlcad | 2012-05-01 12:35:27 -0500 (Tue, 01 May 2012) | 1 line

the SGI graphics library is no more.  no longer used, so no point checking for it either.
------------------------------------------------------------------------
r50382 | brlcad | 2012-05-01 12:18:37 -0500 (Tue, 01 May 2012) | 1 line

unclear what this lib check is for too.  seems to be unused.
------------------------------------------------------------------------
r50381 | brlcad | 2012-05-01 12:08:06 -0500 (Tue, 01 May 2012) | 1 line

move the opengl header check out of the lib stage into the header stage
------------------------------------------------------------------------
r50380 | brlcad | 2012-05-01 12:05:58 -0500 (Tue, 01 May 2012) | 1 line

m library doesn't exist on windows.  test should just fail, no?
------------------------------------------------------------------------
r50378 | brlcad | 2012-05-01 11:58:45 -0500 (Tue, 01 May 2012) | 1 line

rename library variable to just the name of the library for consistency.  might want a common prefix or suffix, but would need to review all libs.  rename NS to NSL and NETWORK_SOCKET to just NETWORK.
------------------------------------------------------------------------
r50377 | brlcad | 2012-05-01 11:46:19 -0500 (Tue, 01 May 2012) | 1 line

MX is not used, remove it.  what is libds?  remove it too.  rename DLOPEN to DL since it's related to libdl.  looks like it's also unused, but it should be for all the dynamic libbu support .. which has probably all just unfortunately gotten left disabled since the conversion to cmake.
------------------------------------------------------------------------
r50317 | starseeker | 2012-04-26 07:50:31 -0500 (Thu, 26 Apr 2012) | 1 line

Start straightening out Java and rtserver enablement now that we're not trying to link Java libs unnecessarily
------------------------------------------------------------------------
r50191 | starseeker | 2012-04-19 23:53:13 -0500 (Thu, 19 Apr 2012) | 1 line

Couple tweaks for the subbuild case - need to make sure we avoid names like liblibbu, and distcheck is disabled when we're a subbuild.
------------------------------------------------------------------------
r50004 | starseeker | 2012-04-13 13:45:53 -0500 (Fri, 13 Apr 2012) | 1 line

fix it so the documentation summary line doesn't lie when we're only building libraries
------------------------------------------------------------------------
r50002 | starseeker | 2012-04-13 13:32:10 -0500 (Fri, 13 Apr 2012) | 1 line

Per user request, at a way to indicate to CMake that it should build either a) just what is needed for librt b) just what is needed for the libraries sans executables or c) everything (default) via the BRLCAD_ENABLE_TARGETS variable
------------------------------------------------------------------------
r49959 | starseeker | 2012-04-09 23:40:45 -0500 (Mon, 09 Apr 2012) | 1 line

Don't hit the disk more than we need to - build the file and directory lists using global properties, then write them out to files at the end for later use.  May help configure time a bit, especially on MSVC, but not tested there yet.
------------------------------------------------------------------------
r49951 | starseeker | 2012-04-08 15:38:28 -0500 (Sun, 08 Apr 2012) | 1 line

Update/add footers and add a few headers in misc/CMake via sh scripts
------------------------------------------------------------------------
r49931 | starseeker | 2012-04-06 00:58:10 -0500 (Fri, 06 Apr 2012) | 1 line

Checkpoint - working to make odd pathname case functional again, probably still more to do.
------------------------------------------------------------------------
r49923 | starseeker | 2012-04-05 12:32:10 -0500 (Thu, 05 Apr 2012) | 1 line

provide the paths we want for each test
------------------------------------------------------------------------
r49921 | starseeker | 2012-04-05 11:59:43 -0500 (Thu, 05 Apr 2012) | 1 line

Make defining distcheck targets a bit more flexible.  Add a test for pathnames with odd characters.
------------------------------------------------------------------------
r49916 | starseeker | 2012-04-05 06:48:15 -0500 (Thu, 05 Apr 2012) | 1 line

Use parallel make in more places than just the main builds
------------------------------------------------------------------------
r49914 | starseeker | 2012-04-04 21:33:24 -0500 (Wed, 04 Apr 2012) | 1 line

Expand the power of distcheck again.  Add support for testing in-source-directory building, as well as adding checks of the distclean rule to all builds - again, including the in-source-directory test.  Define a couple more configurations for the 'distcheck-full' target.  Switch CPack source archive building from 'exclude what we don't want' to 'copy what we do want to a directory in the build dir and use that to generate the archive' - avoids having to worry whether CPack has the right list of things to ignore.  Everything now appears to pass, at least on Linux - there, distcheck-full succeeded.  What will happen with a multi-configuration tool like Xcode is untested as yet.
------------------------------------------------------------------------
r49907 | starseeker | 2012-04-04 08:19:22 -0500 (Wed, 04 Apr 2012) | 1 line

Couple cleanups
------------------------------------------------------------------------
r49905 | starseeker | 2012-04-04 00:30:19 -0500 (Wed, 04 Apr 2012) | 1 line

Take a stab at making configure_file cmakefiles appending more robust
------------------------------------------------------------------------
r49900 | starseeker | 2012-04-03 16:36:13 -0500 (Tue, 03 Apr 2012) | 1 line

Add a few more files to distclean
------------------------------------------------------------------------
r49896 | starseeker | 2012-04-03 12:57:50 -0500 (Tue, 03 Apr 2012) | 1 line

Few tweaks for distclean
------------------------------------------------------------------------
r49893 | starseeker | 2012-04-03 12:26:42 -0500 (Tue, 03 Apr 2012) | 1 line

Variety of cleanups and simplifications - in particular, ADD_MAN_PAGES is now just a wrapper for BRLCAD_ADDDATA that handles the MAN_DIR setting - we need a MAN_DIR variable that includes the DATA_DIR for generic man page installation from other build systems, but since BRLCAD_ADDDATA assumes it just rework MAN_DIR to be appropriate for BRLCAD_ADDDATA and pass it through ftw.
------------------------------------------------------------------------
r49882 | starseeker | 2012-04-02 20:06:31 -0500 (Mon, 02 Apr 2012) | 1 line

Make a stab at avoiding conflicts between files and build target names in MSVC
------------------------------------------------------------------------
r49868 | starseeker | 2012-04-01 19:45:45 -0500 (Sun, 01 Apr 2012) | 1 line

want this to happen before the timestamp, not after...
------------------------------------------------------------------------
r49866 | starseeker | 2012-04-01 13:54:32 -0500 (Sun, 01 Apr 2012) | 1 line

Paths that trigger CMake's regex rules break the CMake logic - shouldn't be using regex based comparisons for such paths anyway, so fix some comparisons and add a subpath checker that doesn't need regex.  Reported on the email list by Aur?\195?\169lien Marion
------------------------------------------------------------------------
r49865 | starseeker | 2012-04-01 00:28:01 -0500 (Sun, 01 Apr 2012) | 1 line

tweak
------------------------------------------------------------------------
r49864 | starseeker | 2012-04-01 00:08:18 -0500 (Sun, 01 Apr 2012) | 1 line

ws
------------------------------------------------------------------------
r49863 | starseeker | 2012-04-01 00:02:31 -0500 (Sun, 01 Apr 2012) | 1 line

Use LIB_DIR instead of hardcoding lib in the ignore path logic
------------------------------------------------------------------------
r49862 | starseeker | 2012-03-31 23:52:54 -0500 (Sat, 31 Mar 2012) | 1 line

Don't need to manually specify the full CMake version - just use CMAKE_VERSION
------------------------------------------------------------------------
r49861 | starseeker | 2012-03-31 23:48:43 -0500 (Sat, 31 Mar 2012) | 1 line

Use BRLCAD_ADDDATA - seems to work for this after rework
------------------------------------------------------------------------
r49858 | starseeker | 2012-03-31 22:50:10 -0500 (Sat, 31 Mar 2012) | 1 line

Simplify management of the COUNT file - no need for the cache entry or running cmake commands
------------------------------------------------------------------------
r49843 | starseeker | 2012-03-30 07:34:04 -0500 (Fri, 30 Mar 2012) | 1 line

The build type isn't enough to tell us whether we've got a build with debugging enabled - use the debug flags variable.
------------------------------------------------------------------------
r49841 | starseeker | 2012-03-29 21:09:09 -0500 (Thu, 29 Mar 2012) | 1 line

CMakeFiles is specific to BRL-CAD, rename it accordingly
------------------------------------------------------------------------
r49840 | starseeker | 2012-03-29 21:04:54 -0500 (Thu, 29 Mar 2012) | 1 line

Significant simplification of the distcheck logic - reduce it to two macros, one of which calls the other.  Add documentation, improve behavior in some corner cases, enforce a convention we already pretty much followed by default of using relative paths to specify source files in the source tree (this is a robust way to spot generated files in build target definitions, since support for an out of directory build requires that they be specified with their full CMAKE_BINARY_DIR output path.)
------------------------------------------------------------------------
r49839 | starseeker | 2012-03-29 19:02:07 -0500 (Thu, 29 Mar 2012) | 1 line

Break the BRL-CAD target definition macros out into their own file, leave actual Utility macros in Util
------------------------------------------------------------------------
r49829 | starseeker | 2012-03-28 09:30:44 -0500 (Wed, 28 Mar 2012) | 1 line

tweak handling of configuration-aware options
------------------------------------------------------------------------
r49819 | starseeker | 2012-03-26 22:23:04 -0500 (Mon, 26 Mar 2012) | 1 line

Add the appropriate lines for the Ninja generator
------------------------------------------------------------------------
r49798 | starseeker | 2012-03-22 13:59:24 -0500 (Thu, 22 Mar 2012) | 1 line

It's rare to want any configuration besided BUNDLED with MSVC, and the time overhead of a second configure step on Windows can be quite high - go with BUNDLED for the default on MSVC
------------------------------------------------------------------------
r49792 | starseeker | 2012-03-22 12:35:33 -0500 (Thu, 22 Mar 2012) | 1 line

Need to be more specific about the SUBBUILD flag.
------------------------------------------------------------------------
r49775 | starseeker | 2012-03-21 18:38:26 -0500 (Wed, 21 Mar 2012) | 1 line

ws
------------------------------------------------------------------------
r49764 | starseeker | 2012-03-21 12:42:49 -0500 (Wed, 21 Mar 2012) | 1 line

update description
------------------------------------------------------------------------
r49763 | starseeker | 2012-03-21 12:20:24 -0500 (Wed, 21 Mar 2012) | 1 line

Rework handling of config.h files, with an eye towards hitting the disk less - seems to shave a couple seconds off the configure process on Linux.
------------------------------------------------------------------------
r49761 | starseeker | 2012-03-21 10:50:05 -0500 (Wed, 21 Mar 2012) | 1 line

Fix description of debug option - no longer conditional, we're using 'em all the time unless explicitly told not to.
------------------------------------------------------------------------
r49758 | starseeker | 2012-03-20 20:34:46 -0500 (Tue, 20 Mar 2012) | 1 line

Get the actual install process with multiconfig tools to use dev and rel install locations
------------------------------------------------------------------------
r49756 | starseeker | 2012-03-20 17:20:50 -0500 (Tue, 20 Mar 2012) | 1 line

We only want Debug and Release builds for BRL-CAD.  Always want Debug flags, even when doing optimized release builds, unless explicitly turned off.  Try and correct logic to reflect that - untested on multiconfig.
------------------------------------------------------------------------
r49755 | starseeker | 2012-03-20 14:35:13 -0500 (Tue, 20 Mar 2012) | 1 line

whoops - don't need 'Windows' in the exe name
------------------------------------------------------------------------
r49752 | starseeker | 2012-03-20 12:16:09 -0500 (Tue, 20 Mar 2012) | 1 line

Gah.  We were getting away with checking a series of hard-coded subpaths for the data subdirectory in bu_brlcad_data.  Have CMake tell us what the right value is via brlcad_config.h.  Leave the hard-coded paths as a fall-back.
------------------------------------------------------------------------
r49751 | starseeker | 2012-03-20 11:42:19 -0500 (Tue, 20 Mar 2012) | 1 line

Put documentation output in the doc subdirectory of the data directory
------------------------------------------------------------------------
r49750 | starseeker | 2012-03-20 10:13:31 -0500 (Tue, 20 Mar 2012) | 1 line

Nevermind the LoadMacros hack - just prevent the re2c/lemon macro definitions from being overwritten if they're already defined using Alexander Neundorf's tip from http://www.cmake.org/pipermail/cmake/2008-February/019776.html.  BRL-CAD defines 'em first, so the src/other copies won't get loaded (makes sure older versions of macro files that might linger in src/other don't stomp misc/CMake versions) but stand-alone builds will use the local copies.  Properly set up search ordering with CMAKE_MODULE_PATH should take care of this for the find_package commands, but the utility macros are separate and so must be handled differently.
------------------------------------------------------------------------
r49749 | starseeker | 2012-03-20 09:29:06 -0500 (Tue, 20 Mar 2012) | 1 line

use BRLCAD_CMAKE_DIR once it's defined
------------------------------------------------------------------------
r49748 | starseeker | 2012-03-19 20:42:30 -0500 (Mon, 19 Mar 2012) | 1 line

Install instructions at the end of builddelta need to be aware of what was used to build BRL-CAD - 'make install' won't do very much when you are using xcodebuild, for example.
------------------------------------------------------------------------
r49747 | starseeker | 2012-03-19 20:39:24 -0500 (Mon, 19 Mar 2012) | 1 line

Problem with MGED not being able to work with the version variable was due to brlcad_ident output containing the variable path - apparently Tcl didn't like the dollar-sign and curly brackets.  Seeing as that's also not the right path if someone does do an install, teach BRL-CAD how to get the actual path corresponding to a particular configuration in the case where the installation path is based on the build configuration.  Could have punted and required a fixed path for all configurations, but this lets make install tests for different configs proceed without stomping each other.
------------------------------------------------------------------------
r49744 | starseeker | 2012-03-19 16:23:49 -0500 (Mon, 19 Mar 2012) | 1 line

Hrm.  CMAKE_CFG_INTDIR doesn't work for the install command, apparently - http://www.cmake.org/Bug/view.php?id=5747 - start experimenting...
------------------------------------------------------------------------
r49743 | starseeker | 2012-03-19 12:34:08 -0500 (Mon, 19 Mar 2012) | 1 line

Don't want to change the configure script generated just because we're doing a multi-configuration build...
------------------------------------------------------------------------
r49739 | starseeker | 2012-03-18 19:40:14 -0500 (Sun, 18 Mar 2012) | 1 line

move the rest of the summary logic to BRLCAD_Summary.cmake, organize, clean-up, header and footer, etc.
------------------------------------------------------------------------
r49733 | starseeker | 2012-03-18 11:14:33 -0500 (Sun, 18 Mar 2012) | 1 line

Tweak optimization flag handling.
------------------------------------------------------------------------
r49719 | starseeker | 2012-03-16 14:02:46 -0500 (Fri, 16 Mar 2012) | 1 line

Make a stab at a compiler flags report that is multi-configuration aware.  Add line wrapping if we  have a lot of compiler flags.  Preliminary to moving all the summary logic to its own file.
------------------------------------------------------------------------
r49714 | starseeker | 2012-03-15 22:40:01 -0500 (Thu, 15 Mar 2012) | 1 line

make cfg pathsetting logic more compact
------------------------------------------------------------------------
r49713 | starseeker | 2012-03-15 20:00:38 -0500 (Thu, 15 Mar 2012) | 1 line

Watch out for a case where CMAKE_CFG_INTDIR is degenerate - in that case, 'fully qualified based on configuration name' is wrong.
------------------------------------------------------------------------
r49712 | starseeker | 2012-03-15 19:28:19 -0500 (Thu, 15 Mar 2012) | 1 line

Start cleaning up a little bit with respect to multi-configuration setups - still need to properly populate the Debug flags in the right configuration variables.
------------------------------------------------------------------------
r49708 | starseeker | 2012-03-15 09:49:54 -0500 (Thu, 15 Mar 2012) | 1 line

set the right name for the 64bit NSIS file.
------------------------------------------------------------------------
r49684 | starseeker | 2012-03-13 15:42:02 -0500 (Tue, 13 Mar 2012) | 1 line

Don't print a message about this every time - do it only when someone has tried to specify a preferences file
------------------------------------------------------------------------
r49673 | tbrowder2 | 2012-03-09 18:05:07 -0600 (Fri, 09 Mar 2012) | 1 line

make 'Found' message look similar to others
------------------------------------------------------------------------
r49663 | tbrowder2 | 2012-03-08 10:15:20 -0600 (Thu, 08 Mar 2012) | 1 line

allow user several options, including an environment variable BRLCAD_USER_GLOBAL_CONFIG_FILE=filename, to define default user preferences
------------------------------------------------------------------------
r49662 | tbrowder2 | 2012-03-08 07:58:48 -0600 (Thu, 08 Mar 2012) | 1 line

make it easier to see where the INSTALL file is being treated
------------------------------------------------------------------------
r49645 | brlcad | 2012-03-07 00:06:03 -0600 (Wed, 07 Mar 2012) | 1 line

overhaul the new CHECK_C_INLINE macro to fix a substantial bug (it wasn't actually testing different inline keywords...), but also to make it a much better macro citizen.  let the caller pass a variable in to get the inline value back, if any, no longer auto-adding to the global definitions.  support caching so we don't run the compile tests more than necessary.  finally, improve iteration and conditionals so we're more efficient and rename variables for clarity.
------------------------------------------------------------------------
r49642 | starseeker | 2012-03-06 21:57:25 -0600 (Tue, 06 Mar 2012) | 1 line

Put the output vars back as well - CMAKE_CFG_INTDIR isn't the answer for us.
------------------------------------------------------------------------
r49640 | starseeker | 2012-03-06 21:43:51 -0600 (Tue, 06 Mar 2012) | 1 line

Careful... can't use the variable path when we need specific paths.  May need to make some fixes to the variables being used to place files.
------------------------------------------------------------------------
r49639 | starseeker | 2012-03-06 21:36:20 -0600 (Tue, 06 Mar 2012) | 1 line

Might help to use the right variable name...
------------------------------------------------------------------------
r49635 | starseeker | 2012-03-06 17:09:34 -0600 (Tue, 06 Mar 2012) | 1 line

Give CFG_TYPE_INTDIR a try - recommended by David Cole:  http://www.cmake.org/pipermail/cmake/2012-March/049525.html
------------------------------------------------------------------------
r49623 | starseeker | 2012-03-06 13:25:47 -0600 (Tue, 06 Mar 2012) | 1 line

typo
------------------------------------------------------------------------
r49618 | starseeker | 2012-03-06 09:49:31 -0600 (Tue, 06 Mar 2012) | 1 line

We print this information when it is detected during configure - need to keep the summary brief
------------------------------------------------------------------------
r49615 | starseeker | 2012-03-05 20:21:58 -0600 (Mon, 05 Mar 2012) | 1 line

First stage in properly supporting multi-config build tools like MSVC and Xcode.  This doesn't get either the right C_FLAGS settings (that will require some macro modifications to CompileFlags and friends) or build settings (if you're oing to get build-time profiles, it probably makes sense to have those handle a few things) but it does seem to place most of the files correctly for Xcode building.  Almost certainly breaks the Windows build (yet again) as it's untested there.
------------------------------------------------------------------------
r49592 | tbrowder2 | 2012-03-03 12:50:10 -0600 (Sat, 03 Mar 2012) | 1 line

tweak to avoid dup message
------------------------------------------------------------------------
r49591 | tbrowder2 | 2012-03-03 12:02:28 -0600 (Sat, 03 Mar 2012) | 1 line

add a bit more info for pdf generation
------------------------------------------------------------------------
r49587 | starseeker | 2012-03-02 14:25:28 -0600 (Fri, 02 Mar 2012) | 1 line

Set RPM system arch.
------------------------------------------------------------------------
r49585 | starseeker | 2012-03-01 21:40:37 -0600 (Thu, 01 Mar 2012) | 1 line

don't mix case
------------------------------------------------------------------------
r49584 | starseeker | 2012-03-01 18:02:32 -0600 (Thu, 01 Mar 2012) | 1 line

fix endif
------------------------------------------------------------------------
r49561 | starseeker | 2012-02-26 23:34:17 -0600 (Sun, 26 Feb 2012) | 1 line

Copy/paste error, looks like...
------------------------------------------------------------------------
r49557 | tbrowder2 | 2012-02-26 21:15:56 -0600 (Sun, 26 Feb 2012) | 1 line

document more options
------------------------------------------------------------------------
r49555 | starseeker | 2012-02-26 18:33:00 -0600 (Sun, 26 Feb 2012) | 1 line

Tweaks to Apache fop env check, version message, DocBook options.
------------------------------------------------------------------------
r49553 | starseeker | 2012-02-26 17:59:21 -0600 (Sun, 26 Feb 2012) | 1 line

Add the change to the option documentation in CMakeLists.txt, rather than INSTALL - that part of the docs is autogenerated.
------------------------------------------------------------------------
r49551 | tbrowder2 | 2012-02-26 15:47:43 -0600 (Sun, 26 Feb 2012) | 1 line

add recognition of an APACHE_FOP env var to point to a user's fop; correct sense of cmake dependent option tests for pdf
------------------------------------------------------------------------
r49530 | brlcad | 2012-02-23 22:49:03 -0600 (Thu, 23 Feb 2012) | 1 line

call the new CHECK_C_INLINE macro for improved portability
------------------------------------------------------------------------
r49502 | starseeker | 2012-02-22 18:12:42 -0600 (Wed, 22 Feb 2012) | 1 line

Default RTSERVER to OFF until we figure out what to do about the zlib issue - if someone needs it on and the need to use a java compiled against an older zlib, they'll need to set -DBRLCAD_ZLIB=OFF and -DBRLCAD_ENABLE_RTSERVER=ON.
------------------------------------------------------------------------
r49495 | starseeker | 2012-02-22 13:40:06 -0600 (Wed, 22 Feb 2012) | 1 line

bite the bullet - we need to be able to specifiy additional directories in some cases when looking for headers, so add that ability to BRLCAD_INCLUDE_FILE.
------------------------------------------------------------------------
r49459 | starseeker | 2012-02-16 14:21:36 -0600 (Thu, 16 Feb 2012) | 1 line

Ah, right - turning on all the libs is now the responsibility of the macro defining the test, not hardcoding it.
------------------------------------------------------------------------
r49450 | starseeker | 2012-02-16 10:06:31 -0600 (Thu, 16 Feb 2012) | 1 line

Clean-up and polish - distcheck target can now be pointed to distcheck-full or distcheck-std per user arg, don't re-create targets if CREATE_DISTCHECK is called multiple times with the same name, ws, other minor tweaks.
------------------------------------------------------------------------
r49440 | starseeker | 2012-02-15 20:30:02 -0600 (Wed, 15 Feb 2012) | 1 line

Make a stab at cleaning up the distcheck logic a bit, or at least reducing the line count of the logic needed to define it...
------------------------------------------------------------------------
r49439 | starseeker | 2012-02-15 20:20:48 -0600 (Wed, 15 Feb 2012) | 1 line

Try making distcheck do both Debug and Release builds...
------------------------------------------------------------------------
r49261 | starseeker | 2012-02-06 15:15:28 -0600 (Mon, 06 Feb 2012) | 1 line

Don't squack about librtserver unless it was actually on to start with...
------------------------------------------------------------------------
r49240 | starseeker | 2012-02-04 12:28:53 -0600 (Sat, 04 Feb 2012) | 1 line

Turn on the distclean rule.  This should be a real distclean, working both in and out of the source directory.  Needs more testing.  Currently is only likely to work with systems using Makefiles
------------------------------------------------------------------------
r49220 | starseeker | 2012-02-03 16:08:39 -0600 (Fri, 03 Feb 2012) | 1 line

Getting closer - this leaves bin, lib and share in place but they should be nothing but a collection of empty directories for a bare configure.  Just need to teach distclean to check them for empty dirs and recursively remove any empty dirs until we've whittled it down to the minimum (for a pure configure with no build step on a clean checkout, back to the checkout configuration.)
------------------------------------------------------------------------
r49218 | starseeker | 2012-02-03 10:54:44 -0600 (Fri, 03 Feb 2012) | 1 line

Make a stab at logic to clean out all files generated by CMake.  This is currently a bit too aggressive in that it will completely nuke the bin, lib, and share output directories, but it's a step in the right direction and seems to be able to restore a checkout to clean status after an in-src-dir CMake configure (although that's only tested on one platform and isn't yet portable - assumes Makefiles, for example.)  Not hooked into the build proper yet - it generates a distclean.sh file in the toplevel build directory that can be run manually.
------------------------------------------------------------------------
r49205 | starseeker | 2012-02-02 16:00:34 -0600 (Thu, 02 Feb 2012) | 1 line

Try to be better about using misc/CMake .cmake files by default.  Tweak the listing of additional files to clean from lemon output.
------------------------------------------------------------------------
r49198 | brlcad | 2012-02-02 14:13:12 -0600 (Thu, 02 Feb 2012) | 1 line

use the CheckTypeSize module's CHECK_TYPE_SIZE() macro for explicitly evaluating the size of a pointer instead of assuming cmake will figure it out for us.  this takes care of the problems assuming 32-bit on a 64-bit platform when the size can be determined.  unclear how cmake (repeatedly) got into states where the CMAKE_SIZEOF_VOID_P ends up unset, but since it's a built-in test, likely just some bug internal to cmake.
------------------------------------------------------------------------
r49178 | starseeker | 2012-02-01 16:05:58 -0600 (Wed, 01 Feb 2012) | 1 line

We aren't currently using ExternalProject_Add, but add in a little more of what would be needed if we did add a use of that macro with a note on what else would be necessary.
------------------------------------------------------------------------
r49174 | starseeker | 2012-02-01 15:05:48 -0600 (Wed, 01 Feb 2012) | 1 line

typo?  don't see how custtarget is defined here
------------------------------------------------------------------------
r49166 | starseeker | 2012-02-01 10:40:38 -0600 (Wed, 01 Feb 2012) | 1 line

Add a few more links to RPATH handling docs
------------------------------------------------------------------------
r49152 | starseeker | 2012-01-31 11:54:27 -0600 (Tue, 31 Jan 2012) | 1 line

When doing a delta, start the clock closer to the beginning...  probably not terribly significant since most of the time is taken up in tests, but makes more sense if you're going looking for it in the code.
------------------------------------------------------------------------
r49144 | starseeker | 2012-01-30 15:02:05 -0600 (Mon, 30 Jan 2012) | 1 line

clean up indentation (thanks emacs mode)
------------------------------------------------------------------------
r49143 | starseeker | 2012-01-30 14:55:01 -0600 (Mon, 30 Jan 2012) | 1 line

stray upper->lower conversions
------------------------------------------------------------------------
r49133 | starseeker | 2012-01-27 20:54:59 -0600 (Fri, 27 Jan 2012) | 1 line

For now, take out the dll relocation - if someone wants to do testing or we put it back in 'live', all that should be needed is a reverse merge on this commit.  Until we're ready, leave Windows in a working state.
------------------------------------------------------------------------
r49132 | starseeker | 2012-01-27 14:43:16 -0600 (Fri, 27 Jan 2012) | 1 line

Looks like we need to set target properties for multiple configurations, in order to re-direct appropriately.
------------------------------------------------------------------------
r49119 | starseeker | 2012-01-26 16:28:08 -0600 (Thu, 26 Jan 2012) | 1 line

set version, THEN define DATA_DIR...
------------------------------------------------------------------------
r49118 | starseeker | 2012-01-26 16:19:13 -0600 (Thu, 26 Jan 2012) | 1 line

whoops, typo
------------------------------------------------------------------------
r49116 | starseeker | 2012-01-26 16:18:06 -0600 (Thu, 26 Jan 2012) | 1 line

Here we go... set RUNTIME_OUTPUT_DIRECTORY to LIB_DIR - DLLs should now end up on lib on Windows.  This will probably break stuff.  Also make better use of BIN_DIR and LIB_DIR in the toplevel file...
------------------------------------------------------------------------
r49114 | starseeker | 2012-01-26 16:01:18 -0600 (Thu, 26 Jan 2012) | 1 line

Same deal with the cfg_type case
------------------------------------------------------------------------
r49113 | starseeker | 2012-01-26 16:00:06 -0600 (Thu, 26 Jan 2012) | 1 line

Misunderstood what CMAKE_LIBRARY_OUTPUT_DIRECTORY controls...
------------------------------------------------------------------------
r49034 | brlcad | 2012-01-24 10:10:57 -0600 (Tue, 24 Jan 2012) | 1 line

try another approach, test for windows.h bahamamama instead of the subling mmsystem.h since it should also get use QueryPerformanceCounter()
------------------------------------------------------------------------
r49033 | brlcad | 2012-01-24 10:09:05 -0600 (Tue, 24 Jan 2012) | 1 line

looks like regex gone wild?  s/BRLCAD_INCLUDE_file/BRLCAD_INCLUDE_FILE/g
------------------------------------------------------------------------
r49011 | starseeker | 2012-01-23 22:38:43 -0600 (Mon, 23 Jan 2012) | 1 line

few more upper->lower conversions
------------------------------------------------------------------------
r49009 | starseeker | 2012-01-23 22:14:04 -0600 (Mon, 23 Jan 2012) | 2 lines

Take a stab at the CMakeLists.txt files (probably not complete)

------------------------------------------------------------------------
r49003 | starseeker | 2012-01-23 19:45:53 -0600 (Mon, 23 Jan 2012) | 1 line

obsolete comment
------------------------------------------------------------------------
r48995 | starseeker | 2012-01-23 14:53:28 -0600 (Mon, 23 Jan 2012) | 1 line

Make a stab at fixing indenting in toplevel CMakeLists.txt file
------------------------------------------------------------------------
r48971 | starseeker | 2012-01-23 09:46:39 -0600 (Mon, 23 Jan 2012) | 1 line

Alter BRLCAD_INCLUDE_FILE to support optionally supplying a list of headers, instead of just one.
------------------------------------------------------------------------
r48946 | erikgreenwald | 2012-01-20 15:44:42 -0600 (Fri, 20 Jan 2012) | 2 lines

Bump requried CMake version to 2.8.4. osX couldn't find dependancies (namely xsl-expand while building docbook articles) even though the dep worked as a target on 2.8.3.

------------------------------------------------------------------------
r48942 | brlcad | 2012-01-20 12:19:32 -0600 (Fri, 20 Jan 2012) | 1 line

didn't get the commit e-mail, and missed the new BRLCAD_INCLUDE_FILE_WINDOWS() macro.  looks like BRLCAD_INCLUDE_FILE does just pass it though, so the windows-specific macro shouldn't be needed.  awaiting windows build verification.
------------------------------------------------------------------------
r48941 | brlcad | 2012-01-20 12:02:19 -0600 (Fri, 20 Jan 2012) | 1 line

looks like cmake has a mechanism for checking headers that require other headers (at least CHECK_INCLUDE_FILES() does).  list them before the header, separated with semicolons.  should fix the issue prompted by r48886.
------------------------------------------------------------------------
r48911 | d_rossberg | 2012-01-19 07:59:53 -0600 (Thu, 19 Jan 2012) | 3 lines

added an include file check for MS Windows includes (they require windows.h to be included before)
- reverted changes in revision 48886
- used the new check for mmsystem.h
------------------------------------------------------------------------
r48896 | n_reed | 2012-01-18 15:01:48 -0600 (Wed, 18 Jan 2012) | 2 lines

Add bu_sscanf and bu_vsscanf routines and associated test program. Just wrappers for now; won't build without C99 vsscanf routine.

------------------------------------------------------------------------
r48890 | erikgreenwald | 2012-01-17 15:18:41 -0600 (Tue, 17 Jan 2012) | 1 line

Enter the Dragon. Welcome, 2012!
------------------------------------------------------------------------
r48461 | brlcad | 2012-01-11 18:32:14 -0600 (Wed, 11 Jan 2012) | 1 line

test for the mmsystem.h windows header so we can conditionalize on feature instead of platform.
------------------------------------------------------------------------
r48200 | starseeker | 2012-01-08 16:47:45 -0600 (Sun, 08 Jan 2012) | 1 line

Document where the hint on configuration path setting came from and why we need it.
------------------------------------------------------------------------
r48162 | starseeker | 2011-12-22 22:18:14 -0600 (Thu, 22 Dec 2011) | 1 line

go for consistency
------------------------------------------------------------------------
r48155 | starseeker | 2011-12-22 16:07:03 -0600 (Thu, 22 Dec 2011) | 1 line

Oops - put the DATA_DIR prefix in the MAN_DIR variable
------------------------------------------------------------------------
r48100 | starseeker | 2011-12-21 00:31:49 -0600 (Wed, 21 Dec 2011) | 1 line

Disable opengl like we mean it if the required criteria aren't met
------------------------------------------------------------------------
r48099 | starseeker | 2011-12-21 00:07:26 -0600 (Wed, 21 Dec 2011) | 1 line

These tweaks get things building without X11 headers on Gentoo linux...
------------------------------------------------------------------------
r48071 | starseeker | 2011-12-19 20:15:41 -0600 (Mon, 19 Dec 2011) | 1 line

Woo hoo!  autogenerate the guts of the configure rosetta script right along with the docs.
------------------------------------------------------------------------
r48036 | starseeker | 2011-12-18 11:16:59 -0600 (Sun, 18 Dec 2011) | 1 line

Swap in the new Tcl macro system.  Needs debugging, but this will hopefully be a more organized framework within which to find the bugs.  Also added one additional feature to the summary - if a component is disabled that is to be reported in the summary, and a system version was NOT found, put an exclamation point after the OFF to indicate potential trouble.
------------------------------------------------------------------------
r48016 | starseeker | 2011-12-16 00:11:56 -0600 (Fri, 16 Dec 2011) | 1 line

Do more work to make BRLCAD_BUNDLED_LIBS=System do what it claims to do.  Also make Tcl packages respect it, unless BRLCAD_TCL is overridden locally - then respect the local Tcl setting rather than BUNDLED_LIBS.  Still needs some testing - not a terribly useful setting for us, but the Linux distributions will probably want it so we should shake it out and make it behave.
------------------------------------------------------------------------
r48011 | starseeker | 2011-12-15 20:13:20 -0600 (Thu, 15 Dec 2011) | 1 line

Move the CMake versions of doc files into place.
------------------------------------------------------------------------
r48006 | starseeker | 2011-12-15 18:08:44 -0600 (Thu, 15 Dec 2011) | 1 line

Need to do the 32/64 bit check earlier in the game, before we try to find anything at all.
------------------------------------------------------------------------
r48004 | starseeker | 2011-12-15 16:50:24 -0600 (Thu, 15 Dec 2011) | 1 line

Print the summary unless told not to - let a parent build turn it off if it doesn't want it, but the default is on.
------------------------------------------------------------------------
r48001 | starseeker | 2011-12-15 15:05:37 -0600 (Thu, 15 Dec 2011) | 1 line

And now, the final piece of the configuration options documentation.  Automatically update the INSTALL file (currently pulling INSTALL.cmake, but that will change later) with changes in BRL-CAD options and aliases.  In keeping with the principle of not touching the source directory the original INSTALL file is not altered - instead, a new file is generated (INSTALL.new) and a warning is printed at the end of the configure process notifying the developer of the changed file.  It is then up to the develper to review the new INSTALL.new and copy it manually into the source tree.  The major benefit of this method is the autogeneration of the alias lists - the same lists used by the logic actually defining the aliases in CMake are also used to generate the docs.
------------------------------------------------------------------------
r47972 | starseeker | 2011-12-14 17:29:06 -0600 (Wed, 14 Dec 2011) | 1 line

Do some more option macro reworking.
------------------------------------------------------------------------
r47970 | starseeker | 2011-12-14 17:10:44 -0600 (Wed, 14 Dec 2011) | 1 line

Split the option macros into their own file - BRLCAD_Util is too long.  Need to organize better.
------------------------------------------------------------------------
r47968 | starseeker | 2011-12-14 17:03:10 -0600 (Wed, 14 Dec 2011) | 1 line

There's no particular reason the subbuild logic or distcheck macros need to be BRL-CAD specific.
------------------------------------------------------------------------
r47967 | starseeker | 2011-12-14 16:59:12 -0600 (Wed, 14 Dec 2011) | 1 line

Group distcheck file ignoring macros, fix a couple distcheck items.
------------------------------------------------------------------------
r47942 | starseeker | 2011-12-14 11:53:47 -0600 (Wed, 14 Dec 2011) | 1 line

Comment tweaks
------------------------------------------------------------------------
r47931 | starseeker | 2011-12-13 21:08:32 -0600 (Tue, 13 Dec 2011) | 1 line

Make a stab at adding an xml validation step to the build.  Looks like xml/xslt upgrades are needed, and even then the results are... a little confusing.
------------------------------------------------------------------------
r47902 | starseeker | 2011-12-09 17:05:59 -0600 (Fri, 09 Dec 2011) | 1 line

add spacer
------------------------------------------------------------------------
r47895 | starseeker | 2011-12-09 15:05:26 -0600 (Fri, 09 Dec 2011) | 1 line

Add some more options to the Docbook building, and improve reporting for Itcl/Itk building.
------------------------------------------------------------------------
r47886 | starseeker | 2011-12-08 20:01:06 -0600 (Thu, 08 Dec 2011) | 1 line

Slightly alter the pdf options logic, to avoid unexpected behavior.  By default, when enabling PDF building, ALL pdfs are now built.  The PDF_MAN option still appears after PDF is enabled, but it defaults to on rather than off to avoid surprises - avoids the 'why didn't the man page pdfs get built even though I enabled pdf?' question.
------------------------------------------------------------------------
r47829 | starseeker | 2011-12-06 22:00:07 -0600 (Tue, 06 Dec 2011) | 1 line

Coming very close to building xsltproc cross-platform for guaranteed docbook->html documentation generation.  Only known problem is on Windows, and that seems to be primarily related to the new catalog usage with the advanced Docbook formatting (to the best of my knowledge, the new Docbook formatting logic has never been tested on Windows before.)  Setting environment variables in the CMake COMMAND lines didn't go over well on Windows, so have shifted to a new approach - for each docbook target, write a small CMake script that contains all the proper environment variable foo and commands for that target.  Then the custom command, rather than defining and running the command, calls  -P to execute the script file.  That approach *does* seem to do the right thing on Windows, besides having the nifty side effect of making Docbook build debugging simpler by having a fully expanded build command immediately available.  Last step is to figure out what the right voodo is for Windows - the path rewrite logic isn't doing something right with the windows paths, may need to dig into how that's being done and whether there are build flags for Windows path handling in the xml code...
------------------------------------------------------------------------
r47782 | starseeker | 2011-12-05 19:45:25 -0600 (Mon, 05 Dec 2011) | 1 line

Nevermind - we have a different variable, so don't emulate the old system for 64 bit.
------------------------------------------------------------------------
r47781 | starseeker | 2011-12-05 17:53:59 -0600 (Mon, 05 Dec 2011) | 1 line

Add docs for 32/64 bit BRLCAD_WORD_SIZE
------------------------------------------------------------------------
r47778 | starseeker | 2011-12-05 17:28:01 -0600 (Mon, 05 Dec 2011) | 1 line

Add some aliases for the strict flags.
------------------------------------------------------------------------
r47754 | starseeker | 2011-12-01 19:33:59 -0600 (Thu, 01 Dec 2011) | 1 line

Handle setting of default option in BRLCAD_OPTION
------------------------------------------------------------------------
r47741 | starseeker | 2011-12-01 16:12:43 -0600 (Thu, 01 Dec 2011) | 1 line

Nevermind the BRLCAD_ prefix on the aliases - if we need that it can be automated at the macro level
------------------------------------------------------------------------
r47740 | starseeker | 2011-12-01 16:09:42 -0600 (Thu, 01 Dec 2011) | 1 line

Add a second 'BRLCAD_OPTION' to test the setup.  Need to think about how to handle this for third party cases - may need an option to go with either BRLCAD_OPTION or just a regular option.
------------------------------------------------------------------------
r47735 | starseeker | 2011-12-01 15:45:55 -0600 (Thu, 01 Dec 2011) | 1 line

Tweak the BRLCAD_OPTION macro - try for supporting DISABLE_ forms of ENABLE_ vars
------------------------------------------------------------------------
r47706 | starseeker | 2011-11-29 18:53:34 -0600 (Tue, 29 Nov 2011) | 1 line

with any luck, we don't need to separately call out tcl and tk build deps...
------------------------------------------------------------------------
r47689 | starseeker | 2011-11-29 13:34:33 -0600 (Tue, 29 Nov 2011) | 1 line

Clean up the OSX framework detection
------------------------------------------------------------------------
r47682 | starseeker | 2011-11-29 11:22:24 -0600 (Tue, 29 Nov 2011) | 1 line

Do a little more to disable librtserver - may have to eventually do an actual compile test on this, but hopefully this will avoid some issues.
------------------------------------------------------------------------
r47654 | starseeker | 2011-11-24 20:05:11 -0600 (Thu, 24 Nov 2011) | 1 line

not using the contents of the VARIABLES setting - remove this macro and calls
------------------------------------------------------------------------
r47653 | starseeker | 2011-11-24 20:01:54 -0600 (Thu, 24 Nov 2011) | 1 line

Move macro out of toplevel CMakeLists.txt file
------------------------------------------------------------------------
r47613 | brlcad | 2011-11-23 12:14:03 -0600 (Wed, 23 Nov 2011) | 1 line

similar, relax string comparisons.  makes the unknown value test a little more robust
------------------------------------------------------------------------
r47603 | starseeker | 2011-11-22 15:05:51 -0600 (Tue, 22 Nov 2011) | 1 line

Start preparing to use some kind of test for the declspec import/export flags - sub in a variable instead of MSVC platform conditional.
------------------------------------------------------------------------
r47595 | starseeker | 2011-11-22 12:26:16 -0600 (Tue, 22 Nov 2011) | 1 line

Ah - the '-' to '_' conversion ended up with BRLCAD_BUNDLED_LIBS being listed in its own alias list.  That exposes two problems - one it doesn't need to list itself as an alias, and two the macro shouldn't be treating it as an alias when it's the actual variable (Bad Things happen.)
------------------------------------------------------------------------
r47564 | brlcad | 2011-11-18 16:29:59 -0600 (Fri, 18 Nov 2011) | 1 line

rename all of the BRLCAD- cmake variables to BRLCAD_ so we can consistently only use underscores everywhere.  should help improve simplicity of docs and use.
------------------------------------------------------------------------
r47560 | brlcad | 2011-11-18 15:25:05 -0600 (Fri, 18 Nov 2011) | 1 line

rename BRLCAD-CPU_TYPE and CMAKE_CPU_TYPE to BRLCAD-WORD_SIZE and CMAKE_WORD_SIZE respectively so as not to imply chip type or architecture.  CPU may be multimode as could the compiler, so it's not a good moniker.  also consistently use either ##BIT or ##-bit styles when referring to the size in text.
------------------------------------------------------------------------
r47550 | starseeker | 2011-11-17 21:18:53 -0600 (Thu, 17 Nov 2011) | 1 line

Hmm, that one is easier to change than I thought.  Static libs, not the whole thing static
------------------------------------------------------------------------
r47549 | starseeker | 2011-11-17 21:16:49 -0600 (Thu, 17 Nov 2011) | 1 line

Fix some of the stray variables that should be advanced
------------------------------------------------------------------------
r47548 | starseeker | 2011-11-17 21:06:06 -0600 (Thu, 17 Nov 2011) | 1 line

Wait - not handling things quite right with the macro.  FORCE shouldn't be needed for that var in the GLOBAL file.
------------------------------------------------------------------------
r47547 | starseeker | 2011-11-17 20:57:46 -0600 (Thu, 17 Nov 2011) | 1 line

correct global example
------------------------------------------------------------------------
r47545 | starseeker | 2011-11-17 20:49:20 -0600 (Thu, 17 Nov 2011) | 1 line

Proof-of-concept implementation of a BRLCAD_OPTION macro that supports aliases for an option and appends documentation to a txt file.
------------------------------------------------------------------------
r47543 | starseeker | 2011-11-17 19:23:32 -0600 (Thu, 17 Nov 2011) | 1 line

Be more informative about what's going on with the CPU type, too
------------------------------------------------------------------------
r47405 | starseeker | 2011-11-02 16:39:45 -0500 (Wed, 02 Nov 2011) | 1 line

Try a cute trick - override the message command to enhance logging. CMakeFiles/CMakeOutput.log should now have almost all messages from the cmake configure process - possible exceptions are those written out without using the MESSAGE command.  Also make a stab at accepting ON and OFF for the AUTO/BUNDLED/SYSTEM vars
------------------------------------------------------------------------
r47398 | starseeker | 2011-11-02 14:47:16 -0500 (Wed, 02 Nov 2011) | 1 line

Tweak the OpenGL find routines to care more if the headers are found.
------------------------------------------------------------------------
r47373 | brlcad | 2011-10-31 00:02:33 -0500 (Mon, 31 Oct 2011) | 1 line

match the original autotools logic, detect all the way back to 8-bit architectures so we might have a prayer's chance of working out of the box on an embedded platform.
------------------------------------------------------------------------
r46984 | d_rossberg | 2011-09-29 09:04:37 -0500 (Thu, 29 Sep 2011) | 2 lines

the current setting of compiler flags does not work for the MSVC compiler, it results in a broken build
(The CMake standard for MSVC is linking with the C-runtime-DLL, which is OK.  The ridiculous gcc flags force MSVC to use its own standards: Linking every DLL statically with a separate C-runtime.)
------------------------------------------------------------------------
r46950 | starseeker | 2011-09-28 09:29:01 -0500 (Wed, 28 Sep 2011) | 1 line

Figure out what Apache FOP version we've got.
------------------------------------------------------------------------
r46915 | brlcad | 2011-09-26 17:32:05 -0500 (Mon, 26 Sep 2011) | 1 line

remove trailing ws
------------------------------------------------------------------------
r46751 | starseeker | 2011-09-16 15:31:20 -0500 (Fri, 16 Sep 2011) | 1 line

match closing tag
------------------------------------------------------------------------
r46750 | starseeker | 2011-09-16 15:29:40 -0500 (Fri, 16 Sep 2011) | 1 line

My mistake, we're not setting CMAKE_INSTALL_PREFIX to BRLCAD_ROOT. Tweak the logic and warnings accordingly
------------------------------------------------------------------------
r46749 | starseeker | 2011-09-16 15:22:38 -0500 (Fri, 16 Sep 2011) | 1 line

Make warnings noiser, also complain about BRLCAD_DATA
------------------------------------------------------------------------
r46745 | starseeker | 2011-09-16 15:09:59 -0500 (Fri, 16 Sep 2011) | 1 line

comment first, then code
------------------------------------------------------------------------
r46744 | starseeker | 2011-09-16 15:04:15 -0500 (Fri, 16 Sep 2011) | 1 line

/usr is bad whether or not it came from BRLCAD_ROOT, adjust warning.
------------------------------------------------------------------------
r46743 | starseeker | 2011-09-16 14:58:48 -0500 (Fri, 16 Sep 2011) | 1 line

Get a version of the warnings about BRLCAD_ROOT into CMake, as well as (reluctantly) using the environment variable if it's defined.
------------------------------------------------------------------------
r46730 | d_rossberg | 2011-09-16 09:20:57 -0500 (Fri, 16 Sep 2011) | 2 lines

a non visible function prototype yields a warning "warning C4013: 'hypot' undefined; assuming extern returning int" => turned the warnings into errors
a possible consequence of missing prototypes is a floating point stack overflow (as it happened in this case)
------------------------------------------------------------------------
r46721 | starseeker | 2011-09-15 16:36:26 -0500 (Thu, 15 Sep 2011) | 1 line

Make a stab at ignoring files fed to configure_file as well.  Build directory ignoring won't work with that particular setting using current set-up, needs a re-think.
------------------------------------------------------------------------
r46720 | starseeker | 2011-09-15 15:19:36 -0500 (Thu, 15 Sep 2011) | 1 line

back to configuring a message, but this time have it actually say something based on whether the tarballs are good or not.
------------------------------------------------------------------------
r46703 | starseeker | 2011-09-14 16:32:07 -0500 (Wed, 14 Sep 2011) | 1 line

completed distcheck does not necessarily imply distribution ready files, so don't assert that.  No need for distcheck message file, and not using the old svncheck anymore.
------------------------------------------------------------------------
r46702 | starseeker | 2011-09-14 16:24:33 -0500 (Wed, 14 Sep 2011) | 1 line

try searching for cpack rather than hardcoding it.
------------------------------------------------------------------------
r46701 | starseeker | 2011-09-14 16:21:15 -0500 (Wed, 14 Sep 2011) | 1 line

Fix numbers on distcheck stages.
------------------------------------------------------------------------
r46700 | starseeker | 2011-09-14 16:11:59 -0500 (Wed, 14 Sep 2011) | 1 line

Hmm.  $(MAKE) isn't working as expected in EXECUTE_PROCESS - revert the one file solution.
------------------------------------------------------------------------
r46699 | starseeker | 2011-09-14 15:45:20 -0500 (Wed, 14 Sep 2011) | 1 line

Make a stab at consolidation of all distcheck logic into one file.
------------------------------------------------------------------------
r46698 | starseeker | 2011-09-14 14:18:03 -0500 (Wed, 14 Sep 2011) | 1 line

fix if location
------------------------------------------------------------------------
r46697 | starseeker | 2011-09-14 14:13:20 -0500 (Wed, 14 Sep 2011) | 1 line

Be sure we don't do anything in the case where the build and the source directories are the same directory - unless I'm missing some CPack option or feature (possible) that case is just not going to mix well with CPack's approach to archive creation.
------------------------------------------------------------------------
r46694 | starseeker | 2011-09-14 13:52:15 -0500 (Wed, 14 Sep 2011) | 1 line

Deduce the in-source build directory rather than hardcode one devs typical defaults.  Have the distcheck routine use the variable as well to clean up its output.  Looks like this is helpful, but not clear yet if it is a full solution.
------------------------------------------------------------------------
r46684 | starseeker | 2011-09-14 08:17:23 -0500 (Wed, 14 Sep 2011) | 1 line

Variety of distcheck fixes, including a nifty problem where a directory named 'off' was causing a logic failure in the path building logic.  dist files are now actual cmake files that are included - this allows CMake to re-run after one is edited, which is the correct behavior.  directories that are specified (as opposed to recognized as parents of files specfied) use svn info to build the list of files below the ignored directory, which means temporary files should be successfully ignored by CPack even when the directory in question is ignored 'in totality' - needs testing.  Need to set up fallback logic for a non-svn based situation, but the core routines are now successful.  dist file contents have been updated to be more complete.
------------------------------------------------------------------------
r46682 | starseeker | 2011-09-14 07:00:32 -0500 (Wed, 14 Sep 2011) | 1 line

fix paths that are appended to cmakefiles.cmake and cmakedirs.cmake
------------------------------------------------------------------------
r46680 | starseeker | 2011-09-13 20:23:54 -0500 (Tue, 13 Sep 2011) | 1 line

More distcheck progress, although there's still at least one bug to iron out.
------------------------------------------------------------------------
r46665 | starseeker | 2011-09-12 22:11:10 -0500 (Mon, 12 Sep 2011) | 1 line

Closing in on svn-ified distcheck for CMake, if performance issues can be addressed.
------------------------------------------------------------------------
r46662 | starseeker | 2011-09-12 13:19:24 -0500 (Mon, 12 Sep 2011) | 1 line

Still experimental, but make a stab at being able to enable/disable fink and macports on Macs.
------------------------------------------------------------------------
r46644 | starseeker | 2011-09-09 15:05:47 -0500 (Fri, 09 Sep 2011) | 1 line

turn back on the repo checks.  distcheck will need to become its own CMake file I think - this is getting too complex for one custom target.
------------------------------------------------------------------------
r46638 | starseeker | 2011-09-09 11:33:48 -0500 (Fri, 09 Sep 2011) | 1 line

Try a recommendation from Dave Cole of CMake - this is (more or less) what they do in their ExternalProject code to handle subbuilding
------------------------------------------------------------------------
r46631 | starseeker | 2011-09-09 10:37:52 -0500 (Fri, 09 Sep 2011) | 1 line

Make the depends explicit for these initial commands - looks like ninja actually caught one out.
------------------------------------------------------------------------
r46624 | starseeker | 2011-09-08 23:11:26 -0500 (Thu, 08 Sep 2011) | 1 line

Echo some messages to identify various stages of distcheck.
------------------------------------------------------------------------
r46620 | starseeker | 2011-09-08 19:03:41 -0500 (Thu, 08 Sep 2011) | 1 line

Yay! RFC2822-ify the DATE stamp code, and go with Sean's idea of linking the DATE regeneration to the COUNT regeneration.
------------------------------------------------------------------------
r46619 | starseeker | 2011-09-08 18:25:34 -0500 (Thu, 08 Sep 2011) | 1 line

copy/paste strikes again
------------------------------------------------------------------------
r46618 | starseeker | 2011-09-08 18:20:45 -0500 (Thu, 08 Sep 2011) | 1 line

Silly developer. If detecting config changes, need the copy_if_diff code again
------------------------------------------------------------------------
r46617 | starseeker | 2011-09-08 17:45:27 -0500 (Thu, 08 Sep 2011) | 1 line

Make a serious stab at incrementing the COUNT variable only when the configuration actually changes.  For the moment, this is accomplished by reading the old CMakeCache.txt file (stashed at the beginning of the second cmake run) and comparing values found there to values in the current CMake enviornment.  It's not perfect in that new variables in the working environment won't trigger the COUNT increase, but for most reconfiguration situations something will be changed and trigger COUNT so this may be workable.  Cache diffing routine needs more hammering.  Various tweaks to the CMake logic to try and keep things consistent between runs.
------------------------------------------------------------------------
r46616 | starseeker | 2011-09-08 15:17:32 -0500 (Thu, 08 Sep 2011) | 1 line

copy_if_different logic is useless for COUNT, so remove it
------------------------------------------------------------------------
r46615 | starseeker | 2011-09-08 15:06:55 -0500 (Thu, 08 Sep 2011) | 1 line

Sean wants this COUNT to be independent of build type
------------------------------------------------------------------------
r46613 | starseeker | 2011-09-08 14:05:53 -0500 (Thu, 08 Sep 2011) | 1 line

Take some steps to mitigate the 'relink everything every cmake run' issue.  Use the build types to decide whether we want to increment COUNT - only do so when we're doing a build configuration other than Debug, since it's those cases where we might be concerned how many times CMake has been run.  Also change the way we're getting the timestamp (DATE) in Debug configurations - old method gave the to-the-second ascii string conversion that's standard in C.  For Debug cases, generate our own that only goes down to per-day granularity, so the DATE file doesn't change every CMake run.  These two changes (and some copy_if_different logic for these and other include/conf files) allow a complete cmake re-run without triggering any relinking in Debug mode.
------------------------------------------------------------------------
r46567 | starseeker | 2011-09-05 00:28:40 -0500 (Mon, 05 Sep 2011) | 1 line

Apparently a default VC 2010 Express install doesn't have all the redistributable dlls CMake is looking for - do as CMake does, suppress the (rather verbose) messages.  This may need more investigation, not clear if a valid NSIS installer can be made as-is.
------------------------------------------------------------------------
r46566 | starseeker | 2011-09-04 15:50:54 -0500 (Sun, 04 Sep 2011) | 1 line

Ah, right - using cfg in the path messes with the file placements we need to run in build dir.
------------------------------------------------------------------------
r46557 | starseeker | 2011-09-02 11:54:24 -0500 (Fri, 02 Sep 2011) | 1 line

Get a bit fancier with the package name and version for RPMs - commented out by default, but available if desired.
------------------------------------------------------------------------
r46552 | d_rossberg | 2011-09-02 07:59:20 -0500 (Fri, 02 Sep 2011) | 2 lines

WIN32 is an add_executable() flag => sort it out from the source file names too
because it's a CMake variable it has to be prefixed by a "x" e.g.
------------------------------------------------------------------------
r46551 | erikgreenwald | 2011-09-02 05:55:40 -0500 (Fri, 02 Sep 2011) | 2 lines

Remove -j20. Parallel builds should be at the builders explicit request to avoid accidentally hammering the machine.

------------------------------------------------------------------------
r46550 | starseeker | 2011-09-01 21:43:07 -0500 (Thu, 01 Sep 2011) | 1 line

Do for other files what we do for .dist - fatal error if we're trying to ignore something that doesn't exist, unless it's a generated file (which will specify itself in a src list with a full path, and thus can be recognized.)  Actually caught a number of bugs in the CMake logic, which are also fixed in this commit.
------------------------------------------------------------------------
r46548 | starseeker | 2011-09-01 17:49:50 -0500 (Thu, 01 Sep 2011) | 1 line

use all the CPUs we can - go with 20 as a good number given current systems (2011)
------------------------------------------------------------------------
r46547 | starseeker | 2011-09-01 17:46:05 -0500 (Thu, 01 Sep 2011) | 1 line

Improve handling of newlines for system conf files
------------------------------------------------------------------------
r46540 | brlcad | 2011-09-01 14:05:53 -0500 (Thu, 01 Sep 2011) | 1 line

distinguish compilation of 3rd party sources from our own build settings with different labels.  Use 'Compile' instead of 'Build' since that helps disambiguate what the ON/OFF means (i.e., action not feature).
------------------------------------------------------------------------
r46516 | starseeker | 2011-08-31 16:55:52 -0500 (Wed, 31 Aug 2011) | 1 line

Try again - take a hit from kicad and use check_symbol_exists this time, let's see how that does
------------------------------------------------------------------------
r46513 | starseeker | 2011-08-31 16:30:32 -0500 (Wed, 31 Aug 2011) | 1 line

utter failure - cannot confirm hypot is present as a function, always get unresolved errors even when I manually feed it msvcrt.  revert for now
------------------------------------------------------------------------
r46512 | starseeker | 2011-08-31 15:50:10 -0500 (Wed, 31 Aug 2011) | 1 line

try required libs and check_function_exists
------------------------------------------------------------------------
r46511 | starseeker | 2011-08-31 15:40:53 -0500 (Wed, 31 Aug 2011) | 1 line

give this a hypot test a shot... don't know if it will work, untested
------------------------------------------------------------------------
r46510 | starseeker | 2011-08-31 15:38:49 -0500 (Wed, 31 Aug 2011) | 1 line

Start working on how to test for hypot on Windows - most of the warning messages we're getting in MSVC seem to relate to redefining that function in config_win (I think)...
------------------------------------------------------------------------
r46509 | starseeker | 2011-08-31 15:08:18 -0500 (Wed, 31 Aug 2011) | 1 line

X11 is an advanced option under Windows, mark it as such.
------------------------------------------------------------------------
r46497 | starseeker | 2011-08-30 23:50:10 -0500 (Tue, 30 Aug 2011) | 1 line

Revert 46496 until more work can be done on it - leave trunk in a working state.  Main point was to checkpoint, and revision history now has work done so far.
------------------------------------------------------------------------
r46496 | starseeker | 2011-08-30 23:35:00 -0500 (Tue, 30 Aug 2011) | 1 line

Took a stab at using http://www.projectpluto.com/win32a.htm (WIN32 native curses) to get the terminal code working on Windows, but so far falling way short of success.  The termio_win32.c file doesn't seem to have much in the way of contents, and termio.c doesn't want to build on windows (among other errors, getting illegal indirection errors associated with copyTio).  Even when using termio_win32.c, MSVC doesn't want to generate a .lib file.  The pdcurses demo apps do function, so as far as that goes it does work - just not clear how the BRL-CAD code maps to it.
------------------------------------------------------------------------
r46495 | starseeker | 2011-08-30 20:27:57 -0500 (Tue, 30 Aug 2011) | 1 line

Explain the DEBUG header definition a little more thoroughly.
------------------------------------------------------------------------
r46482 | starseeker | 2011-08-30 13:10:57 -0500 (Tue, 30 Aug 2011) | 1 line

Ah, right - we include tcl headers, so we define STDC_HEADERS for them.  Document that.
------------------------------------------------------------------------
r46476 | starseeker | 2011-08-30 00:03:12 -0500 (Tue, 30 Aug 2011) | 1 line

don't need the math expression anymore
------------------------------------------------------------------------
r46475 | starseeker | 2011-08-29 23:50:43 -0500 (Mon, 29 Aug 2011) | 1 line

I suppose the date/timestamp code failing to generate a date should be fatal - that has to be fixed if it breaks.
------------------------------------------------------------------------
r46474 | starseeker | 2011-08-29 23:47:50 -0500 (Mon, 29 Aug 2011) | 1 line

more rewording
------------------------------------------------------------------------
r46473 | starseeker | 2011-08-29 23:42:10 -0500 (Mon, 29 Aug 2011) | 1 line

typo, wording tweak
------------------------------------------------------------------------
r46472 | brlcad | 2011-08-29 23:38:06 -0500 (Mon, 29 Aug 2011) | 1 line

checking order changed.  update docs.  need to check compiler characteristics earlier within cmake so that flags are set properly.  remember there was a specific reason for delaying the compiler testing until after headers/libs/types with the autotools build but don't remember what that reason was any longer (and it's not documented) so go with the flow -- makes more sense to test the compiler flags earlier anyways.
------------------------------------------------------------------------
r46471 | starseeker | 2011-08-29 23:34:37 -0500 (Mon, 29 Aug 2011) | 1 line

Hmm... it might be that platforms with multiple CFG types shouldn't share the same output directories... try this.
------------------------------------------------------------------------
r46470 | starseeker | 2011-08-29 23:20:19 -0500 (Mon, 29 Aug 2011) | 1 line

nevermind about STDC_HEADERS - we don't really need it, only tcl/tk really use it so let them deal with it.
------------------------------------------------------------------------
r46463 | brlcad | 2011-08-29 22:18:18 -0500 (Mon, 29 Aug 2011) | 1 line

arguable whether testing libc supports %z as a print width specifier is a compiler characteristic or type testing but go with the latter.  add the (new and untested) BRLCAD_CHECK_C99_FORMAT_SPECIFIERS macro so we can toggle code logic based on HAVE_C99_FORMAT_SPECIFIERS
------------------------------------------------------------------------
r46460 | brlcad | 2011-08-29 21:56:58 -0500 (Mon, 29 Aug 2011) | 1 line

might help to actually test for size_t  :)
------------------------------------------------------------------------
r46456 | starseeker | 2011-08-29 13:56:32 -0500 (Mon, 29 Aug 2011) | 1 line

Make _FORTIFY_SOURCE a config.h define instead of a compile flag check.
------------------------------------------------------------------------
r46434 | starseeker | 2011-08-25 22:42:50 -0500 (Thu, 25 Aug 2011) | 1 line

Fix comment - we aren't interested in setting for debug on Windows at the moment - usual pattern there is to run from build directory and then create the .exe installer
------------------------------------------------------------------------
r46410 | starseeker | 2011-08-25 15:00:20 -0500 (Thu, 25 Aug 2011) | 1 line

These variables are not needed by default, but useful in some situations - put commented out lines in to illustrate how they would be set
------------------------------------------------------------------------
r46406 | starseeker | 2011-08-25 11:12:31 -0500 (Thu, 25 Aug 2011) | 1 line

don't want recursive behavior, so spot .. and ignore it in distcheck path handling.
------------------------------------------------------------------------
r46393 | starseeker | 2011-08-24 20:08:57 -0500 (Wed, 24 Aug 2011) | 1 line

mark BULLET_INCLUDE_DIR as advanced
------------------------------------------------------------------------
r46392 | starseeker | 2011-08-24 20:06:20 -0500 (Wed, 24 Aug 2011) | 1 line

Need more testing, but this setup swaps between 32 and 64 bit compilation without requiring the nuking of the build directory files.  In other words, changing the BRLCAD-CPU_TYPE in cmake-gui and running configure should 'do the right thing' automatically, and does on the system tested so far.
------------------------------------------------------------------------
r46364 | starseeker | 2011-08-23 19:29:02 -0500 (Tue, 23 Aug 2011) | 1 line

Since it's proving convenient to make a build directory in the src dir for a cmake .. build, ignore the two most common cases when doing cpack
------------------------------------------------------------------------
r46345 | abhi2011 | 2011-08-23 11:40:38 -0500 (Tue, 23 Aug 2011) | 1 line

Added detection of bullet dynamic libraries using the stock CMAKE FindCMake.cmake module
------------------------------------------------------------------------
r46323 | d_rossberg | 2011-08-23 02:25:07 -0500 (Tue, 23 Aug 2011) | 2 lines

quell cmake warning
and apparently trimmed trailing spaces
------------------------------------------------------------------------
r46291 | starseeker | 2011-08-19 16:04:55 -0500 (Fri, 19 Aug 2011) | 1 line

Can't configure for 64bit then 32bit, all the find_library and find_package results are for the wrong arch.  Hault configure and inform the user what needs to be done.
------------------------------------------------------------------------
r46290 | starseeker | 2011-08-19 15:37:40 -0500 (Fri, 19 Aug 2011) | 1 line

OK, for the first time a successful build of 32bit on a 64bit Linux box.
------------------------------------------------------------------------
r45989 | starseeker | 2011-08-15 11:36:53 -0500 (Mon, 15 Aug 2011) | 1 line

Add a few stray mark_as_advanced flags - cmake-gui options on OSX now look clean.
------------------------------------------------------------------------
r45985 | starseeker | 2011-08-15 10:44:11 -0500 (Mon, 15 Aug 2011) | 1 line

Make a stab at case insensitivity with the three-way options - needs testing to make sure I didn't break anything.
------------------------------------------------------------------------
r45969 | starseeker | 2011-08-13 01:57:24 -0500 (Sat, 13 Aug 2011) | 1 line

Mark rtgl as advanced.  Starting to look fairly clean now, at least on Linux.
------------------------------------------------------------------------
r45968 | starseeker | 2011-08-13 01:54:39 -0500 (Sat, 13 Aug 2011) | 1 line

Key the static lib building on the build type.  Exposed a problem with making the trigger variable an OPTION in sub-builds - doing so forces the setting into the cache and makes it impractical for the AUTO_OPTION macro to do its thing.  Fortunately, the only files doing that were the ones we wrote - corrected them, and we're good to go.
------------------------------------------------------------------------
r45967 | starseeker | 2011-08-13 01:33:24 -0500 (Sat, 13 Aug 2011) | 1 line

Don't really need the project name and it's limiting flexibility.
------------------------------------------------------------------------
r45966 | starseeker | 2011-08-13 01:29:47 -0500 (Sat, 13 Aug 2011) | 1 line

A pattern emerges, time for a macro.  CMAKE_BUILD_TYPE aware options.
------------------------------------------------------------------------
r45965 | starseeker | 2011-08-13 01:14:29 -0500 (Sat, 13 Aug 2011) | 1 line

Just like the optimization flag, except with the opposite defaults, enable smart autosetting of the debug flags.
------------------------------------------------------------------------
r45964 | starseeker | 2011-08-12 23:24:33 -0500 (Fri, 12 Aug 2011) | 1 line

Go with the most expected/convenient behavior - can't think of a valid case to install a rel into a dev dir or vice versa, complete and deceptive violation of convention and more convenient/useful to have the install dir swapped as a function of build type.
------------------------------------------------------------------------
r45963 | starseeker | 2011-08-12 23:19:45 -0500 (Fri, 12 Aug 2011) | 1 line

Use a variation on the three way option trick to get more sophisticated about turning on/off the optimization flags as a function of CMAKE_BUILD_TYPE - if Auto, optimization flags are on for Release and off for Debug, but 'hard' setting BRLCAD_FLAGS_OPTIMIZATION to ON or OFF will override the build-type based decision.  Also, clear the compile flags before we do our thing to eliminate any flags CMake automatically adds for a given build type - that's why NDEBUG was in the Release compile flags even when we wanted to add debug flags explicitly.
------------------------------------------------------------------------
r45961 | starseeker | 2011-08-12 21:37:09 -0500 (Fri, 12 Aug 2011) | 1 line

Constrain the CMake dropdown menu options for CMAKE_BUILD_TYPE to Debug and Release
------------------------------------------------------------------------
r45959 | starseeker | 2011-08-12 21:09:10 -0500 (Fri, 12 Aug 2011) | 1 line

Make sure BRLCAD_BUNDLED_LIBS is in the cache
------------------------------------------------------------------------
r45957 | starseeker | 2011-08-12 17:34:53 -0500 (Fri, 12 Aug 2011) | 1 line

Improve handling of extra documentation options - use conditional options keying off of program detection and other options, shorten variable names.
------------------------------------------------------------------------
r45955 | starseeker | 2011-08-12 16:23:07 -0500 (Fri, 12 Aug 2011) | 1 line

Fix comment
------------------------------------------------------------------------
r45952 | starseeker | 2011-08-12 16:11:55 -0500 (Fri, 12 Aug 2011) | 1 line

Stray newline
------------------------------------------------------------------------
r45950 | starseeker | 2011-08-12 16:09:41 -0500 (Fri, 12 Aug 2011) | 1 line

mark RPMBUILD_EXEC as advanced
------------------------------------------------------------------------
r45949 | starseeker | 2011-08-12 16:08:03 -0500 (Fri, 12 Aug 2011) | 1 line

ordering consistency
------------------------------------------------------------------------
r45948 | starseeker | 2011-08-12 16:06:56 -0500 (Fri, 12 Aug 2011) | 1 line

Beware cut and paste.
------------------------------------------------------------------------
r45947 | starseeker | 2011-08-12 16:04:40 -0500 (Fri, 12 Aug 2011) | 1 line

Cleanup, delete leftover code.
------------------------------------------------------------------------
r45946 | starseeker | 2011-08-12 15:59:15 -0500 (Fri, 12 Aug 2011) | 1 line

Begin a major re-work of the third-party-option-handling logic in CMake, taking advantage of CMake's ability to constrain variables to particular string values.  This should actually simplify the build logic somewhat in the end, but right now it's definitely alpha and untested in most configurations.
------------------------------------------------------------------------
r45934 | starseeker | 2011-08-11 21:14:36 -0500 (Thu, 11 Aug 2011) | 1 line

Stay with the release wording.
------------------------------------------------------------------------
r45763 | starseeker | 2011-08-02 14:14:55 -0500 (Tue, 02 Aug 2011) | 1 line

More refinement of the compiler flags logic.  May have to go one step further for MSVC project files...
------------------------------------------------------------------------
r45755 | starseeker | 2011-08-02 08:27:59 -0500 (Tue, 02 Aug 2011) | 1 line

CMake doesn't currently work with umask settings, so there's no point in setting it ahead of time.
------------------------------------------------------------------------
r45737 | brlcad | 2011-07-31 09:37:57 -0500 (Sun, 31 Jul 2011) | 1 line

CAD_VERSION was only needed to bridge an m4 variable to a shell variable, cmake can just set BRLCAD_VERSION.  on that note, use it where triplets are called for and keeping with our naming guidelines.
------------------------------------------------------------------------
r45732 | starseeker | 2011-07-29 14:03:17 -0500 (Fri, 29 Jul 2011) | 1 line

Provide an option to allow RPMS to have a version-specific unique name, to make it simpler to allow for installing multiple versions of BRL-CAD on one system.
------------------------------------------------------------------------
r45649 | starseeker | 2011-07-26 12:34:53 -0500 (Tue, 26 Jul 2011) | 1 line

Add a dirt-simple way to allow developers to inject their own default settings into the CMake process - eventually we may want to do something more sophisticated, but this is a simple way to do things like enable all local libraries by default.
------------------------------------------------------------------------
r45645 | starseeker | 2011-07-26 09:46:58 -0500 (Tue, 26 Jul 2011) | 1 line

Wasn't a typo - to do what that previous edit looked like it wanted to do, ELSEIF (I think) is what is needed.  Instead of that, just turn on DEBUG_BUILD for everything except Release
------------------------------------------------------------------------
r45635 | brlcad | 2011-07-26 08:00:29 -0500 (Tue, 26 Jul 2011) | 1 line

consistently default all builds (particularly fresh svn checkouts) to a system install into /usr/brlcad using rel- for releases and dev- for developer builds.  could probably even just key off of the patch number but leave as-is for now.  this will probably require windows to set the install prefix given there usually is no /usr path but that is needed for windows anyways for release builds.
------------------------------------------------------------------------
r45634 | brlcad | 2011-07-26 07:53:14 -0500 (Tue, 26 Jul 2011) | 1 line

typo?
------------------------------------------------------------------------
r45595 | starseeker | 2011-07-25 08:55:30 -0500 (Mon, 25 Jul 2011) | 1 line

CMake will check for third party libraries every time it is run (or rather, the ThirdParty.cmake macro logic will) but default to being quiet about it on subsequent runs unless there's actually something to report.  By the same token, don't keep hammering on the build type.
------------------------------------------------------------------------
r45584 | brlcad | 2011-07-24 08:49:22 -0500 (Sun, 24 Jul 2011) | 1 line

blindly forcing the FS access down to 32-bit is causing build problems for environments that prescribe a different setting.  getting redefinition warnings aside from it feeling like a non-portable hack to start with.  needs a better test if zlib needs something.
------------------------------------------------------------------------
r45497 | starseeker | 2011-07-14 19:59:17 -0500 (Thu, 14 Jul 2011) | 1 line

Comment out the --no-undefined linker option until I figure out how to test it.
------------------------------------------------------------------------
r45496 | starseeker | 2011-07-14 19:10:16 -0500 (Thu, 14 Jul 2011) | 1 line

Quote some path strings for robustness - need more testing of the logic with spaces and other unfriendly characters paths
------------------------------------------------------------------------
r45492 | starseeker | 2011-07-14 07:01:54 -0500 (Thu, 14 Jul 2011) | 1 line

Ah hah.  Per http://www.cmake.org/Wiki/CMake_Version_Compatibility_Matrix, the *IGNORE_PATH variables weren't around until 2.8.3 - that's probably why the new mechanism for ignoring install paths wasn't working in some tests.  Bump our required version, as we need to avoid finding old installed BRL-CAD libraries.
------------------------------------------------------------------------
r45460 | starseeker | 2011-07-13 16:26:07 -0500 (Wed, 13 Jul 2011) | 1 line

Add --no-undefined to linker, fix printing of linker settings.
------------------------------------------------------------------------
r45458 | starseeker | 2011-07-13 15:13:24 -0500 (Wed, 13 Jul 2011) | 1 line

Start trying to get the point where we can do 64 bit builds on 32 bit systems and vice versa with the flick of an option.  Start with a more verbose warning and option correction for MSVC, where one must pick one generator or the other at CMake configure time.
------------------------------------------------------------------------
r45429 | erikgreenwald | 2011-07-12 12:59:22 -0500 (Tue, 12 Jul 2011) | 1 line

match the endif to the if
------------------------------------------------------------------------
r45428 | starseeker | 2011-07-12 12:30:52 -0500 (Tue, 12 Jul 2011) | 1 line

If we don't have a defined CMAKE_SIZEOF_VOID_P, assume 32 bit to be safe.
------------------------------------------------------------------------
r45419 | d_rossberg | 2011-07-11 03:05:09 -0500 (Mon, 11 Jul 2011) | 1 line

corrected comment on brlcad.dll flag
------------------------------------------------------------------------
r45333 | starseeker | 2011-06-30 08:27:28 -0500 (Thu, 30 Jun 2011) | 1 line

Readibility improvement.
------------------------------------------------------------------------
r45315 | starseeker | 2011-06-29 14:15:03 -0500 (Wed, 29 Jun 2011) | 1 line

Most of the time if you're compiling you want Debug build, and when you don't want that you're specifying Release build - it's extremely rare to really WANT to not have the build type set.  Make the default behavior the common case.
------------------------------------------------------------------------
r45314 | starseeker | 2011-06-29 14:00:42 -0500 (Wed, 29 Jun 2011) | 1 line

LOCATION -> LOCATION_
------------------------------------------------------------------------
r45303 | starseeker | 2011-06-29 09:19:58 -0500 (Wed, 29 Jun 2011) | 1 line

Ah, that's right - that's what gives us the ability to duplicate the installed layout. Will need to do something else with libpng.
------------------------------------------------------------------------
r45302 | starseeker | 2011-06-29 09:12:19 -0500 (Wed, 29 Jun 2011) | 1 line

See whether we actually needed to specify the BRLCAD_BINARY_DIR - if we don't, this may avoid libpng's problem.
------------------------------------------------------------------------
r45101 | starseeker | 2011-06-17 15:27:59 -0500 (Fri, 17 Jun 2011) | 1 line

Remove the obsolete DISTCHECK_DIRS global property, more comments on flex.
------------------------------------------------------------------------
r45086 | d_rossberg | 2011-06-17 01:58:08 -0500 (Fri, 17 Jun 2011) | 2 lines

included the brlcad.dll build into the overall CMake build
it is switched off by default and can be enabled by setting the (advanced) option BRLCAD-ENABLE_BRLCAD_LIBRARY
------------------------------------------------------------------------
r45076 | starseeker | 2011-06-16 15:12:35 -0500 (Thu, 16 Jun 2011) | 1 line

We require cmake 2.8, and 2.6 and later treat CPACK_STRIP_FILES as a boolean variable - no reason for this logic anymore (which may not have been correct to start with)
------------------------------------------------------------------------
r45072 | starseeker | 2011-06-16 13:55:35 -0500 (Thu, 16 Jun 2011) | 1 line

Flag CMAKE_SYSTEM_IGNORE_PATH as advanced
------------------------------------------------------------------------
r45059 | brlcad | 2011-06-16 01:40:41 -0500 (Thu, 16 Jun 2011) | 1 line

need to test for getcwd for libbu's bu_getcwd() function.
------------------------------------------------------------------------
r45040 | starseeker | 2011-06-15 14:47:31 -0500 (Wed, 15 Jun 2011) | 1 line

Hmm.  OK, that's promising - distcheck called out some files that, upon examination, make sense.  This might do it, but needs a LOT more checking/hammering.
------------------------------------------------------------------------
r45037 | starseeker | 2011-06-15 13:51:44 -0500 (Wed, 15 Jun 2011) | 1 line

move the dist lists to src/other toplevel.
------------------------------------------------------------------------
r45018 | starseeker | 2011-06-15 11:32:03 -0500 (Wed, 15 Jun 2011) | 1 line

This is an intermediate phase and I doubt it's working, but I need to checkpoint - reworking distcheck logic to be cleaner, more robust, etc.
------------------------------------------------------------------------
r44803 | brlcad | 2011-06-07 15:03:44 -0500 (Tue, 07 Jun 2011) | 1 line

sort lists of things that have no intrinsic order for easier searchability
------------------------------------------------------------------------
r44768 | starseeker | 2011-06-06 17:52:37 -0500 (Mon, 06 Jun 2011) | 1 line

Note that distcheck, as well as target ordering, are related to the command override logic.
------------------------------------------------------------------------
r44767 | starseeker | 2011-06-06 17:19:20 -0500 (Mon, 06 Jun 2011) | 1 line

Reorganize distcheck global logic a bit.
------------------------------------------------------------------------
r44763 | starseeker | 2011-06-06 16:39:42 -0500 (Mon, 06 Jun 2011) | 1 line

More minor CMakeLists.txt changes.
------------------------------------------------------------------------
r44761 | starseeker | 2011-06-06 16:21:25 -0500 (Mon, 06 Jun 2011) | 1 line

Go with KDE style lookup for Carbon and Cocoa - much simpler.
------------------------------------------------------------------------
r44756 | starseeker | 2011-06-06 16:04:42 -0500 (Mon, 06 Jun 2011) | 1 line

Minor tweaks to CMakeLists.txt file.
------------------------------------------------------------------------
r44753 | starseeker | 2011-06-06 15:48:22 -0500 (Mon, 06 Jun 2011) | 1 line

Needs more testing, but simplify down the install dir variables.
------------------------------------------------------------------------
r44742 | starseeker | 2011-06-06 13:59:50 -0500 (Mon, 06 Jun 2011) | 1 line

Add an option to play nice as a subbuild of another project - turns off the distcheck support, timing code and cpack settings that would be the responsibility of a parent project.
------------------------------------------------------------------------
r44739 | starseeker | 2011-06-06 12:45:08 -0500 (Mon, 06 Jun 2011) | 1 line

Go with IGNORE_PATH for avoid install path - seems to be working in tests on Linux...
------------------------------------------------------------------------
r44638 | starseeker | 2011-05-19 17:19:55 -0500 (Thu, 19 May 2011) | 1 line

Maybe someday this will work, or I'll figure out why I'm doing it wrong - CMAKE_SYSTEM_IGNORE_PATH should be ideal for excluding the install dir from Find results, but it doesn't seem to.
------------------------------------------------------------------------
r44618 | erikgreenwald | 2011-05-16 13:06:26 -0500 (Mon, 16 May 2011) | 1 line

Don't try the math expression if we don't have a void pointer size (???) (starseeker)
------------------------------------------------------------------------
r44609 | starseeker | 2011-05-10 15:56:55 -0500 (Tue, 10 May 2011) | 1 line

Fix comment's line number reference
------------------------------------------------------------------------
r44608 | starseeker | 2011-05-10 15:54:27 -0500 (Tue, 10 May 2011) | 1 line

Go for the SYSTEM paths - they aren't intended to be modified by the project according to CMake, but until we find another way to avoid searching CMAKE_INSTALL_PREFIX we seem to have little choice.  Need to test this on Windows to see if it helps there.
------------------------------------------------------------------------
r44607 | starseeker | 2011-05-10 15:35:55 -0500 (Tue, 10 May 2011) | 1 line

Make a stab at broader coverage for the 'searching in install paths' issue - don't know if this fully works as yet.
------------------------------------------------------------------------
r44600 | starseeker | 2011-05-10 13:25:23 -0500 (Tue, 10 May 2011) | 1 line

Er, oops - turn 64 bit off for 32bit compiler...
------------------------------------------------------------------------
r44598 | starseeker | 2011-05-10 09:59:12 -0500 (Tue, 10 May 2011) | 1 line

Make the logic to prevent CMake from searching in CMAKE_INSTALL_PREFIX more robust.
------------------------------------------------------------------------
r44576 | erikgreenwald | 2011-05-05 16:20:29 -0500 (Thu, 05 May 2011) | 2 lines

Define _FILE_OFFSET_BITS and _LARGEFILE64_SOURCE to 32b filesystem access to work around zlib's "little trick" that causes havoc with -Wundef.

------------------------------------------------------------------------
r44575 | erikgreenwald | 2011-05-05 15:58:30 -0500 (Thu, 05 May 2011) | 1 line

wire in wglext.h if possible
------------------------------------------------------------------------
r44570 | erikgreenwald | 2011-05-05 15:34:23 -0500 (Thu, 05 May 2011) | 1 line

look for GL/glext.h
------------------------------------------------------------------------
r44493 | starseeker | 2011-04-25 16:02:41 -0500 (Mon, 25 Apr 2011) | 1 line

Take a stab at using CPack options to get the directory structure we want.
------------------------------------------------------------------------
r44490 | starseeker | 2011-04-25 14:21:15 -0500 (Mon, 25 Apr 2011) | 1 line

Ignore new hacking file
------------------------------------------------------------------------
r44487 | starseeker | 2011-04-25 12:45:34 -0500 (Mon, 25 Apr 2011) | 1 line

Ah, interesting.  There is a subtle point with the CMake macros that hadn't previously been triggered - if a subdirectory build runs a macro, a parent directory will not re-run that macro.  Makes sense if the macros only job is to set CMake variables - we're doing more by having the macro write out to a config file.  As a consequence, when a subconfigure uses a macro that puts an entry into CONFIG_H in a subdir, the parent directory won't be able to run that macro.  Need to refactor to do this right - the building of the various CONFIG_H files needs to be explicit and not contained in macro calls.
------------------------------------------------------------------------
r44461 | brlcad | 2011-04-20 13:39:37 -0500 (Wed, 20 Apr 2011) | 1 line

sync all of the CMakeLists.txt files from the cmake branch to trunk, preserving history via svn cp for the new additions and copying for the rest.
------------------------------------------------------------------------
r44282 | starseeker | 2011-04-08 12:01:17 -0500 (Fri, 08 Apr 2011) | 1 line

Minimize hard-coding - use CMAKE_INSTALL_PREFIX for this, if we can get away with it
------------------------------------------------------------------------
r44281 | starseeker | 2011-04-08 11:37:34 -0500 (Fri, 08 Apr 2011) | 1 line

If we have rpmbuild around, add the RPM generator to the package build
------------------------------------------------------------------------
r43816 | starseeker | 2011-03-09 07:30:05 -0600 (Wed, 09 Mar 2011) | 1 line

MFC r43815, put STRICT_FLAGS back where it was - apparently the presence of %V warnings only in non-strict builds is expected - we want to see other bu_log related warnings that are valid, and cannot separate the wheat from the chaff when it comes to the error reporting, so we have to make that tradeoff in order to add -Werror.  This is very unfortunate since it means a strict build isn't sufficent to catch all valid warnings and a NON-strict build is also required for full coverage.
------------------------------------------------------------------------
r43783 | starseeker | 2011-03-08 12:18:14 -0600 (Tue, 08 Mar 2011) | 1 line

Setting linker flags now, not compiler flags
------------------------------------------------------------------------
r43782 | starseeker | 2011-03-08 12:05:07 -0600 (Tue, 08 Mar 2011) | 1 line

Rework how CFLAGS are assigned in CMake.  Major changes are using build type specific flags to hold things instead of the catch-all, and changing the STRICT_FLAGS brlcad_config.h include to WARNING_FLAGS.  The way CMake sets things up, turning on the warnings but not strict just means you're expecting to see all the same output without failing.  Conditionalizing the bu.h undef/redefine logic on strict and not warning violated that principle, because format warnings would appear without strict being set but disappeared once it was set.  Conditionalize instead on whether we have the warnings - it's possible to be strict without the extra warnings, and not strict with the warnings, so the warnings are a better variable to key off of.  Need to adjust configure.ac in trunk to define WARNING_FLAGS instead of STRICT_FLAGS, or change how it behaves as well - probably simpler to rename variable and just go with existing behavior until cmake logic goes live.
------------------------------------------------------------------------
r43778 | starseeker | 2011-03-08 07:49:18 -0600 (Tue, 08 Mar 2011) | 1 line

Add some documentation on what the distcheck routine does
------------------------------------------------------------------------
r43653 | starseeker | 2011-03-03 05:51:08 -0600 (Thu, 03 Mar 2011) | 1 line

VERSION_GREATER, not GREATER
------------------------------------------------------------------------
r43641 | starseeker | 2011-03-02 17:20:47 -0600 (Wed, 02 Mar 2011) | 1 line

Rework handling of compile flags - no longer setting strict flags at the individual target levels, since BRL-CAD is going fully strict.  There are a few local overrides for issues not yet resolved, but the default will now be that anything new automatically gets the struct flags with all warnings unless options are turned off.
------------------------------------------------------------------------
r43633 | starseeker | 2011-03-02 10:46:46 -0600 (Wed, 02 Mar 2011) | 1 line

Lovely - check cmake version before we set CMP0017
------------------------------------------------------------------------
r43630 | starseeker | 2011-03-02 07:54:59 -0600 (Wed, 02 Mar 2011) | 1 line

Don't care about warnings on the time delta utilties
------------------------------------------------------------------------
r43612 | starseeker | 2011-03-02 06:44:17 -0600 (Wed, 02 Mar 2011) | 1 line

Hmm - how did this not trigger before?  make sure HAVE_STRINGS_H actually makes it into brlcad_config.h
------------------------------------------------------------------------
r43601 | starseeker | 2011-03-02 05:28:04 -0600 (Wed, 02 Mar 2011) | 1 line

New policy in 2.8.4 - we prefer the old behavior for now
------------------------------------------------------------------------
r43530 | starseeker | 2011-02-28 18:13:00 -0600 (Mon, 28 Feb 2011) | 1 line

Remove the complex and only partially successful noprod logic - with targets in toplevel bin dirs anyway the utility is minimal, and not worth the complexity.
------------------------------------------------------------------------
r43529 | starseeker | 2011-02-28 17:38:12 -0600 (Mon, 28 Feb 2011) | 1 line

Move the TERMLIB option to src/other - we need this set in advance of the third party logic.
------------------------------------------------------------------------
r43512 | starseeker | 2011-02-28 12:39:52 -0600 (Mon, 28 Feb 2011) | 1 line

Try InstallRequiredSystemLibraries on Windows MSVC
------------------------------------------------------------------------
r43417 | starseeker | 2011-02-18 08:21:04 -0600 (Fri, 18 Feb 2011) | 1 line

initialize CFLAGS like we mean it
------------------------------------------------------------------------
r43416 | starseeker | 2011-02-18 07:40:57 -0600 (Fri, 18 Feb 2011) | 1 line

Need arpa/inet.h test
------------------------------------------------------------------------
r43415 | starseeker | 2011-02-18 07:38:49 -0600 (Fri, 18 Feb 2011) | 1 line

We don't want any of the CFLAGS being added to the BRL-CAD build to make it to src/other - from what I'm seeing on the CMake list the correct way to do this seems to be adding the src/other subdirectory before any CFLAGS are set at the top level.  This also means that the src/other CMakeLists.txt files have to 'stand on their own' a bit more than before - i.e. they can't depend on the toplevel settings to give them what they need.  This is fine (indeed it's the right way to do it) but jove in particular isn't a proper stand-alone subconfigure yet and some of the others probably need tweaking.  Hopefully this will build - currently stops with ntohl not being defined, which is unrelated.
------------------------------------------------------------------------
r43402 | starseeker | 2011-02-17 15:03:18 -0600 (Thu, 17 Feb 2011) | 1 line

Get distcheck working for CMake
------------------------------------------------------------------------
r43203 | starseeker | 2011-02-10 12:47:40 -0600 (Thu, 10 Feb 2011) | 1 line

Use a sentinel file instead of listing all of the output directories - approach suggested by David Cole on the CMake list, seems to work and build doesn't keep recopying files.  Also tweak the tclscript routines to depend on the file used by the copy target.  Disable the option to turn targets on/off - now needed for tclscripts build, no longer spewing one target for file, and anyway the build should ensure changes made to data files in the src dir are reflected in the data tree in the build dir.
------------------------------------------------------------------------
r43198 | starseeker | 2011-02-09 22:02:43 -0600 (Wed, 09 Feb 2011) | 1 line

Instead of one target per file, try to get one per list working for data copying.  More reasonable target count, but some of them aren't terminating even though files appear to be copies successfully.
------------------------------------------------------------------------
r43107 | starseeker | 2011-02-07 20:27:08 -0600 (Mon, 07 Feb 2011) | 1 line

Was right the first time - can't be sure what impact symbolic links and the links may have on ORIGIN.  Have to go with the install path first, and just make sure it doesn't conflict with a system path if the idea is to make something relocatable.
------------------------------------------------------------------------
r43105 | starseeker | 2011-02-07 20:03:00 -0600 (Mon, 07 Feb 2011) | 1 line

quote the flag string - it's not a list in the CMake sense
------------------------------------------------------------------------
r43104 | starseeker | 2011-02-07 19:14:36 -0600 (Mon, 07 Feb 2011) | 1 line

try ORIGIN first - if the binary is running locally, pulling a system lib would be both subtly unexpected and potentially subtly wrong.
------------------------------------------------------------------------
r43100 | starseeker | 2011-02-07 16:05:49 -0600 (Mon, 07 Feb 2011) | 1 line

Set policy CMP0007 so FindTCL won't trigger warning messages
------------------------------------------------------------------------
r43095 | starseeker | 2011-02-07 14:00:24 -0600 (Mon, 07 Feb 2011) | 1 line

Add a few more config options, remove commented out C99 stuff (belongs in CompilerFlags.cmake)
------------------------------------------------------------------------
r43092 | starseeker | 2011-02-07 13:33:27 -0600 (Mon, 07 Feb 2011) | 1 line

else, not elseif
------------------------------------------------------------------------
r43091 | starseeker | 2011-02-07 13:28:04 -0600 (Mon, 07 Feb 2011) | 1 line

remove stray debug message
------------------------------------------------------------------------
r43090 | starseeker | 2011-02-07 13:25:07 -0600 (Mon, 07 Feb 2011) | 1 line

Mark aqua option as advanced regardless, move TODO.cmake item
------------------------------------------------------------------------
r43089 | starseeker | 2011-02-07 13:19:38 -0600 (Mon, 07 Feb 2011) | 1 line

Clean up the Aqua logic a little.  Punt on Aqua for now, since a) it's not working anyway b) there's a fair bit of work to do with the tcl/tk CMake logic to enable Aqua c) the Aqua layer for Tcl/Tk is in flux (moving from Carbon to Cocoa) and it's not clear that the older Carbon backend in 8.5 will work on newer OSX systems (all new development effort is focused on the Cocoa backend).  Togl will need to be made to work with the new Cocoa backend once it appears as well - preliminary patches have been merged but they are untested, so revisit then when Aqua backend becomes hot again.
------------------------------------------------------------------------
r43087 | starseeker | 2011-02-07 12:17:05 -0600 (Mon, 07 Feb 2011) | 1 line

provide a make distclean target for cleanup after an aborted make distcheck
------------------------------------------------------------------------
r43085 | starseeker | 2011-02-07 10:06:59 -0600 (Mon, 07 Feb 2011) | 1 line

Fix and simplify svn checking logic - doing it this way, temp file isn't needed.
------------------------------------------------------------------------
r43084 | starseeker | 2011-02-07 09:56:53 -0600 (Mon, 07 Feb 2011) | 1 line

Try conditionalizing the svn part of the distcheck - only want to do this if a) we have svn and b) we're building from an svn repository
------------------------------------------------------------------------
r43081 | starseeker | 2011-02-07 09:33:50 -0600 (Mon, 07 Feb 2011) | 1 line

Heh - distcheck caught it.  Add the new configure script to the ignore list.
------------------------------------------------------------------------
r43060 | starseeker | 2011-02-07 06:13:22 -0600 (Mon, 07 Feb 2011) | 1 line

Tweak settings for Jove
------------------------------------------------------------------------
r43056 | starseeker | 2011-02-06 22:22:29 -0600 (Sun, 06 Feb 2011) | 1 line

Nevermind the ignore thing for now - it's of questionable use and a complication
------------------------------------------------------------------------
r43055 | starseeker | 2011-02-06 17:36:00 -0600 (Sun, 06 Feb 2011) | 1 line

Ah, toplevel directory was escaping.  Probably a cleaner way to do this, but this will work.
------------------------------------------------------------------------
r43054 | starseeker | 2011-02-06 17:05:28 -0600 (Sun, 06 Feb 2011) | 1 line

More tweaks
------------------------------------------------------------------------
r43053 | starseeker | 2011-02-06 16:50:31 -0600 (Sun, 06 Feb 2011) | 1 line

It's a better test if the install directory is on its own.
------------------------------------------------------------------------
r43052 | starseeker | 2011-02-06 16:42:18 -0600 (Sun, 06 Feb 2011) | 1 line

Whoops - install, not build for this test.
------------------------------------------------------------------------
r43050 | starseeker | 2011-02-06 16:33:54 -0600 (Sun, 06 Feb 2011) | 1 line

Clean up benchmark, add printout for successful distcheck.
------------------------------------------------------------------------
r43049 | starseeker | 2011-02-06 15:57:31 -0600 (Sun, 06 Feb 2011) | 1 line

Add some cleanup to the distcheck target
------------------------------------------------------------------------
r43042 | starseeker | 2011-02-06 12:56:45 -0600 (Sun, 06 Feb 2011) | 2 lines

Take things one step further - if a CMakeLists.txt file is including files from subdirectories, scanning those subdirectories for un-accounted-for files becomes the responsibility of that CMakeLists.txt file.

------------------------------------------------------------------------
r43040 | starseeker | 2011-02-06 10:24:12 -0600 (Sun, 06 Feb 2011) | 1 line

Add more of the machinery for distcheck file checking - modify macros, add specific macros for ignoring things not otherwise covered by macros or build logic.  Fail in distcheck if an ignored file is represented elsewhere in the build logic - may indicate a previously unused file is now in use and shouldn't be ignored any longer.
------------------------------------------------------------------------
r43039 | starseeker | 2011-02-06 08:48:39 -0600 (Sun, 06 Feb 2011) | 1 line

First steps towards a comprehensive system to check for files missing from the build logic.  Still quite a lot to do here, and even when the system is fully in place have to go back and list all the stuff not referred to now (what in autotools would be the EXTRA_DIST entries)
------------------------------------------------------------------------
r43038 | starseeker | 2011-02-05 09:25:21 -0600 (Sat, 05 Feb 2011) | 1 line

Whoops, tell it to run
------------------------------------------------------------------------
r43037 | starseeker | 2011-02-05 09:07:29 -0600 (Sat, 05 Feb 2011) | 1 line

Try adding the benchmark to distcheck
------------------------------------------------------------------------
r43035 | starseeker | 2011-02-04 22:19:52 -0600 (Fri, 04 Feb 2011) | 1 line

Hmm.  Try fleshing out the steps for distcheck a bit more...
------------------------------------------------------------------------
r43034 | starseeker | 2011-02-04 21:54:20 -0600 (Fri, 04 Feb 2011) | 1 line

Very beginning ideas for a distcheck rule for CMake build.  Using svn to identify anything foreign in the source tree - this imposes the requirements of not using svn:ignore for anything in the tree and out-of-source-dir builds for a distcheck build, both of which should be reasonable and work (the CMake logic does not need to generate any files in-source-dir
------------------------------------------------------------------------
r42989 | starseeker | 2011-02-03 19:14:05 -0600 (Thu, 03 Feb 2011) | 1 line

Not ready for C99 yet - variety of failures on Linux.  Will need to rework this to apply C99 only to C files of BRL-CAD targets.
------------------------------------------------------------------------
r42985 | starseeker | 2011-02-03 18:12:42 -0600 (Thu, 03 Feb 2011) | 1 line

Turn on C99 for CMake, plus two related tweaks
------------------------------------------------------------------------
r42983 | starseeker | 2011-02-03 17:28:36 -0600 (Thu, 03 Feb 2011) | 1 line

Turn Tk X11 requirement on if appropriate
------------------------------------------------------------------------
r42942 | starseeker | 2011-02-02 21:13:43 -0600 (Wed, 02 Feb 2011) | 1 line

Add a mechanism to print out the compilation time for CMake build.  Works only for make (e.g. make all) which appears to be consistent with autotools.  Summary information isn't as elaborate as the autotools output, but that can be added if it's needed.
------------------------------------------------------------------------
r42940 | starseeker | 2011-02-02 20:54:26 -0600 (Wed, 02 Feb 2011) | 1 line

Remove the benchmark and rtserver-only options - benchmark is handled by proper dependencies for make benchmark.  rtserver will also build minimally due to dependencies.
------------------------------------------------------------------------
r42923 | starseeker | 2011-02-02 14:03:27 -0600 (Wed, 02 Feb 2011) | 1 line

Don't try rtgl unless we've got X11
------------------------------------------------------------------------
r42873 | starseeker | 2011-02-01 19:39:28 -0600 (Tue, 01 Feb 2011) | 1 line

Do BRLCAD_DATA the right way in CMake.
------------------------------------------------------------------------
r42867 | starseeker | 2011-02-01 17:25:45 -0600 (Tue, 01 Feb 2011) | 1 line

no reason to use cmake_noprod.cmake - just call it noprod so it's more like a make target
------------------------------------------------------------------------
r42854 | starseeker | 2011-02-01 16:42:18 -0600 (Tue, 01 Feb 2011) | 1 line

Add the BRLCAD-ENABLE_CXX_STRICT option
------------------------------------------------------------------------
r42830 | starseeker | 2011-02-01 12:54:15 -0600 (Tue, 01 Feb 2011) | 1 line

another absolute install path
------------------------------------------------------------------------
r42827 | starseeker | 2011-02-01 11:52:34 -0600 (Tue, 01 Feb 2011) | 1 line

Ah - remove files based on version number properties as well for noprod.  Start using the exec list to strip executables for CPack
------------------------------------------------------------------------
r42823 | starseeker | 2011-02-01 10:11:02 -0600 (Tue, 01 Feb 2011) | 1 line

Fix step build properly - surprise, surprise using scl_cf.h correctly actually helped
------------------------------------------------------------------------
r42822 | starseeker | 2011-02-01 09:41:27 -0600 (Tue, 01 Feb 2011) | 1 line

Eeek.  This appears to be a working per-directory noprod solution.  Done the best I can for convenience vs. policy - CMP0002 forbids non-unique target names, and hence excludes a 'make noprod' rule for each directory.  Even forcing that to OLD, get some odd behavior with the toplevel 'make noprod' rule (not surprisingly, the policy is there for a reason).  Hence, there is a toplevel make noprod command and in subdirectories 'make noprod' becomes 'cmake -P ./cmake_noprod.cmake'
------------------------------------------------------------------------
r42819 | starseeker | 2011-01-31 23:32:59 -0600 (Mon, 31 Jan 2011) | 1 line

This is a long shot, but see if a per-directory noprod can be set up.  Just exploring the preliminary steps as yet - if this does work it will involve a hideous abuse of the old CMP0002 policy allowing non-unique target names, so not ideal even if it does work...
------------------------------------------------------------------------
r42816 | starseeker | 2011-01-31 22:35:45 -0600 (Mon, 31 Jan 2011) | 1 line

Going to have to use a global property for the build targets lists - functions have local variable scope, not sure why it ever worked originally.  This needs more testing, not sure it stays constant over multiple cmake runs and need to verify it's doing 'the right things'.  Also, test noprod rule.
------------------------------------------------------------------------
r42805 | starseeker | 2011-01-31 15:50:32 -0600 (Mon, 31 Jan 2011) | 1 line

Add ORIGIN into RPATH
------------------------------------------------------------------------
r42796 | starseeker | 2011-01-31 09:55:34 -0600 (Mon, 31 Jan 2011) | 1 line

mark as advanced for GUI
------------------------------------------------------------------------
r42795 | starseeker | 2011-01-31 09:47:10 -0600 (Mon, 31 Jan 2011) | 1 line

Do a little more thorough wrapping of TERMLIB stuff.
------------------------------------------------------------------------
r42794 | starseeker | 2011-01-31 09:31:19 -0600 (Mon, 31 Jan 2011) | 1 line

Remove stray debug message
------------------------------------------------------------------------
r42792 | starseeker | 2011-01-31 09:09:10 -0600 (Mon, 31 Jan 2011) | 1 line

Shouldn't need these any more, now that bu_brlcad_root and bu_brlcad_data are pretty much sorted out.
------------------------------------------------------------------------
r42790 | starseeker | 2011-01-31 01:44:01 -0600 (Mon, 31 Jan 2011) | 1 line

A variety of fixes and cleanups - had broken Tcl/Tk search, got it working - more advanced options cleanup, got things pretty much where they should be now.  Move termlib logic into FindTERMLIB.cmake so it can work in the third party logic.  Added new ability to the ThirdParty.cmake code - can now FORCE enabling and disabling of any given library, over and above the ENABLE_ALL style logic.  Hopefully that will allow mimicking the autotools ./configure --enable-all --disable-*** style option setting.
------------------------------------------------------------------------
r42788 | starseeker | 2011-01-30 21:01:27 -0600 (Sun, 30 Jan 2011) | 1 line

Start cleaning up - mark some things as advanced so they don't show in the default view, more to go
------------------------------------------------------------------------
r42786 | starseeker | 2011-01-30 20:33:37 -0600 (Sun, 30 Jan 2011) | 1 line

Don't need an option for doxygen - just don't make it part of the ALL target.
------------------------------------------------------------------------
r42784 | starseeker | 2011-01-30 20:25:06 -0600 (Sun, 30 Jan 2011) | 1 line

Take a quick stab at adding Doxygen build logic.
------------------------------------------------------------------------
r42783 | starseeker | 2011-01-30 19:52:28 -0600 (Sun, 30 Jan 2011) | 1 line

Get a little more sophisticated.  Still do the FILE(COPY up front, which is much quicker and doesn't slow the build down, but allow the user to optionally enable the data target generation, which will add the data and documentation files to the make logic at the expense of a large increase in make targets (and corresponding build slowdown).  The initial build will still copy all the files even with the FILE(COPY if the targets are on, since the timestamps will be older on the copied files.  Use the new macros for most of the data - need to cook up something similar for src/other builds eventually and come to a decision about handling the headers.
------------------------------------------------------------------------
r42758 | starseeker | 2011-01-29 11:29:38 -0600 (Sat, 29 Jan 2011) | 1 line

Getting too cute for my own good - OK to copy the headers in order to duplicate the install dir, but don't use them to compile BRL-CAD itself - if you want to edit a header, the error message should report the location of the copy that will be edited and checked into subversion, not the build-dir copy.
------------------------------------------------------------------------
r42755 | starseeker | 2011-01-29 10:17:37 -0600 (Sat, 29 Jan 2011) | 1 line

There we go - optionally turn off warnings for src/other globally (on by default) and add lots of strict flags
------------------------------------------------------------------------
r42751 | starseeker | 2011-01-29 08:06:01 -0600 (Sat, 29 Jan 2011) | 2 lines

One the path is non-default, make sure the default test fails subsequently, even in the same CMake run (in case a subproject sets it in the default case, like step)

------------------------------------------------------------------------
r42685 | starseeker | 2011-01-27 21:16:06 -0600 (Thu, 27 Jan 2011) | 1 line

Pick up sunmath if it's there for tcl/tk
------------------------------------------------------------------------
r42677 | starseeker | 2011-01-27 19:23:23 -0600 (Thu, 27 Jan 2011) | 1 line

Allow the enabling of RTGL, although things look to be a tad broken at the moment - need to check trunk.
------------------------------------------------------------------------
r42675 | starseeker | 2011-01-27 19:00:05 -0600 (Thu, 27 Jan 2011) | 1 line

OK, this should bring the compiler flags logic pretty darn close to the latest autotools, with this possible exception of not isolating the src/other dir quite well enough - on the other hand, may be OK since it built successfully on gentoo with these settings.
------------------------------------------------------------------------
r42672 | starseeker | 2011-01-27 18:28:10 -0600 (Thu, 27 Jan 2011) | 1 line

sigh.  jove is explicitly referenced as the editor of last resort in other code, so go ahead and build it.  wonder if this actually works on Windows...
------------------------------------------------------------------------
r42640 | starseeker | 2011-01-26 21:28:38 -0600 (Wed, 26 Jan 2011) | 1 line

Enable the CMake counterpart to the verbose output option.  Also, finally turn off the static libraries when doing a debug build unless they're specifically requested (non MSVC builds)
------------------------------------------------------------------------
r42639 | starseeker | 2011-01-26 21:07:55 -0600 (Wed, 26 Jan 2011) | 1 line

Get most of the remaining summary report entries functioning, although need to check what compilation progress means in configure.ac.  Also will need to re-sync warning/strict flag logic to match new autotools settings.
------------------------------------------------------------------------
r42638 | starseeker | 2011-01-26 20:52:06 -0600 (Wed, 26 Jan 2011) | 1 line

enable optimized flags for Release build, and warn if they are disabled - also set up 64 bit flag for MSVC, although this is untested and the CompilerFlags.cmake file doesn't yet incorporate MSVC flags (it should, TODO)
------------------------------------------------------------------------
r42635 | starseeker | 2011-01-26 20:18:31 -0600 (Wed, 26 Jan 2011) | 1 line

Uh, whoops - add the flags if the build type IS set, not when it isn't...
------------------------------------------------------------------------
r42634 | starseeker | 2011-01-26 20:09:11 -0600 (Wed, 26 Jan 2011) | 1 line

Start trying to hammer the C/CXX flags logic into shape.  More to do here, but getting better (should actually be using more of the flags now...)
------------------------------------------------------------------------
r42608 | starseeker | 2011-01-25 17:09:18 -0600 (Tue, 25 Jan 2011) | 1 line

Remove debug messages.
------------------------------------------------------------------------
r42607 | starseeker | 2011-01-25 16:59:49 -0600 (Tue, 25 Jan 2011) | 1 line

Cache either way, so it doesn't pop up in the gui (hopefully, untested)
------------------------------------------------------------------------
r42598 | starseeker | 2011-01-25 12:23:42 -0600 (Tue, 25 Jan 2011) | 1 line

Use the more specific and thorough test for termlib, instead of Curses.  While we're at it, add (conditionally) togl to the build.
------------------------------------------------------------------------
r42562 | starseeker | 2011-01-23 15:32:48 -0600 (Sun, 23 Jan 2011) | 1 line

Get the NSIS installer from CMake closer to the old BRL-CAD installer
------------------------------------------------------------------------
r42414 | starseeker | 2011-01-18 12:03:35 -0600 (Tue, 18 Jan 2011) | 1 line

Make the CMake library target logic a bit more generic.  A lot of these files should probably be worked into being proper stand-alone CMakeLists.txt files.
------------------------------------------------------------------------
r42413 | starseeker | 2011-01-18 10:21:58 -0600 (Tue, 18 Jan 2011) | 1 line

Successfully generate an NSIS installer, although it doesn't work yet due to src/other libraries being installed to the wrong dir - need to correct the CMake files in question or add additional logic in src/other/CMakeLists.txt, whichever makes sense.
------------------------------------------------------------------------
r42404 | starseeker | 2011-01-17 10:27:46 -0600 (Mon, 17 Jan 2011) | 1 line

Update cmake branch to r42403, add realpath check to CMakeLists.txt
------------------------------------------------------------------------
r42400 | starseeker | 2011-01-17 09:03:08 -0600 (Mon, 17 Jan 2011) | 1 line

Hopefully this will allow the same common.h to be used in both cmake and autotools.
------------------------------------------------------------------------
r42397 | starseeker | 2011-01-17 08:50:34 -0600 (Mon, 17 Jan 2011) | 1 line

Use config_win_cmake.h for CMake build.
------------------------------------------------------------------------
r42310 | starseeker | 2011-01-15 22:42:15 -0600 (Sat, 15 Jan 2011) | 1 line

For now we need Curses in the CMake build, but that needs to be fixed.
------------------------------------------------------------------------
r42294 | starseeker | 2011-01-14 22:59:03 -0600 (Fri, 14 Jan 2011) | 2 lines

Update cmake branch to trunk r42293.  Also got some preliminary efforts at improving the libtermlib handling in the mix, but they aren't ready yet (probably don't work.)

------------------------------------------------------------------------
r42293 | starseeker | 2011-01-14 21:53:08 -0600 (Fri, 14 Jan 2011) | 1 line

Few left over updates that didn't get committed from the home machine.
------------------------------------------------------------------------
r42270 | starseeker | 2011-01-14 13:47:40 -0600 (Fri, 14 Jan 2011) | 1 line

Few more fixes to CMake logic.
------------------------------------------------------------------------
r42268 | starseeker | 2011-01-14 13:12:52 -0600 (Fri, 14 Jan 2011) | 1 line

Tweaks to accomidate changes resulting from the new logic - get us building again.
------------------------------------------------------------------------
r42259 | starseeker | 2011-01-14 07:43:50 -0600 (Fri, 14 Jan 2011) | 1 line

Start updating the CMake logic to re-create the installed file layout, insofar as practical.  First step - header placement (cause there are fewer of these).
------------------------------------------------------------------------
r42251 | starseeker | 2011-01-13 15:06:57 -0600 (Thu, 13 Jan 2011) | 1 line

We need to append the BRL-CAD version to the data install dir.
------------------------------------------------------------------------
r42178 | starseeker | 2011-01-12 16:07:58 -0600 (Wed, 12 Jan 2011) | 1 line

For whatever reason, CMAKE_C_FLAGS is upsetting VC++ 2010 - comment it out
------------------------------------------------------------------------
r42169 | starseeker | 2011-01-12 13:48:55 -0600 (Wed, 12 Jan 2011) | 1 line

Interesting - the -c option causes the time delta compile to fail.
------------------------------------------------------------------------
r42158 | starseeker | 2011-01-12 12:52:51 -0600 (Wed, 12 Jan 2011) | 1 line

Let's try a space on Windows again and see if those defines fixed it...
------------------------------------------------------------------------
r42138 | starseeker | 2011-01-12 08:36:05 -0600 (Wed, 12 Jan 2011) | 1 line

Small change, but important for CPack packages - don't use absolute dirs as targets for install, which allows CPack to put things in the package without hard-coding the prefix (in essence building a subdirectory structure inside the archive
------------------------------------------------------------------------
r42130 | starseeker | 2011-01-11 22:32:33 -0600 (Tue, 11 Jan 2011) | 1 line

Tweak generator list, vars for CPack
------------------------------------------------------------------------
r42123 | starseeker | 2011-01-11 20:57:49 -0600 (Tue, 11 Jan 2011) | 1 line

Tweaks - seems to produces better results for make package.
------------------------------------------------------------------------
r42109 | starseeker | 2011-01-11 19:06:26 -0600 (Tue, 11 Jan 2011) | 1 line

Want to set to /usr/brlcad as default instead of the CMake default.
------------------------------------------------------------------------
r42084 | starseeker | 2011-01-11 12:36:30 -0600 (Tue, 11 Jan 2011) | 1 line

Try to migrate more towards standard CMake variables - BRLCAD_PREFIX should now be only for the purposes of removal from find_package search paths.
------------------------------------------------------------------------
r42082 | starseeker | 2011-01-11 11:38:39 -0600 (Tue, 11 Jan 2011) | 1 line

Take the first steps to 'properly' handle CMAKE_INSTALL_PREFIX and the issue of find_package searching in it when cmake is re-run.  Don't really want to manhandle CMAKE_INSTALL_PREFIX any more than we have to, so try this.
------------------------------------------------------------------------
r42074 | starseeker | 2011-01-11 09:00:55 -0600 (Tue, 11 Jan 2011) | 1 line

Make a stab at getting BRLCAD_PREFIX displayed in the CMake gui
------------------------------------------------------------------------
r42064 | starseeker | 2011-01-10 17:03:04 -0600 (Mon, 10 Jan 2011) | 1 line

Start setting up logic for CPack.  Start slowly - this is just the tar.gz, tar.bz2 and .zip files, to match what make distcheck produces (that will need to be confirmed).
------------------------------------------------------------------------
r42039 | starseeker | 2011-01-08 11:39:44 -0600 (Sat, 08 Jan 2011) | 1 line

Try adding nologo to some more variables, although I'm not sure these will have much/any impact - the most annoying one currently is the Resource Compiler, which cannot be suppressed: http://social.msdn.microsoft.com/Forums/en/windowssdk/thread/88bd1f52-af7d-4aa7-982a-f8798b32288d
------------------------------------------------------------------------
r41736 | starseeker | 2010-12-21 08:26:37 -0600 (Tue, 21 Dec 2010) | 1 line

Whoops, typo.
------------------------------------------------------------------------
r41735 | starseeker | 2010-12-21 08:25:37 -0600 (Tue, 21 Dec 2010) | 1 line

Generalize the output directory settings along the lines hinted at by http://forum.openscenegraph.org/viewtopic.php?t=6926
------------------------------------------------------------------------
r41734 | starseeker | 2010-12-20 19:39:10 -0600 (Mon, 20 Dec 2010) | 1 line

Getting closer on Windows.  Irritatingly, the dlls are being put in bin not lib even after adding the extra config redircts (need to generalize that along these lines:  http://forum.openscenegraph.org/viewtopic.php?t=6926) so all of the pkgIndex.tcl scripts being generated will have to be customized to look for their dlls in ../../bin on Windows."
------------------------------------------------------------------------
r41732 | starseeker | 2010-12-20 15:12:32 -0600 (Mon, 20 Dec 2010) | 1 line

Urk - that's right, no PARALLEL for Windows
------------------------------------------------------------------------
r41710 | starseeker | 2010-12-19 00:41:14 -0600 (Sun, 19 Dec 2010) | 1 line

Gah - quiet some of the VC++ blather at a global level
------------------------------------------------------------------------
r41704 | starseeker | 2010-12-17 22:54:12 -0600 (Fri, 17 Dec 2010) | 1 line

Make a stab at adding conditionally adding config_win.h to brlcad_config.h
------------------------------------------------------------------------
r41108 | starseeker | 2010-10-19 12:11:11 -0500 (Tue, 19 Oct 2010) | 1 line

Need to check for netdb for adrt.
------------------------------------------------------------------------
r41024 | starseeker | 2010-10-17 00:44:35 -0500 (Sun, 17 Oct 2010) | 1 line

Oh yeah, probably don't want the debug message now.
------------------------------------------------------------------------
r41023 | starseeker | 2010-10-17 00:34:12 -0500 (Sun, 17 Oct 2010) | 1 line

Take care of an item I've let slide for a while - make sure the timestamp message is printed before ALL other targets, including the custom targets used for things like docbook handling and file generation.
------------------------------------------------------------------------
r41021 | starseeker | 2010-10-16 23:04:05 -0500 (Sat, 16 Oct 2010) | 1 line

Couple of minor tweaks, and now able to generate Visual Studio files.  Next step, see what fails to build.
------------------------------------------------------------------------
r40984 | starseeker | 2010-10-13 16:55:17 -0500 (Wed, 13 Oct 2010) | 1 line

Looks like some of the variables we were using were considered obsolete - try updating things a bit and see if that helps on Windows any...
------------------------------------------------------------------------
r40971 | starseeker | 2010-10-13 08:55:01 -0500 (Wed, 13 Oct 2010) | 1 line

Getting closer - gethostname still isn't working as expected on Windows, but if the HOST file is manually created we can now get as far as building libbu.  libbn wants libbu.lib, which apparently isn't being built by default.. hmm.
------------------------------------------------------------------------
r40964 | starseeker | 2010-10-10 08:05:34 -0500 (Sun, 10 Oct 2010) | 1 line

This gets slightly closer to building tcl/tk on Windows, but with the following restrictions - need to use the nmake generation, not MSVC (limitation of tcl/tk builds), so far tested only with command line cmake invocation, and tk build is still failing (common.h is asking for stdint.h and its not found, need to check out why.) 
------------------------------------------------------------------------
r40946 | starseeker | 2010-10-07 21:17:07 -0500 (Thu, 07 Oct 2010) | 1 line

It's not working at the moment, but start trying to get regress going.
------------------------------------------------------------------------
r40942 | starseeker | 2010-10-07 18:11:47 -0500 (Thu, 07 Oct 2010) | 1 line

We want to check /usr/local - try to define the variables needed
------------------------------------------------------------------------
r40941 | starseeker | 2010-10-07 17:38:42 -0500 (Thu, 07 Oct 2010) | 1 line

FreeBSD wants newlines at the end of these files, so go ahead and add them - doesn't break at least on the Mac, need to check Linux
------------------------------------------------------------------------
r40938 | starseeker | 2010-10-07 13:29:40 -0500 (Thu, 07 Oct 2010) | 1 line

Add some more type checks, try to perform the YYTEXT_POINTER test for lex.
------------------------------------------------------------------------
r40933 | starseeker | 2010-10-07 12:34:18 -0500 (Thu, 07 Oct 2010) | 1 line

Check for members in structures
------------------------------------------------------------------------
r40932 | starseeker | 2010-10-07 12:16:57 -0500 (Thu, 07 Oct 2010) | 1 line

add a few defines present in the autotools build - getting closer.  Lot of specialized AC macros to duplicate for types, although AC_C_CHAR_UNSIGNED is considered obsolete and won't be ported - only tcl/tk seem to use it in our code, and their build systems can handle it.
------------------------------------------------------------------------
r40930 | starseeker | 2010-10-07 11:46:52 -0500 (Thu, 07 Oct 2010) | 1 line

Cleanup, add in custom check for ALLOCA that mimics the autoconf test, check for dtrace header if that option is enabled.
------------------------------------------------------------------------
r40929 | starseeker | 2010-10-07 10:44:18 -0500 (Thu, 07 Oct 2010) | 1 line

Add some more checks for header files.
------------------------------------------------------------------------
r40927 | starseeker | 2010-10-06 22:12:11 -0500 (Wed, 06 Oct 2010) | 1 line

Now that the Carbon header flag is on, we need the results of FindCarbon for libdm - in the process, discovered that we need to special case framework arguments when passed in as part of a lib list to the BRLCAD macros - they (and only they, so far, in that they are multi-word non-list returns from a find macro) need a space between arguments to be preserved.  We're now building successfully on Mac again, although functionality testing is not done yet.
------------------------------------------------------------------------
r40912 | starseeker | 2010-10-06 20:55:15 -0500 (Wed, 06 Oct 2010) | 1 line

Go ahead and put back the working tests - a basic dirent.h test should be sufficient these days, so don't spend any more effort on it.
------------------------------------------------------------------------
r40911 | starseeker | 2010-10-06 20:28:13 -0500 (Wed, 06 Oct 2010) | 1 line

Don't duplicate obsolete Autoconf functionality unless there is a compelling reason
------------------------------------------------------------------------
r40910 | starseeker | 2010-10-06 20:18:14 -0500 (Wed, 06 Oct 2010) | 1 line

The LIBSTDCXX variable is used only in misc/pkgconfig/librt.pc.in (which already includes LIBM anyway) and src/other/step.  This test is somewhat difficult to set up in CMake - the standard CHECK_LIBRARY routine won't do it - and since it shouldn't be an issue anywhere except src/other/step remove it - if step libraries need the LIBM option add it.  Will have to set up an OpenBSD system to check this out.
------------------------------------------------------------------------
r40611 | starseeker | 2010-09-20 08:45:22 -0500 (Mon, 20 Sep 2010) | 1 line

Add more macro logic - autotools docs call a couple of these obsolete, so may want to think about finishing full duplication of the logic for dirent...
------------------------------------------------------------------------
r40609 | starseeker | 2010-09-20 07:57:24 -0500 (Mon, 20 Sep 2010) | 1 line

This should duplicate the AC_HEADER_STDC logic.
------------------------------------------------------------------------
r40608 | starseeker | 2010-09-19 10:11:22 -0500 (Sun, 19 Sep 2010) | 1 line

Reorganize some macro logic, move the basename and dirname test logic into the CheckFunctions macro file.
------------------------------------------------------------------------
r40607 | starseeker | 2010-09-19 09:37:46 -0500 (Sun, 19 Sep 2010) | 1 line

Identify what needs to be done for AC_HEADER_* macros.
------------------------------------------------------------------------
r40606 | starseeker | 2010-09-18 11:06:12 -0500 (Sat, 18 Sep 2010) | 1 line

Whoops - put defs in config file AFTER doing the find...
------------------------------------------------------------------------
r40605 | starseeker | 2010-09-18 06:13:38 -0500 (Sat, 18 Sep 2010) | 1 line

Conditionalize librtserver on finding the jni.h header, and fix some labels.
------------------------------------------------------------------------
r40604 | starseeker | 2010-09-17 16:20:18 -0500 (Fri, 17 Sep 2010) | 1 line

More compiler flag progress, reorg, etc.  Lot more wiring to do plus possibly another testing method or two.
------------------------------------------------------------------------
r40591 | starseeker | 2010-09-16 16:16:38 -0500 (Thu, 16 Sep 2010) | 1 line

More compiler flag stuff, most of it not working yet.
------------------------------------------------------------------------
r40590 | starseeker | 2010-09-16 15:16:26 -0500 (Thu, 16 Sep 2010) | 1 line

Detect 32/64 bit platforms via void pointer size, and conditionalize looking for 64 bit flags based on that - oddly enough, q64 succeeds on 32 bit OSX so I probably need to read up on why that is...
------------------------------------------------------------------------
r40589 | starseeker | 2010-09-16 11:27:58 -0500 (Thu, 16 Sep 2010) | 1 line

Enable -O3.  Later the functionality and option defs will have to be separated to allow the global build settings a crack at tweaking options before executing actions, but for now keep them together for easy reading.
------------------------------------------------------------------------
r40588 | starseeker | 2010-09-16 11:16:40 -0500 (Thu, 16 Sep 2010) | 1 line

Make an explicit ENABLE_TK option and use that instead of TK_LIBRARY
------------------------------------------------------------------------
r40587 | starseeker | 2010-09-16 10:40:22 -0500 (Thu, 16 Sep 2010) | 1 line

OK, here's how we'll handle BRL-CAD specific CFlags without roping in src/other libraries - make the strict flags an 'opt-in' option on a per-library basis in the BRLCAD_ADDLIB macro, and add the extra STRICT option to library targets that are supposed to support it.
------------------------------------------------------------------------
r40585 | starseeker | 2010-09-15 20:48:57 -0500 (Wed, 15 Sep 2010) | 1 line

Make sure CMAKE_INSTALL_PREFIX just doesn't end up in the cache - it seems to work fine ifwe set it in the CMakeLists.txt file, and its being in the Cache at all appears to be a potential problem for Find routines.
------------------------------------------------------------------------
r40584 | starseeker | 2010-09-15 19:52:41 -0500 (Wed, 15 Sep 2010) | 1 line

Sigh - tweak some more stuff.  Gonna have to set build flags after the tests are run, from the looks of things, and need to exclude opennurbs from the strict build flags.
------------------------------------------------------------------------
r40583 | starseeker | 2010-09-15 19:30:46 -0500 (Wed, 15 Sep 2010) | 1 line

Some more re-org, fixed a couple things.
------------------------------------------------------------------------
r40582 | starseeker | 2010-09-15 18:27:53 -0500 (Wed, 15 Sep 2010) | 1 line

Start cleaning up the toplevel CMakeLists.txt file and organizing it more along the lines of configure.ac.  It's time to bring the tests, options, etc. in the CMake file up to the capabilities of those in configure.ac, insofar as that makes sense.
------------------------------------------------------------------------
r40566 | starseeker | 2010-09-14 17:17:06 -0500 (Tue, 14 Sep 2010) | 1 line

This gets autopath working with CMake.
------------------------------------------------------------------------
r40561 | starseeker | 2010-09-14 11:05:54 -0500 (Tue, 14 Sep 2010) | 1 line

Turn on the opengl code - can now pick X11 or Aqua based on X11 being enabled/disabled.
------------------------------------------------------------------------
r40557 | starseeker | 2010-09-13 19:12:05 -0500 (Mon, 13 Sep 2010) | 1 line

rename the lib targets - they should now have a lib prefix.  Also, start trying to reduce the use of BRL-CAD specific variable names.
------------------------------------------------------------------------
r40556 | starseeker | 2010-09-13 16:35:34 -0500 (Mon, 13 Sep 2010) | 1 line

Wrap the install directory assignments in some macro logic, where practical.
------------------------------------------------------------------------
r40551 | starseeker | 2010-09-13 15:03:53 -0500 (Mon, 13 Sep 2010) | 1 line

The macros for src/other are not now being run in the toplevel makefile, so their changes are not visible there by default - need more CACHE explicit stuff.  Not absolutely clear if all the FORCE options are needed.
------------------------------------------------------------------------
r40550 | starseeker | 2010-09-13 14:06:40 -0500 (Mon, 13 Sep 2010) | 1 line

Wrap the external project logic in a couple macros to avoid verbose duplicate logic.  Also have FindTclPackage set options to avoid the necessity of doing it for each package in CMakeLists.txt
------------------------------------------------------------------------
r40549 | starseeker | 2010-09-13 12:25:42 -0500 (Mon, 13 Sep 2010) | 1 line

OK, we're working again - among other tweaks, take out the PNG specific stuff from the THIRD_PARTY_OPTION macro - handle it in toplevel CMakeLists.txt.
------------------------------------------------------------------------
r40548 | starseeker | 2010-09-13 10:34:19 -0500 (Mon, 13 Sep 2010) | 1 line

Not fully tested to build yet, but start reworking the third party logic to handle more of the default settings.  Also make the global dep on timestamp robust to disappearing targets via hint from list:  http://www.cmake.org/pipermail/cmake/2007-April/013479.html
------------------------------------------------------------------------
r40544 | starseeker | 2010-09-10 22:57:49 -0500 (Fri, 10 Sep 2010) | 1 line

Just needed the INCLUDE_FILE checks, from the looks of it
------------------------------------------------------------------------
r40542 | starseeker | 2010-09-10 19:22:58 -0500 (Fri, 10 Sep 2010) | 1 line

Yeah, still getting toplevel warnings.  benchmark-clean is safer, if slightly less convenient.
------------------------------------------------------------------------
r40541 | starseeker | 2010-09-10 19:20:54 -0500 (Fri, 10 Sep 2010) | 1 line

Taking a stab at Brad King's workaround for clean not accepting dependencies, but in early testing on OSX it doesn't seem to work.
------------------------------------------------------------------------
r40538 | starseeker | 2010-09-10 18:41:59 -0500 (Fri, 10 Sep 2010) | 1 line

Get benchmark running - needed a slightly different target definition.
------------------------------------------------------------------------
r40537 | starseeker | 2010-09-10 16:52:01 -0500 (Fri, 10 Sep 2010) | 1 line

More cleanups driven by diffs between autotools and cmake installs.  Getting close to complete - virtually all remaining diff are explained by expected differences.
------------------------------------------------------------------------
r40530 | starseeker | 2010-09-10 13:42:49 -0500 (Fri, 10 Sep 2010) | 1 line

Add in librtserver, although it's not confirmed working yet and the option logic for it isn't there yet either.
------------------------------------------------------------------------
r40527 | starseeker | 2010-09-09 22:24:14 -0500 (Thu, 09 Sep 2010) | 1 line

A variety of fixes and cleanups - still need the step data, libbrlcad, librtserver and a few misc items but closer.
------------------------------------------------------------------------
r40526 | starseeker | 2010-09-09 15:23:49 -0500 (Thu, 09 Sep 2010) | 1 line

Don't do the pdf stuff by default, rather expensive.
------------------------------------------------------------------------
r40525 | starseeker | 2010-09-09 15:17:31 -0500 (Thu, 09 Sep 2010) | 1 line

er, whoops - how about APACHE_FOP, not XSLTPROC_EXEC
------------------------------------------------------------------------
r40516 | starseeker | 2010-09-09 10:40:28 -0500 (Thu, 09 Sep 2010) | 1 line

Hook in more of the Docbook build - add more options, get basic PDF build working (need to enable more than articles, just a test)
------------------------------------------------------------------------
r40510 | starseeker | 2010-09-08 23:42:47 -0500 (Wed, 08 Sep 2010) | 1 line

Add more version numbers to libs, add a few other missing commands and files.
------------------------------------------------------------------------
r40509 | starseeker | 2010-09-08 23:04:37 -0500 (Wed, 08 Sep 2010) | 1 line

Add in some stray files missed earlier, as well as the sh and archer dirs - the archer dir probably is not correct yet
------------------------------------------------------------------------
r40508 | starseeker | 2010-09-08 16:07:18 -0500 (Wed, 08 Sep 2010) | 1 line

Don't hardcode xsltproc path - later will need to look for other alternatives to xsltproc as well
------------------------------------------------------------------------
r40498 | starseeker | 2010-09-07 20:11:39 -0500 (Tue, 07 Sep 2010) | 1 line

Start working out logic for tclscripts.  Unfortunately, it looks like the tclscript logic expects to create files in the source tree - for now, about all I can do is add the generated files to the make clean rule.  Ideally shouldn't be writing the file there in the first place, but that could be a bit tricky.
------------------------------------------------------------------------
r40497 | starseeker | 2010-09-07 19:40:14 -0500 (Tue, 07 Sep 2010) | 1 line

Add most of the doc directory, except for the docbook build (that's a bit more involved)
------------------------------------------------------------------------
r40495 | starseeker | 2010-09-07 16:43:54 -0500 (Tue, 07 Sep 2010) | 1 line

Add more headers to the install.
------------------------------------------------------------------------
r40494 | starseeker | 2010-09-07 15:43:39 -0500 (Tue, 07 Sep 2010) | 1 line

Add install logic for the headers.
------------------------------------------------------------------------
r40492 | starseeker | 2010-09-07 15:27:00 -0500 (Tue, 07 Sep 2010) | 1 line

Add build logic for URToolkit - don't have a Find* script for this yet.
------------------------------------------------------------------------
r40491 | starseeker | 2010-09-07 13:47:32 -0500 (Tue, 07 Sep 2010) | 1 line

Fix comment.
------------------------------------------------------------------------
r40490 | starseeker | 2010-09-07 13:42:01 -0500 (Tue, 07 Sep 2010) | 1 line

OK, here we go - build shared and static libraries by default thanks to some macro fun.  Naturally, Windows immediately makes me eat my words - we do need a lib prefix in all cases on Windows for static libs, so only in that case always set the prefix to 'lib' regardless of target name.
------------------------------------------------------------------------
r40489 | starseeker | 2010-09-07 13:23:37 -0500 (Tue, 07 Sep 2010) | 1 line

Since we're never going to want liblib as our prefix on a file name, have our add_library wrapper catch target names with lib in them and turn off the lib PREFIX in the target properties.  Now if we decide to rename all the lib targets (e.g. bu->libbu, bn->libbn, etc.) all we have to do is rename them.
------------------------------------------------------------------------
r40486 | starseeker | 2010-09-06 21:38:57 -0500 (Mon, 06 Sep 2010) | 1 line

Another tidbit from the CMake list - take out the LIBRARY part of the INSTALL command for libraries (ARCHIVES are static libraries, apparently) and turning off BUILD_SHARED_LIBS actually results in a build.
------------------------------------------------------------------------
r40485 | starseeker | 2010-09-06 14:35:36 -0500 (Mon, 06 Sep 2010) | 1 line

Take a stab at a noprod rule, based partially on the uninstall example from the CMake FAQ.  This is an 'all or nothing' command - it will flush ALL lib and exec products that cmake knows about, not just those in a single directory.  If we want per-directory control things are likely to get even trickier, if it can be done.
------------------------------------------------------------------------
r40484 | starseeker | 2010-09-06 11:18:08 -0500 (Mon, 06 Sep 2010) | 1 line

Thanks to some excellent help from the CMake list, implement a way to ensure that the timestamp comes at the beginning of the build.  This same mechanism of redefining/wrapping add_library and add_executable may help with a make noprod rule, although that is likely to be more complex.
------------------------------------------------------------------------
r40481 | starseeker | 2010-09-05 22:12:36 -0500 (Sun, 05 Sep 2010) | 1 line

Add in the man1 man pages.
------------------------------------------------------------------------
r40478 | starseeker | 2010-09-05 17:12:19 -0500 (Sun, 05 Sep 2010) | 1 line

Turn back on the generated files.
------------------------------------------------------------------------
r40476 | starseeker | 2010-09-05 17:03:38 -0500 (Sun, 05 Sep 2010) | 1 line

Commit a CMake file for using asc2g to build and install the db models.  Appears to work in parallel, but I only have 2 CPUs here so needs more testing.
------------------------------------------------------------------------
r40475 | starseeker | 2010-09-05 16:23:36 -0500 (Sun, 05 Sep 2010) | 1 line

Add in util and vdeck.  The remaining dirs in src will require solving a couple different problems - (Java, installing .tcl files properly, etc.)
------------------------------------------------------------------------
r40474 | starseeker | 2010-09-05 15:44:18 -0500 (Sun, 05 Sep 2010) | 1 line

Add in some more directories, update the nirt CMakeLists.txt.  For now, turn off the CONF/DATE/etc updating in the topelevel CMakeLists.txt, as the constant addition of make logic keeps trigging configures - need to remember to re-enable it at the end
------------------------------------------------------------------------
r40473 | starseeker | 2010-09-05 11:06:55 -0500 (Sun, 05 Sep 2010) | 1 line

OK, this builds mged but does not yet produce a working mged.
------------------------------------------------------------------------
r40471 | starseeker | 2010-09-05 10:29:40 -0500 (Sun, 05 Sep 2010) | 1 line

Add in some more directories to CMake.  Getting close to mged.
------------------------------------------------------------------------
r40470 | starseeker | 2010-09-05 09:08:48 -0500 (Sun, 05 Sep 2010) | 1 line

No idea if I'll get away with this, but rip out the C calls to Itcl/Itk init routines and replace them with package require calls.  Also need to define ITCL_VERSION in brlcad_config.h since we're not directly using the itcl/itk headers any more.  Also take out the while loop in bwish and just call the routine to add BRL-CAD path info up front - should be harmless if nothing there and odds are very good we'll need it.  Much simpler, and also simplifies the build logic considerably - no need now for private tcl/tk headers in libtclcad and bwish CMake files.
------------------------------------------------------------------------
r40469 | starseeker | 2010-09-04 20:01:36 -0500 (Sat, 04 Sep 2010) | 1 line

Add in some missed CMakeLists.txt files, and start working on bwish.  FindX11 paths by default weren't finding Xi on gentoo, so now have local copy of FindX11 with expanded paths.  btclsh and bwish appear to truly need the itcl/itk C libraries, which means the next step is to back up and add a C component to the Itcl/Itk definitions both for Find and for local compiling.
------------------------------------------------------------------------
r40468 | starseeker | 2010-09-04 19:27:33 -0500 (Sat, 04 Sep 2010) | 1 line

Add CMake logic for burst.  Not implementing the custom test routine as yet - that involves figuring out CTest and will come later.
------------------------------------------------------------------------
r40466 | starseeker | 2010-09-04 18:52:54 -0500 (Sat, 04 Sep 2010) | 1 line

brlman is a bit tricky - it relies on specific variable definitions, so will either need to alter brlman.sh.in, some stuff on the CMake side, or 'translate' in brlman's CMakeLists.txt file - latter may the simplest.
------------------------------------------------------------------------
r40465 | starseeker | 2010-09-04 14:25:37 -0500 (Sat, 04 Sep 2010) | 1 line

Add wrapper macros for the library and exec install invocations - only retro-fitting in places like rt or conv where there are a lot of lines to reduce; not worrying about individual instances that shorten a file by only one or two lines.
------------------------------------------------------------------------
r40464 | starseeker | 2010-09-04 12:29:42 -0500 (Sat, 04 Sep 2010) | 1 line

Add in anim directory.  Prototyping a macro to wrapp all of the exec files that are to be installed - may both simplfy and speed up conversion.
------------------------------------------------------------------------
r40463 | starseeker | 2010-09-04 12:07:11 -0500 (Sat, 04 Sep 2010) | 1 line

Add in libtermio and adrt - needed to fix the bsd library stuff for adrt.  CMake doesn't like empty add_library calls, so did tie0 as one library and made tie1 the 'parent' library that links in tie0.
------------------------------------------------------------------------
r40461 | starseeker | 2010-09-04 10:39:27 -0500 (Sat, 04 Sep 2010) | 1 line

Add in libicv and libtclcad.  libtclcad is a problem child, or if it isn't incrTcl is - seems to REQUIRE private headers from Tcl/Tk, which is likely to complicate using the results of FindTCL
------------------------------------------------------------------------
r40460 | starseeker | 2010-09-04 09:45:25 -0500 (Sat, 04 Sep 2010) | 1 line

Add libfft to CMake logic - first test of using ADD_CUSTOM_COMMAND to generate sources from a locally built binary.
------------------------------------------------------------------------
r40459 | starseeker | 2010-09-03 16:35:53 -0500 (Fri, 03 Sep 2010) | 1 line

Turning off OpenGL for now - need to think about locating it on OSX.  Define HAVE_TK and provide the Xi library, and we can build libdm for X11 and Tk.
------------------------------------------------------------------------
r40457 | starseeker | 2010-09-03 15:34:57 -0500 (Fri, 03 Sep 2010) | 1 line

OK, time to face the music.  libdm is going to need FindOpenGL logic roughly as sophisticated as the FindTCL logic - we will need X11 OpenGL on OSX.  Wonder if COMPILE_FLAGS or some other approach can do per-target building and build both X11 and Aqua code... probably not needed though.
------------------------------------------------------------------------
r40456 | starseeker | 2010-09-03 14:47:32 -0500 (Fri, 03 Sep 2010) | 1 line

Add libcursor, put install logic into fbserv
------------------------------------------------------------------------
r40455 | starseeker | 2010-09-03 14:40:15 -0500 (Fri, 03 Sep 2010) | 1 line

Add in fbserv
------------------------------------------------------------------------
r40451 | starseeker | 2010-09-03 13:57:29 -0500 (Fri, 03 Sep 2010) | 1 line

Now that we have (in principle anyway) the necessary libraries, start adding in src/conv
------------------------------------------------------------------------
r40442 | starseeker | 2010-09-02 15:42:19 -0500 (Thu, 02 Sep 2010) | 1 line

remove a couple old comments
------------------------------------------------------------------------
r40441 | starseeker | 2010-09-02 15:31:34 -0500 (Thu, 02 Sep 2010) | 1 line

Getting close to working 'all on' and 'all off' toggles - can't yet flip from one to the other with complete success, so some cached variables need to be unset somewhere, but much closer
------------------------------------------------------------------------
r40433 | starseeker | 2010-09-02 11:25:37 -0500 (Thu, 02 Sep 2010) | 1 line

Sometimes it really is simple - CMAKE_INSTALL_PREFIX is now set to empty string at the beginning of the CMake process every time, so the Find results all come out as if it were never set in the first place - and at the end the same mechanisms that originally set it also restore it.
------------------------------------------------------------------------
r40430 | starseeker | 2010-09-02 09:51:52 -0500 (Thu, 02 Sep 2010) | 1 line

Getting closer to full-featured src/other building, but the FIND_PATH/CMAKE_INSTALL_PREFIX problem from FindTCL.cmake is proving general.  Need some sort of solution to that before we're really ready.
------------------------------------------------------------------------
r40416 | starseeker | 2010-09-01 22:29:33 -0500 (Wed, 01 Sep 2010) | 1 line

Start tweaking to make the default behavior of the CMake build identical to the 'auto-detection' of the autotools build.  Need to think about enable-all and disable-all mechanisms, and write FindOPENNURBS and FindUTAHRLE
------------------------------------------------------------------------
r40415 | starseeker | 2010-09-01 20:19:47 -0500 (Wed, 01 Sep 2010) | 1 line

Tcl/Tk packages need to know where the *Config.sh files are, and have exec-prefix set to avoid writing to places they don't have permission to write.  This MAY imply that there is no need to look for headers if the config files aren't found, but need to think about that - right now that's the effect of the FindTCL variables, so the include stuff in the section section can probably go unless there's a need to have headers without config files.
------------------------------------------------------------------------
r40414 | starseeker | 2010-09-01 16:07:40 -0500 (Wed, 01 Sep 2010) | 1 line

Write a quick and dirty FindSCL.cmake file and enable the summary reporting for NIST STEP class libraries.
------------------------------------------------------------------------
r40409 | starseeker | 2010-09-01 13:20:48 -0500 (Wed, 01 Sep 2010) | 1 line

OK, here we go - add in tktable and turn on building all of the tcl/tk packages in src/other
------------------------------------------------------------------------
r40400 | starseeker | 2010-09-01 10:28:41 -0500 (Wed, 01 Sep 2010) | 1 line

eliminate stray debug message, enable the summary report for Itcl/Itk
------------------------------------------------------------------------
r40399 | starseeker | 2010-09-01 10:22:44 -0500 (Wed, 01 Sep 2010) | 1 line

Get itcl and itk building - some slight-of-hand needed to get information about private tcl/tk headers to incrtcl - we COULD use the compat directory (and do so if TCL_PRIVATE_HDRS isn't defined) but that may very well introduce trouble - perhaps compat needs an 8.5 directory as well.
------------------------------------------------------------------------
r40387 | starseeker | 2010-08-31 15:03:07 -0500 (Tue, 31 Aug 2010) | 1 line

start working on build for incrTcl
------------------------------------------------------------------------
r40362 | starseeker | 2010-08-28 21:09:59 -0500 (Sat, 28 Aug 2010) | 1 line

Start working on logic to determine what packages are present in a Tcl/Tk installation, if one is found.  May want to also support looking for min/max/exact versions, not sure yet.  While we're at it, clean up the if statement for the print summary - may want to turn it off, so set that up.
------------------------------------------------------------------------
r40345 | starseeker | 2010-08-27 09:21:43 -0500 (Fri, 27 Aug 2010) | 1 line

We were getting this setting from ZLIB - put it in our own toplevel - need it if we're not building our own ZLIB.
------------------------------------------------------------------------
r40336 | starseeker | 2010-08-26 15:57:47 -0500 (Thu, 26 Aug 2010) | 1 line

This should be TERMLIB
------------------------------------------------------------------------
r40334 | starseeker | 2010-08-26 14:34:50 -0500 (Thu, 26 Aug 2010) | 1 line

Commented out line tweaking CMAKE_SHARED_MODULE_CREATE_C_FLAGS - just there for convenience at the moment
------------------------------------------------------------------------
r40328 | starseeker | 2010-08-25 16:25:16 -0500 (Wed, 25 Aug 2010) | 1 line

Tweak the conditional logic to turn on local tcl/tk if a suitable system Tcl/Tk isn't found.
------------------------------------------------------------------------
r40311 | starseeker | 2010-08-24 16:26:07 -0500 (Tue, 24 Aug 2010) | 1 line

Try taking out the special-case checking and relying on the TCL_PATH_NOMATCH_PATTERNS mechanism
------------------------------------------------------------------------
r40309 | starseeker | 2010-08-24 15:26:05 -0500 (Tue, 24 Aug 2010) | 1 line

OK, can turn local Tcl/Tk build off and on now.  Need to start thinking about 'no tclConfig.sh' situations next.
------------------------------------------------------------------------
r40306 | starseeker | 2010-08-24 13:20:13 -0500 (Tue, 24 Aug 2010) | 1 line

Add ability to specify exclusions in search locations.
------------------------------------------------------------------------
r40288 | starseeker | 2010-08-23 09:26:56 -0500 (Mon, 23 Aug 2010) | 1 line

use set_target_properties to allow the targetname librt instead of rtlib - gets proper (librt.<ext>) library name at the end of build now.
------------------------------------------------------------------------
r40277 | starseeker | 2010-08-20 14:57:00 -0500 (Fri, 20 Aug 2010) | 1 line

tweaks - gonna need much more extensive deps to make sure time stamp prints at the beginning of the process.
------------------------------------------------------------------------
r40272 | starseeker | 2010-08-20 12:59:06 -0500 (Fri, 20 Aug 2010) | 1 line

Conditionalize a few things - some cleanup to do here, after FindTCL is done.
------------------------------------------------------------------------
r40271 | starseeker | 2010-08-20 12:53:10 -0500 (Fri, 20 Aug 2010) | 1 line

test dependencies on external projects - seems to do OK
------------------------------------------------------------------------
r40270 | starseeker | 2010-08-20 12:29:52 -0500 (Fri, 20 Aug 2010) | 1 line

Use the MAKE variable to ensure things like -j flags are passed to the sub-build.
------------------------------------------------------------------------
r40268 | starseeker | 2010-08-20 10:06:41 -0500 (Fri, 20 Aug 2010) | 1 line

Woo hoo!  Enable Tk external project as well - successfully built and ran rt using the local src/other tcl/tk
------------------------------------------------------------------------
r40266 | starseeker | 2010-08-19 23:25:08 -0500 (Thu, 19 Aug 2010) | 1 line

Closest thing so far to a working ExternalProject_ADD command - it appears to do the configure, make and make install PRIOR to building anything else, which means things like TCL_LIBRARY will need to point to the installed location of the library.
------------------------------------------------------------------------
r40186 | starseeker | 2010-08-17 12:45:49 -0500 (Tue, 17 Aug 2010) | 1 line

Whoops, read the right file.
------------------------------------------------------------------------
r40185 | starseeker | 2010-08-17 12:06:51 -0500 (Tue, 17 Aug 2010) | 1 line

Add a C based target for printing a timestamp during the Make process.
------------------------------------------------------------------------
r40184 | starseeker | 2010-08-17 11:36:04 -0500 (Tue, 17 Aug 2010) | 1 line

Thanks to Sean for clarifying the purpose of the include/conf variables - it looks like these can be populated entirely using CMake logic or previously generated time files, which means these are now (in principle) fully portable as far as generation is concerned.
------------------------------------------------------------------------
r40182 | starseeker | 2010-08-17 10:58:38 -0500 (Tue, 17 Aug 2010) | 1 line

Got this logic backwards - do RPATH if not on Mac.
------------------------------------------------------------------------
r40174 | starseeker | 2010-08-16 22:42:02 -0500 (Mon, 16 Aug 2010) | 1 line

Start trying to figure out how to get make install working.  Apparently 'here there be dragons' - Darwin doesn't use RPATH, so either need INSTALL_NAME_DIR or some sort of @executable_path thing... start reading http://www.cmake.org/pipermail/cmake/2007-October/017180.html for some background.
------------------------------------------------------------------------
r40173 | starseeker | 2010-08-16 20:18:35 -0500 (Mon, 16 Aug 2010) | 1 line

Don't try to hide failure of the C code based approach to time determination with script based approaches - failures on Windows will produce incorrect data without warning in some cases, so the C based approach has to work.
------------------------------------------------------------------------
r40172 | starseeker | 2010-08-16 20:13:21 -0500 (Mon, 16 Aug 2010) | 1 line

Set up basic functionality for doing a time delta of the configure process with CMake.
------------------------------------------------------------------------
r40171 | starseeker | 2010-08-16 18:06:42 -0500 (Mon, 16 Aug 2010) | 1 line

Xcode exposed the need for explicit dependency specifications for include/conf/COUNT and include/conf/DATE - Xcode build now succeeds.
------------------------------------------------------------------------
r40165 | starseeker | 2010-08-13 16:57:18 -0500 (Fri, 13 Aug 2010) | 1 line

typo
------------------------------------------------------------------------
r40164 | starseeker | 2010-08-13 16:52:38 -0500 (Fri, 13 Aug 2010) | 1 line

Oh yeah, comment no longer applies.
------------------------------------------------------------------------
r40163 | starseeker | 2010-08-13 16:51:58 -0500 (Fri, 13 Aug 2010) | 1 line

Sigh - as usual, I was making it WAAAAY too hard.  Simplify the date and count rules considerably.  Still should be in C, but at least now the complexity is reduced.
------------------------------------------------------------------------
r40162 | starseeker | 2010-08-13 16:35:07 -0500 (Fri, 13 Aug 2010) | 1 line

Er, whoops - make clean clears COUNT so make sure it's there.
------------------------------------------------------------------------
r40161 | starseeker | 2010-08-13 16:23:25 -0500 (Fri, 13 Aug 2010) | 1 line

Put hostname and username into C code, use FILE(WRITE for PATH, and leave the two working ones for now (also the two that must be set/updated at build time.
------------------------------------------------------------------------
r40159 | starseeker | 2010-08-13 15:41:06 -0500 (Fri, 13 Aug 2010) | 1 line

try to make variables in conf build time generated - some working, but not portable - needs to be C code both for Windows and to avoid quotes being eaten in interaction between CMake and echo
------------------------------------------------------------------------
r40155 | starseeker | 2010-08-13 12:50:13 -0500 (Fri, 13 Aug 2010) | 1 line

Move BRLCAD_ThirdParty.cmake to ThirdParty.cmake
------------------------------------------------------------------------
r40150 | starseeker | 2010-08-13 09:06:54 -0500 (Fri, 13 Aug 2010) | 1 line

Get the rest of the summary printing, even though a lot of the things being summarized aren't working yet.
------------------------------------------------------------------------
r40149 | starseeker | 2010-08-13 08:24:05 -0500 (Fri, 13 Aug 2010) | 1 line

Switch the way the option logic is handled to make it easier to summarize - we want to report if we are building local libs, not if we are using external libs - Make the 3rd party dir logic work accordingly, so the variables are set more conveniently for printing.
------------------------------------------------------------------------
r40146 | starseeker | 2010-08-12 15:26:24 -0500 (Thu, 12 Aug 2010) | 1 line

Don't need this message now that the summary is reporting it.
------------------------------------------------------------------------
r40145 | starseeker | 2010-08-12 15:09:20 -0500 (Thu, 12 Aug 2010) | 1 line

Add more status printing, make the strict option actually append some strict flags (right now it's applying them to the source other builds - will probably need to work around that somehow if libs that we don't 'own' anyway fail
------------------------------------------------------------------------
r40138 | starseeker | 2010-08-12 13:53:50 -0500 (Thu, 12 Aug 2010) | 1 line

OK, get real for now - gonna need X11 on Apple until the framebuffer/dm stuff is sorted out.
------------------------------------------------------------------------
r40131 | starseeker | 2010-08-12 09:25:11 -0500 (Thu, 12 Aug 2010) | 1 line

Make the include stuff slightly closer to what it should be - need a cross platform way to capture user and machine, as well as some way to increment count.
------------------------------------------------------------------------
r40129 | starseeker | 2010-08-12 08:30:27 -0500 (Thu, 12 Aug 2010) | 1 line

Add in test for Xlib.h, since libfb wants this particular variable defined... is  this an appropriate job for FindX11.cmake?
------------------------------------------------------------------------
r40113 | starseeker | 2010-08-11 15:21:21 -0500 (Wed, 11 Aug 2010) | 1 line

Start putting together the logic needed for the 'summary' printout at the end of the build.
------------------------------------------------------------------------
r40108 | starseeker | 2010-08-11 13:53:25 -0500 (Wed, 11 Aug 2010) | 1 line

Clear stray debugging printout.
------------------------------------------------------------------------
r40107 | starseeker | 2010-08-11 12:59:41 -0500 (Wed, 11 Aug 2010) | 1 line

OK, take a very serious stab at getting SOME kind of robust date information.  Use configure_file, try_run, and every other trick I know of to get this working - probably not cross platform yet but should update time.c.in accordingly to try and get this compiling everywhere.
------------------------------------------------------------------------
r40106 | starseeker | 2010-08-11 10:20:42 -0500 (Wed, 11 Aug 2010) | 1 line

Put some kind of default in for Windows - probably will need something smarter later.
------------------------------------------------------------------------
r40105 | starseeker | 2010-08-11 10:06:15 -0500 (Wed, 11 Aug 2010) | 1 line

Tweak the if logic for data directory settings
------------------------------------------------------------------------
r40094 | starseeker | 2010-08-10 17:17:31 -0500 (Tue, 10 Aug 2010) | 1 line

Start trying to actually build and use rt itself.  Not much luck thus far - can generate pix file, but that's about it.
------------------------------------------------------------------------
r40091 | starseeker | 2010-08-10 14:40:05 -0500 (Tue, 10 Aug 2010) | 1 line

Add ability to check for C++ headers
------------------------------------------------------------------------
r40090 | starseeker | 2010-08-10 14:21:00 -0500 (Tue, 10 Aug 2010) | 1 line

Few more tweaks to CMakeLists.txt
------------------------------------------------------------------------
r40089 | starseeker | 2010-08-10 13:54:37 -0500 (Tue, 10 Aug 2010) | 1 line

Write more values into the config file.
------------------------------------------------------------------------
r40079 | starseeker | 2010-08-09 20:42:41 -0500 (Mon, 09 Aug 2010) | 1 line

More comment cleanup, start wrapping the find_package calls in option value if statements - needs testing to see if it works as expected.
------------------------------------------------------------------------
r40077 | starseeker | 2010-08-09 20:21:47 -0500 (Mon, 09 Aug 2010) | 1 line

Add a few comments, get brlcad_config.h into the binary dir where it should be, update CMakeLists.txt files accordingly.
------------------------------------------------------------------------
r40076 | starseeker | 2010-08-09 19:59:07 -0500 (Mon, 09 Aug 2010) | 1 line

Whoops - fix a couple minor issues with versioning.
------------------------------------------------------------------------
r40075 | starseeker | 2010-08-09 19:46:55 -0500 (Mon, 09 Aug 2010) | 1 line

Tweak variables and messages a bit, and improvements to step CMakeLists.txt
------------------------------------------------------------------------
r40074 | starseeker | 2010-08-09 19:29:10 -0500 (Mon, 09 Aug 2010) | 1 line

Get some fugly but functional regex logic in for Windows, and fix the if conditionals for the date CONFIG_TS
------------------------------------------------------------------------
r40073 | starseeker | 2010-08-09 16:13:25 -0500 (Mon, 09 Aug 2010) | 1 line

Oh yeah, better turn back on opennurbs too.
------------------------------------------------------------------------
r40072 | starseeker | 2010-08-09 16:10:55 -0500 (Mon, 09 Aug 2010) | 1 line

Turn back on everything that seems to be building
------------------------------------------------------------------------
r40062 | starseeker | 2010-08-09 14:33:30 -0500 (Mon, 09 Aug 2010) | 1 line

OK, rather than rely on the default Flex/Bison support in CMake we're going to have to go hybrid - take the standard modules and alter them to handle either flex/bison or lex/yacc.  Doubt it's as simple as this try at it but it's a start.
------------------------------------------------------------------------
r40042 | starseeker | 2010-08-08 22:43:53 -0500 (Sun, 08 Aug 2010) | 1 line

Add in two more libraries to CMake build.
------------------------------------------------------------------------
r40041 | starseeker | 2010-08-08 22:13:04 -0500 (Sun, 08 Aug 2010) | 1 line

Try adding a few more of the libs - may have some problems with the Tcl regex stuff...
------------------------------------------------------------------------
r40040 | starseeker | 2010-08-08 21:50:26 -0500 (Sun, 08 Aug 2010) | 1 line

Add basic libpkg CMake build - not building the test app yet.
------------------------------------------------------------------------
r40033 | starseeker | 2010-08-08 09:49:05 -0500 (Sun, 08 Aug 2010) | 1 line

Take a stab at setting up libtermlib with a CMakeLists file - haven't hooked up any of the other libs to use it yet.
------------------------------------------------------------------------
r40032 | starseeker | 2010-08-07 16:56:43 -0500 (Sat, 07 Aug 2010) | 1 line

Add libsysv to CMake build
------------------------------------------------------------------------
r40031 | starseeker | 2010-08-07 16:48:09 -0500 (Sat, 07 Aug 2010) | 1 line

Add in librt to CMake build.
------------------------------------------------------------------------
r40029 | starseeker | 2010-08-07 16:16:47 -0500 (Sat, 07 Aug 2010) | 1 line

Add openNURBS to the CMake build.
------------------------------------------------------------------------
r40026 | starseeker | 2010-08-06 15:29:38 -0500 (Fri, 06 Aug 2010) | 1 line

Gonna need to set the PNG options ahead of the ADD_SUBDIRECTORY call in the THIRD_PARTY macro unless we want to require two passes before building - has its drawbacks since if an external png lib is used these options are useless, but mark as advanced to hide them from casual site.  Could be worse - it also highlights specific functionality needed by BRL-CAD.
------------------------------------------------------------------------
r40025 | starseeker | 2010-08-06 15:05:00 -0500 (Fri, 06 Aug 2010) | 1 line

Tweak things a bit - for some reason generating the brlcad_config.h in the out-of-dir build location isn't working for including, need to investigate.
------------------------------------------------------------------------
r40023 | starseeker | 2010-08-06 14:00:18 -0500 (Fri, 06 Aug 2010) | 1 line

Expand the tests for functions and headers.  It looks like some of this should probably be handled by Find* files, but still figuring out how to approach this.
------------------------------------------------------------------------
r40022 | starseeker | 2010-08-06 10:42:26 -0500 (Fri, 06 Aug 2010) | 1 line

Ah, handy - Ogre has FindCarbon and FindCocoa files - add them in.  There may be a few other items of interest in Ogre's CMake packages.
------------------------------------------------------------------------
r40020 | starseeker | 2010-08-05 22:10:52 -0500 (Thu, 05 Aug 2010) | 1 line

whoops, do the right malloc check.
------------------------------------------------------------------------
r40019 | starseeker | 2010-08-05 21:23:11 -0500 (Thu, 05 Aug 2010) | 1 line

By default, CMake's opengl logic assumes AGL is the opengl of interest on Apple, and requires manual specification for anything else.  We'll need to do better than that - add visus file as an example of how to approach this, although it's not likely to be the final solution.
------------------------------------------------------------------------
r40017 | starseeker | 2010-08-05 08:41:44 -0500 (Thu, 05 Aug 2010) | 1 line

Add in some more tests - this will need a LOT Of wiring up, cross platform testing, etc...
------------------------------------------------------------------------
r40016 | starseeker | 2010-08-05 08:16:08 -0500 (Thu, 05 Aug 2010) | 1 line

Start looking for libraries
------------------------------------------------------------------------
r40011 | starseeker | 2010-08-04 23:27:08 -0500 (Wed, 04 Aug 2010) | 1 line

Use flex/bison find_package by default - will need to set up the other macros as non-flex/bison fallbacks.
------------------------------------------------------------------------
r40010 | starseeker | 2010-08-04 23:09:22 -0500 (Wed, 04 Aug 2010) | 1 line

Add in a minor variation on Wireshark's CMake Lex/Yacc find routines, which conveniently were dual licensed GPL/BSD.  Probably need to think about Windows in these Find* files and may need considerably more sophistication in these macros, but it's a start.
------------------------------------------------------------------------
r40009 | starseeker | 2010-08-04 22:16:27 -0500 (Wed, 04 Aug 2010) | 1 line

Fix a few gotchas - CMake is now doing the pretty-print banner a.l.a configure - figured out how to generate the spacers.
------------------------------------------------------------------------
r40008 | starseeker | 2010-08-04 19:09:24 -0500 (Wed, 04 Aug 2010) | 1 line

Probably not in a working state (no cmake handy to test) but start fleshing out the contents of this file - gonna need to express what's in configure.ac in here, although for most options the 'auto' setting in configure.ac will just translate to some up-front testing...
------------------------------------------------------------------------
r39999 | starseeker | 2010-08-03 19:32:27 -0500 (Tue, 03 Aug 2010) | 1 line

Hmm - add example from J Decker on cmake list on using set_property, with the addition of FORCE - may or may not want this specific toggle but the technique is important - will allow for three-way Yes/No/Auto logic in CMake like that found in BRL-CAD's autotools setup
------------------------------------------------------------------------
r39994 | d_rossberg | 2010-08-03 03:20:13 -0500 (Tue, 03 Aug 2010) | 1 line

changed to the CMake way to read from files
------------------------------------------------------------------------
r39972 | starseeker | 2010-07-30 00:07:46 -0500 (Fri, 30 Jul 2010) | 1 line

Autoheader may not be necessary after all.  Wrap the CHECK_* functions in macros that also append to a specified CONFIG_H_FILE, then configure_file the result after the tests have been run.
------------------------------------------------------------------------
r39964 | starseeker | 2010-07-29 00:54:48 -0500 (Thu, 29 Jul 2010) | 1 line

Add libbn, get rid of the extra lib prefix for libbu.
------------------------------------------------------------------------
r39962 | starseeker | 2010-07-29 00:33:52 -0500 (Thu, 29 Jul 2010) | 1 line

Hmm, build with external libpng is resulting in one undefined symbol... must be using wrong include path?
------------------------------------------------------------------------
r39954 | starseeker | 2010-07-28 18:50:36 -0500 (Wed, 28 Jul 2010) | 1 line

Local Tcl/Tk will be a challenge, but FindTCL works find - can now make it through libbu build without error.
------------------------------------------------------------------------
r39953 | starseeker | 2010-07-28 18:33:59 -0500 (Wed, 28 Jul 2010) | 1 line

WOOHOO - GOT IT.  get_directory_property was the key, and was being complicated by one of the macros brought in from VTK - it was using SUBDIRS not ADD_SUBDIRECTORY, which was causing the get_directory_property to fail.  Put libpng CMakeLists.txt file back and set variables correctly.
------------------------------------------------------------------------
r39951 | starseeker | 2010-07-28 14:59:53 -0500 (Wed, 28 Jul 2010) | 1 line

Also not ideal in that it means altering the libpng CMake logic slightly, but this may be a cleaner approach than hardcoding at the toplevel.  The get_directory_property offers some hope for a fully correct solution, but as yet I can't get it to work.
------------------------------------------------------------------------
r39944 | starseeker | 2010-07-28 11:26:19 -0500 (Wed, 28 Jul 2010) | 1 line

Call this what it is - we're manually specifying the target name for add_library generated by the CMakeLists.txt file for libpng, not overriding what that file specifies.  Need to find a mechanism to get that name up to the parent CMakeLists.txt file without altering the libpng CMakeLists.txt file, but haven't found anything yet.
------------------------------------------------------------------------
r39938 | starseeker | 2010-07-28 00:44:16 -0500 (Wed, 28 Jul 2010) | 1 line

OK, this reduces a 'build it all' CMake build failure on libbu to just Tcl errors, which are expected since Tcl isn't in the build yet.  Using system libs doesn't work yet - variable settings need to be hooked up right, and a couple libs fairly unique to BRL-CAD need Find*.cmake scripts written.
------------------------------------------------------------------------
r39937 | starseeker | 2010-07-27 23:00:01 -0500 (Tue, 27 Jul 2010) | 1 line

OK, this stuff isn't correct yet, but should illustrate the basic method needed for duplicating brlcad_config.h with CMake.
------------------------------------------------------------------------
r39936 | starseeker | 2010-07-27 22:18:41 -0500 (Tue, 27 Jul 2010) | 1 line

Start putting together the code neede to replace the *.in configuration files used to generated headers and such by autotools.  Also starting to explore using ExternalProject for tcl/tk, but examples are few and the command may not yet be mature.
------------------------------------------------------------------------
r39915 | starseeker | 2010-07-27 10:50:36 -0500 (Tue, 27 Jul 2010) | 1 line

Get rid of stray line
------------------------------------------------------------------------
r39913 | starseeker | 2010-07-27 09:52:56 -0500 (Tue, 27 Jul 2010) | 1 line

Put in some date logic - try d_rossberg's execute_process on Windows, and otherwise do the standard configure.ac trick with the date command.
------------------------------------------------------------------------
r39911 | starseeker | 2010-07-26 23:25:58 -0500 (Mon, 26 Jul 2010) | 1 line

Make a quick-and-dirty CMakeLists.txt for libutahrle
------------------------------------------------------------------------
r39910 | starseeker | 2010-07-26 22:53:32 -0500 (Mon, 26 Jul 2010) | 1 line

Take a stab at libregex + CMake
------------------------------------------------------------------------
r39909 | starseeker | 2010-07-26 22:36:35 -0500 (Mon, 26 Jul 2010) | 1 line

OK, make this a little easier to test - set up to install in a subdir of /usr/brlcad by default...
------------------------------------------------------------------------
r39908 | starseeker | 2010-07-26 22:29:33 -0500 (Mon, 26 Jul 2010) | 1 line

Add some comments.  It is NOT clear, unfortunately, whether this will result in a working setup after a make install...
------------------------------------------------------------------------
r39907 | starseeker | 2010-07-26 22:10:22 -0500 (Mon, 26 Jul 2010) | 1 line

YES.  At least on this machine, this builds libpng with the local libz when local libz is turned on.
------------------------------------------------------------------------
r39905 | starseeker | 2010-07-26 09:41:00 -0500 (Mon, 26 Jul 2010) | 1 line

hah, date stuff does work - just print it properly.
------------------------------------------------------------------------
r39904 | starseeker | 2010-07-26 09:33:20 -0500 (Mon, 26 Jul 2010) | 1 line

Hrm.  Looks like something along the lines of this approach will be needed for switching between system and local libs - gonna need to figure out how to set a BRLCAD specific variable for libz library based on the subdirectory CMake variables... back to the CMake book.
------------------------------------------------------------------------
r39903 | starseeker | 2010-07-26 08:56:33 -0500 (Mon, 26 Jul 2010) | 1 line

See what enabling src/other/libz as a subdir does...
------------------------------------------------------------------------
r39896 | starseeker | 2010-07-25 12:14:13 -0500 (Sun, 25 Jul 2010) | 1 line

OK, get real on CMake + BRL-CAD - some complex logic to work out for the src/other stuff, and will need to figure out how to be smart with control options.  Start small - this lets the BRLCAD_USE_SYSTEM_LIBS directory force on the BRLCAD_USE_SYSTEM_ZLIB third part option, or at least does part of that job.  Need to figure this out - may have to write 'cache hiding' functions to hide subconfigure CMake options if turned off, assuming CMake supports such behavior...
------------------------------------------------------------------------
r37933 | starseeker | 2010-03-07 17:36:57 -0600 (Sun, 07 Mar 2010) | 1 line

Playing around with the CMakeLists.txt file a bit - will need to study the path settings a bit, especially how they're handled on Windows.
------------------------------------------------------------------------
r37932 | starseeker | 2010-03-07 11:57:26 -0600 (Sun, 07 Mar 2010) | 1 line

Start with the VTK cmake logic as a template, and 'read alongside' configure.ac to map jobs between Autotools and CMake.  Right up front, annoying issue - will need to create Date/Time solution for Windows, and make a cmake script to conditionally run it or date based on OS.
------------------------------------------------------------------------
