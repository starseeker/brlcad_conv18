<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- lifted from troff+man by doclifter -->
<refentry xmlns='http://docbook.org/ns/docbook' version='5.0' xml:lang='en' xml:id='inv_cmap3'>
<!--  \-*\- Text \-*\-
 Copyright (c) 1990, University of Michigan
 Template man page. -->
<refmeta>
<refentrytitle>INV_CMAP</refentrytitle>
<manvolnum>3</manvolnum>
<refmiscinfo class='source'>Month DD, YYYY</refmiscinfo>
<refmiscinfo class='manual'>1</refmiscinfo>
</refmeta>
<refnamediv>
<refname>inv_cmap</refname>
<refpurpose>efficiently compute an inverse colormap</refpurpose>
</refnamediv>
<!-- body begins here -->
<refsynopsisdiv xml:id='synopsis'>
<funcsynopsis>
<funcprototype>
<funcdef>void <function>inv_cmap</function></funcdef>
<paramdef><parameter>colors</parameter></paramdef>
<paramdef><parameter>colormap</parameter></paramdef>
<paramdef><parameter>bits</parameter></paramdef>
<paramdef><parameter>dist_buf</parameter></paramdef>
<paramdef><parameter>rgbmap</parameter></paramdef>
</funcprototype>
<funcsynopsisinfo>

int colors, bits;

unsigned char *colormap[3], *rgbmap;

unsigned long *dist_buf;
</funcsynopsisinfo>
</funcsynopsis>
</refsynopsisdiv>


<refsect1 xml:id='description'><title>DESCRIPTION</title>
<para><emphasis remap='I'>Inv_cmap</emphasis>
computes an inverse colormap to translate an RGB color to the nearest
color in the given <emphasis remap='I'>colormap</emphasis>.  The arguments are</para>
<variablelist remap='TP'>
  <varlistentry>
  <term><emphasis remap='I'>colors</emphasis></term>
  <listitem>
<para>The number of colors in the input colormap.  Must be &lt; 256.</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><emphasis remap='I'>colormap</emphasis></term>
  <listitem>
<para>The input colormap.  The <emphasis remap='I'>i</emphasis>th color is (<emphasis remap='I'>Colormap[0][i]</emphasis>,
<emphasis remap='I'>Colormap[1][i]</emphasis>, <emphasis remap='I'>Colormap[2][i]</emphasis>).</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><emphasis remap='I'>bits</emphasis></term>
  <listitem>
<para>Controls the size and precision of the inverse colormap.  The
resulting colormap will be a cube <emphasis remap='I'>2^bits</emphasis> on a side, and will
therefore contain <emphasis remap='I'>2^(3*bits)</emphasis> entries.  RGB colors must be
quantized to <emphasis remap='I'>bits</emphasis> bits before using the inverse colormap.</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><emphasis remap='I'>dist_buf</emphasis></term>
  <listitem>
<para>Temporary storage used by <function>inv_cmap</function>.  It should contain at least
<emphasis remap='I'>2^(3*bits)</emphasis> elements.</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><emphasis remap='I'>rgbmap</emphasis></term>
  <listitem>
<para>The inverse colormap.  Should be allocated with at least
<emphasis remap='I'>2^(3*bits)</emphasis> elements.  After calling <function>inv_cmap</function>, an RGB color
(r,g,b) can be mapped to its closest representative in <emphasis remap='I'>colormap</emphasis>
by evaluating
<!-- .br -->
#define quantize(p) ((p)&gt;&gt;(8-bits))
<!-- .br -->
rgbmap[ (((quantize(r) &lt;&lt; bits) | quantize(g)) &lt;&lt; bits) | quantize(b) ]</para>
  </listitem>
  </varlistentry>
</variablelist>

<para>Predicted performance is <emphasis remap='I'>O(2^(3*bits)*log(colors))</emphasis>.  The
measured performance is sublinear (but not as good as <emphasis remap='I'>log</emphasis>) in
the number of input colors and also in the size of the output inverse
colormap. (I.e., it goes up more slowly than <emphasis remap='I'>2^(3*bits)</emphasis>.)</para>
</refsect1>

<refsect1 xml:id='see_also'><title>SEE ALSO</title>
<para><citerefentry><refentrytitle>colorquant</refentrytitle><manvolnum>3</manvolnum></citerefentry>.</para>
</refsect1>

<refsect1 xml:id='author'><title>AUTHOR</title>
<para>Spencer W. Thomas</para>
</refsect1>
</refentry>

