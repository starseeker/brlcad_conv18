<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- lifted from troff+man by doclifter -->
<refentry xmlns='http://docbook.org/ns/docbook' version='5.0' xml:lang='en' xml:id='rle_open_f3'>
<!--  Copyright (c) 1986, 1987, University of Utah -->
<refentryinfo><date>2/2/87</date></refentryinfo>
<refmeta>
<refentrytitle>RLE_OPEN_F</refentrytitle>
<manvolnum>3</manvolnum>
<refmiscinfo class='date'>2/2/87</refmiscinfo>
<refmiscinfo class='source'>3</refmiscinfo>
</refmeta>
<refnamediv>
<refname>rle_open_f</refname>
<refpurpose>Open a binary file for input or output with defaults.</refpurpose>
</refnamediv>
<refnamediv>
<refname>rle_open_f_noexit</refname>
<refpurpose>Returns error code instead of exiting.</refpurpose>
</refnamediv>
<!-- body begins here -->
<refsynopsisdiv xml:id='synopsis'>
<funcsynopsis>
<funcprototype>
<funcdef><function>FILE</function> *rle_open_f</funcdef>
<paramdef><parameter>prog_name</parameter></paramdef>
<paramdef><parameter>file_name</parameter></paramdef>
<paramdef><parameter>mode</parameter></paramdef>
</funcprototype>
<funcsynopsisinfo>

char *prog_name, *file_name, *mode;

</funcsynopsisinfo>
<funcprototype>
<funcdef><function>FILE</function> *rle_open_f_noexit</funcdef>
<paramdef><parameter>prog_name</parameter></paramdef>
<paramdef><parameter>file_name</parameter></paramdef>
<paramdef><parameter>mode</parameter></paramdef>
</funcprototype>
<funcsynopsisinfo>

char *prog_name, *file_name, *mode;
</funcsynopsisinfo>
</funcsynopsis>
</refsynopsisdiv>


<refsect1 xml:id='description'><title>DESCRIPTION</title>
<para>The function
<emphasis remap='I'>rle_open_f</emphasis>
is provided to simplify the task of opening files in toolkit programs.
It works similarly to
<citerefentry><refentrytitle>fopen</refentrytitle><manvolnum>3</manvolnum></citerefentry>,
but it also provides error checking and messages, and default values
for input and output.  If the specified
<emphasis remap='I'>file_name</emphasis>
cannot be opened, an error message is printed and the program exits.
A variant
<emphasis remap='I'>rle_open_f_noexit</emphasis>
is provided which will return NULL if the file cannot be opened.  An
error message is still printed.</para>

<para>On those systems which require it, a 'b' will be appended to the mode
string so that the file will be opened in binary mode.</para>

<para>If the
<emphasis remap='I'>file_name</emphasis>
is NULL or "-", then
<emphasis remap='I'>stdin</emphasis>
will be returned for input (<emphasis remap='I'>mode</emphasis> "r") files and
<emphasis remap='I'>stdout</emphasis>
will be returned for output (<emphasis remap='I'>mode</emphasis> "w" or "a") files.</para>

<para><emphasis remap='I'>The following two options are available only on systems supporting pipes.</emphasis>
If the
<emphasis remap='I'>file_name</emphasis>
starts with a "|" character, then the rest of the file name will be
taken as a
<citerefentry><refentrytitle>sh</refentrytitle><manvolnum>1</manvolnum></citerefentry>
command.  If
<emphasis remap='I'>mode</emphasis>
is "r", a pipe from the output of the
<emphasis remap='I'>sh</emphasis>
command will be returned.  If
<emphasis remap='I'>mode</emphasis>
is "w" or "a", a pipe to the input of the
<emphasis remap='I'>sh</emphasis>
command will be returned.</para>

<para>If the
<emphasis remap='I'>file_name</emphasis>
ends with the suffix ".Z" (and does not start with "|"), then the
<citerefentry><refentrytitle>compress</refentrytitle><manvolnum>1</manvolnum></citerefentry>
program will be invoked to uncompress (<emphasis remap='I'>mode</emphasis> "r") or compress
(<emphasis remap='I'>mode</emphasis> "w" or "a") the file.  The file descriptor returned by
<emphasis remap='I'>rle_open_f</emphasis>
will be a pipe from or to the compress program.</para>
</refsect1>

<refsect1 xml:id='see_also'><title>SEE ALSO</title>
<para><citerefentry><refentrytitle>fopen</refentrytitle><manvolnum>3</manvolnum></citerefentry>,
<citerefentry><refentrytitle>popen</refentrytitle><manvolnum>3</manvolnum></citerefentry>,
<citerefentry><refentrytitle>compress</refentrytitle><manvolnum>1</manvolnum></citerefentry>.</para>
</refsect1>

<refsect1 xml:id='author'><title>AUTHOR</title>
<para>Gerald Winter
<!-- .br -->
Spencer W. Thomas
<!-- .br -->
University of Michigan</para>
</refsect1>

<refsect1 xml:id='bugs'><title>BUGS</title>
<para>If the command invoked via <emphasis remap='I'>popen</emphasis> does not exist, the <emphasis remap='I'>popen</emphasis>
still returns successfully, and the underlying <emphasis remap='I'>sh</emphasis> prints an
error message.</para>

<para>There is no way of telling that a particular <function>FILE</function> pointer has
been created by <emphasis remap='I'>popen</emphasis>, so it isn't possible to cleanly close the
pipe with <emphasis remap='I'>pclose</emphasis>.  In fact, the eventual output file may not
even exist by the time the program exits.</para>
</refsect1>
</refentry>

